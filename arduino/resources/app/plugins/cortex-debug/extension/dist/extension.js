/*! For license information please see extension.js.LICENSE.txt */
(()=>{var __webpack_modules__={4651:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSession=t.ErrorDestination=t.MemoryEvent=t.InvalidatedEvent=t.ProgressEndEvent=t.ProgressUpdateEvent=t.ProgressStartEvent=t.CapabilitiesEvent=t.LoadedSourceEvent=t.ModuleEvent=t.BreakpointEvent=t.ThreadEvent=t.OutputEvent=t.ExitedEvent=t.TerminatedEvent=t.InitializedEvent=t.ContinuedEvent=t.StoppedEvent=t.CompletionItem=t.Module=t.Breakpoint=t.Variable=t.Thread=t.StackFrame=t.Scope=t.Source=void 0;const s=r(1839),n=r(601),i=r(8153),o=r(7310);t.Source=class{constructor(e,t,r=0,s,n){this.name=e,this.path=t,this.sourceReference=r,s&&(this.origin=s),n&&(this.adapterData=n)}},t.Scope=class{constructor(e,t,r=!1){this.name=e,this.variablesReference=t,this.expensive=r}},t.StackFrame=class{constructor(e,t,r,s=0,n=0){this.id=e,this.source=r,this.line=s,this.column=n,this.name=t}},t.Thread=class{constructor(e,t){this.id=e,this.name=t||"Thread #"+e}},t.Variable=class{constructor(e,t,r=0,s,n){this.name=e,this.value=t,this.variablesReference=r,"number"==typeof n&&(this.namedVariables=n),"number"==typeof s&&(this.indexedVariables=s)}},t.Breakpoint=class{constructor(e,t,r,s){this.verified=e;const n=this;"number"==typeof t&&(n.line=t),"number"==typeof r&&(n.column=r),s&&(n.source=s)}setId(e){this.id=e}},t.Module=class{constructor(e,t){this.id=e,this.name=t}},t.CompletionItem=class{constructor(e,t,r=0){this.label=e,this.start=t,this.length=r}};class a extends n.Event{constructor(e,t,r){super("stopped"),this.body={reason:e},"number"==typeof t&&(this.body.threadId=t),"string"==typeof r&&(this.body.text=r)}}t.StoppedEvent=a;class c extends n.Event{constructor(e,t){super("continued"),this.body={threadId:e},"boolean"==typeof t&&(this.body.allThreadsContinued=t)}}t.ContinuedEvent=c;class u extends n.Event{constructor(){super("initialized")}}t.InitializedEvent=u;class h extends n.Event{constructor(e){super("terminated"),("boolean"==typeof e||e)&&(this.body={restart:e})}}t.TerminatedEvent=h;class l extends n.Event{constructor(e){super("exited"),this.body={exitCode:e}}}t.ExitedEvent=l;class p extends n.Event{constructor(e,t="console",r){super("output"),this.body={category:t,output:e},void 0!==r&&(this.body.data=r)}}t.OutputEvent=p;class d extends n.Event{constructor(e,t){super("thread"),this.body={reason:e,threadId:t}}}t.ThreadEvent=d;class f extends n.Event{constructor(e,t){super("breakpoint"),this.body={reason:e,breakpoint:t}}}t.BreakpointEvent=f;class m extends n.Event{constructor(e,t){super("module"),this.body={reason:e,module:t}}}t.ModuleEvent=m;class g extends n.Event{constructor(e,t){super("loadedSource"),this.body={reason:e,source:t}}}t.LoadedSourceEvent=g;class y extends n.Event{constructor(e){super("capabilities"),this.body={capabilities:e}}}t.CapabilitiesEvent=y;class b extends n.Event{constructor(e,t,r){super("progressStart"),this.body={progressId:e,title:t},"string"==typeof r&&(this.body.message=r)}}t.ProgressStartEvent=b;class v extends n.Event{constructor(e,t){super("progressUpdate"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressUpdateEvent=v;class w extends n.Event{constructor(e,t){super("progressEnd"),this.body={progressId:e},"string"==typeof t&&(this.body.message=t)}}t.ProgressEndEvent=w;class T extends n.Event{constructor(e,t,r){super("invalidated"),this.body={},e&&(this.body.areas=e),t&&(this.body.threadId=t),r&&(this.body.stackFrameId=r)}}t.InvalidatedEvent=T;class C extends n.Event{constructor(e,t,r){super("memory"),this.body={memoryReference:e,offset:t,count:r}}}var E;t.MemoryEvent=C,function(e){e[e.User=1]="User",e[e.Telemetry=2]="Telemetry"}(E=t.ErrorDestination||(t.ErrorDestination={}));class S extends s.ProtocolServer{constructor(e,t){super();const r="boolean"==typeof e&&e;this._debuggerLinesStartAt1=r,this._debuggerColumnsStartAt1=r,this._debuggerPathsAreURIs=!1,this._clientLinesStartAt1=!0,this._clientColumnsStartAt1=!0,this._clientPathsAreURIs=!1,this._isServer="boolean"==typeof t&&t,this.on("close",(()=>{this.shutdown()})),this.on("error",(e=>{this.shutdown()}))}setDebuggerPathFormat(e){this._debuggerPathsAreURIs="path"!==e}setDebuggerLinesStartAt1(e){this._debuggerLinesStartAt1=e}setDebuggerColumnsStartAt1(e){this._debuggerColumnsStartAt1=e}setRunAsServer(e){this._isServer=e}static run(e){(0,i.runDebugAdapter)(e)}shutdown(){this._isServer||this._isRunningInline()||setTimeout((()=>{process.exit(0)}),100)}sendErrorResponse(e,t,r,s,n=E.User){let i;"number"==typeof t?(i={id:t,format:r},s&&(i.variables=s),n&E.User&&(i.showUser=!0),n&E.Telemetry&&(i.sendTelemetry=!0)):i=t,e.success=!1,e.message=S.formatPII(i.format,!0,i.variables),e.body||(e.body={}),e.body.error=i,this.sendResponse(e)}runInTerminalRequest(e,t,r){this.sendRequest("runInTerminal",e,t,r)}dispatchRequest(e){const t=new n.Response(e);try{if("initialize"===e.command){var r=e.arguments;if("boolean"==typeof r.linesStartAt1&&(this._clientLinesStartAt1=r.linesStartAt1),"boolean"==typeof r.columnsStartAt1&&(this._clientColumnsStartAt1=r.columnsStartAt1),"path"!==r.pathFormat)this.sendErrorResponse(t,2018,"debug adapter only supports native paths",null,E.Telemetry);else{const e=t;e.body={},this.initializeRequest(e,r)}}else"launch"===e.command?this.launchRequest(t,e.arguments,e):"attach"===e.command?this.attachRequest(t,e.arguments,e):"disconnect"===e.command?this.disconnectRequest(t,e.arguments,e):"terminate"===e.command?this.terminateRequest(t,e.arguments,e):"restart"===e.command?this.restartRequest(t,e.arguments,e):"setBreakpoints"===e.command?this.setBreakPointsRequest(t,e.arguments,e):"setFunctionBreakpoints"===e.command?this.setFunctionBreakPointsRequest(t,e.arguments,e):"setExceptionBreakpoints"===e.command?this.setExceptionBreakPointsRequest(t,e.arguments,e):"configurationDone"===e.command?this.configurationDoneRequest(t,e.arguments,e):"continue"===e.command?this.continueRequest(t,e.arguments,e):"next"===e.command?this.nextRequest(t,e.arguments,e):"stepIn"===e.command?this.stepInRequest(t,e.arguments,e):"stepOut"===e.command?this.stepOutRequest(t,e.arguments,e):"stepBack"===e.command?this.stepBackRequest(t,e.arguments,e):"reverseContinue"===e.command?this.reverseContinueRequest(t,e.arguments,e):"restartFrame"===e.command?this.restartFrameRequest(t,e.arguments,e):"goto"===e.command?this.gotoRequest(t,e.arguments,e):"pause"===e.command?this.pauseRequest(t,e.arguments,e):"stackTrace"===e.command?this.stackTraceRequest(t,e.arguments,e):"scopes"===e.command?this.scopesRequest(t,e.arguments,e):"variables"===e.command?this.variablesRequest(t,e.arguments,e):"setVariable"===e.command?this.setVariableRequest(t,e.arguments,e):"setExpression"===e.command?this.setExpressionRequest(t,e.arguments,e):"source"===e.command?this.sourceRequest(t,e.arguments,e):"threads"===e.command?this.threadsRequest(t,e):"terminateThreads"===e.command?this.terminateThreadsRequest(t,e.arguments,e):"evaluate"===e.command?this.evaluateRequest(t,e.arguments,e):"stepInTargets"===e.command?this.stepInTargetsRequest(t,e.arguments,e):"gotoTargets"===e.command?this.gotoTargetsRequest(t,e.arguments,e):"completions"===e.command?this.completionsRequest(t,e.arguments,e):"exceptionInfo"===e.command?this.exceptionInfoRequest(t,e.arguments,e):"loadedSources"===e.command?this.loadedSourcesRequest(t,e.arguments,e):"dataBreakpointInfo"===e.command?this.dataBreakpointInfoRequest(t,e.arguments,e):"setDataBreakpoints"===e.command?this.setDataBreakpointsRequest(t,e.arguments,e):"readMemory"===e.command?this.readMemoryRequest(t,e.arguments,e):"writeMemory"===e.command?this.writeMemoryRequest(t,e.arguments,e):"disassemble"===e.command?this.disassembleRequest(t,e.arguments,e):"cancel"===e.command?this.cancelRequest(t,e.arguments,e):"breakpointLocations"===e.command?this.breakpointLocationsRequest(t,e.arguments,e):"setInstructionBreakpoints"===e.command?this.setInstructionBreakpointsRequest(t,e.arguments,e):this.customRequest(e.command,t,e.arguments,e)}catch(e){this.sendErrorResponse(t,1104,"{_stack}",{_exception:e.message,_stack:e.stack},E.Telemetry)}}initializeRequest(e,t){e.body.supportsConditionalBreakpoints=!1,e.body.supportsHitConditionalBreakpoints=!1,e.body.supportsFunctionBreakpoints=!1,e.body.supportsConfigurationDoneRequest=!0,e.body.supportsEvaluateForHovers=!1,e.body.supportsStepBack=!1,e.body.supportsSetVariable=!1,e.body.supportsRestartFrame=!1,e.body.supportsStepInTargetsRequest=!1,e.body.supportsGotoTargetsRequest=!1,e.body.supportsCompletionsRequest=!1,e.body.supportsRestartRequest=!1,e.body.supportsExceptionOptions=!1,e.body.supportsValueFormattingOptions=!1,e.body.supportsExceptionInfoRequest=!1,e.body.supportTerminateDebuggee=!1,e.body.supportsDelayedStackTraceLoading=!1,e.body.supportsLoadedSourcesRequest=!1,e.body.supportsLogPoints=!1,e.body.supportsTerminateThreadsRequest=!1,e.body.supportsSetExpression=!1,e.body.supportsTerminateRequest=!1,e.body.supportsDataBreakpoints=!1,e.body.supportsReadMemoryRequest=!1,e.body.supportsDisassembleRequest=!1,e.body.supportsCancelRequest=!1,e.body.supportsBreakpointLocationsRequest=!1,e.body.supportsClipboardContext=!1,e.body.supportsSteppingGranularity=!1,e.body.supportsInstructionBreakpoints=!1,e.body.supportsExceptionFilterOptions=!1,this.sendResponse(e)}disconnectRequest(e,t,r){this.sendResponse(e),this.shutdown()}launchRequest(e,t,r){this.sendResponse(e)}attachRequest(e,t,r){this.sendResponse(e)}terminateRequest(e,t,r){this.sendResponse(e)}restartRequest(e,t,r){this.sendResponse(e)}setBreakPointsRequest(e,t,r){this.sendResponse(e)}setFunctionBreakPointsRequest(e,t,r){this.sendResponse(e)}setExceptionBreakPointsRequest(e,t,r){this.sendResponse(e)}configurationDoneRequest(e,t,r){this.sendResponse(e)}continueRequest(e,t,r){this.sendResponse(e)}nextRequest(e,t,r){this.sendResponse(e)}stepInRequest(e,t,r){this.sendResponse(e)}stepOutRequest(e,t,r){this.sendResponse(e)}stepBackRequest(e,t,r){this.sendResponse(e)}reverseContinueRequest(e,t,r){this.sendResponse(e)}restartFrameRequest(e,t,r){this.sendResponse(e)}gotoRequest(e,t,r){this.sendResponse(e)}pauseRequest(e,t,r){this.sendResponse(e)}sourceRequest(e,t,r){this.sendResponse(e)}threadsRequest(e,t){this.sendResponse(e)}terminateThreadsRequest(e,t,r){this.sendResponse(e)}stackTraceRequest(e,t,r){this.sendResponse(e)}scopesRequest(e,t,r){this.sendResponse(e)}variablesRequest(e,t,r){this.sendResponse(e)}setVariableRequest(e,t,r){this.sendResponse(e)}setExpressionRequest(e,t,r){this.sendResponse(e)}evaluateRequest(e,t,r){this.sendResponse(e)}stepInTargetsRequest(e,t,r){this.sendResponse(e)}gotoTargetsRequest(e,t,r){this.sendResponse(e)}completionsRequest(e,t,r){this.sendResponse(e)}exceptionInfoRequest(e,t,r){this.sendResponse(e)}loadedSourcesRequest(e,t,r){this.sendResponse(e)}dataBreakpointInfoRequest(e,t,r){this.sendResponse(e)}setDataBreakpointsRequest(e,t,r){this.sendResponse(e)}readMemoryRequest(e,t,r){this.sendResponse(e)}writeMemoryRequest(e,t,r){this.sendResponse(e)}disassembleRequest(e,t,r){this.sendResponse(e)}cancelRequest(e,t,r){this.sendResponse(e)}breakpointLocationsRequest(e,t,r){this.sendResponse(e)}setInstructionBreakpointsRequest(e,t,r){this.sendResponse(e)}customRequest(e,t,r,s){this.sendErrorResponse(t,1014,"unrecognized request",null,E.Telemetry)}convertClientLineToDebugger(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e+1:this._clientLinesStartAt1?e-1:e}convertDebuggerLineToClient(e){return this._debuggerLinesStartAt1?this._clientLinesStartAt1?e:e-1:this._clientLinesStartAt1?e+1:e}convertClientColumnToDebugger(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e+1:this._clientColumnsStartAt1?e-1:e}convertDebuggerColumnToClient(e){return this._debuggerColumnsStartAt1?this._clientColumnsStartAt1?e:e-1:this._clientColumnsStartAt1?e+1:e}convertClientPathToDebugger(e){return this._clientPathsAreURIs!==this._debuggerPathsAreURIs?this._clientPathsAreURIs?S.uri2path(e):S.path2uri(e):e}convertDebuggerPathToClient(e){return this._debuggerPathsAreURIs!==this._clientPathsAreURIs?this._debuggerPathsAreURIs?S.uri2path(e):S.path2uri(e):e}static path2uri(e){"win32"===process.platform&&(/^[A-Z]:/.test(e)&&(e=e[0].toLowerCase()+e.substr(1)),e=e.replace(/\\/g,"/")),e=encodeURI(e);let t=new o.URL("file:");return t.pathname=e,t.toString()}static uri2path(e){let t=new o.URL(e),r=decodeURIComponent(t.pathname);return"win32"===process.platform&&(/^\/[a-zA-Z]:/.test(r)&&(r=r[1].toLowerCase()+r.substr(2)),r=r.replace(/\//g,"\\")),r}static formatPII(e,t,r){return e.replace(S._formatPIIRegexp,(function(e,s){return t&&s.length>0&&"_"!==s[0]?e:r[s]&&r.hasOwnProperty(s)?r[s]:e}))}}t.DebugSession=S,S._formatPIIRegexp=/{([^}]+)}/g},527:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handles=void 0,t.Handles=class{constructor(e){this.START_HANDLE=1e3,this._handleMap=new Map,this._nextHandle="number"==typeof e?e:this.START_HANDLE}reset(){this._nextHandle=this.START_HANDLE,this._handleMap=new Map}create(e){var t=this._nextHandle++;return this._handleMap.set(t,e),t}get(e,t){return this._handleMap.get(e)||t}}},7309:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalLogger=void 0;const n=r(7147),i=r(1017),o=r(1890),a=r(4100);function c(){let e=new Date;return u(2,String(e.getUTCHours()))+":"+u(2,String(e.getUTCMinutes()))+":"+u(2,String(e.getUTCSeconds()))+"."+u(3,String(e.getUTCMilliseconds()))+" UTC"}function u(e,t){return t.length>=e?t:String("0".repeat(e)+t).slice(-e)}t.InternalLogger=class{constructor(e,t){this.beforeExitCallback=()=>this.dispose(),this._logCallback=e,this._logToConsole=t,this._minLogLevel=a.LogLevel.Warn,this.disposeCallback=(e,t)=>{this.dispose(),t=t||2,t+=128,process.exit(t)}}setup(e){return s(this,void 0,void 0,(function*(){if(this._minLogLevel=e.consoleMinLogLevel,this._prependTimestamp=e.prependTimestamp,e.logFilePath)if(i.isAbsolute(e.logFilePath)){const t=t=>this.sendLog(`Error creating log file at path: ${e.logFilePath}. Error: ${t.toString()}\n`,a.LogLevel.Error);try{yield o(i.dirname(e.logFilePath)),this.log("Verbose logs are written to:\n",a.LogLevel.Warn),this.log(e.logFilePath+"\n",a.LogLevel.Warn),this._logFileStream=n.createWriteStream(e.logFilePath),this.logDateTime(),this.setupShutdownListeners(),this._logFileStream.on("error",(e=>{t(e)}))}catch(e){t(e)}}else this.log(`logFilePath must be an absolute path: ${e.logFilePath}`,a.LogLevel.Error)}))}logDateTime(){let e=new Date;const t=e.getUTCFullYear()+"-"+`${e.getUTCMonth()+1}-`+e.getUTCDate()+", "+c();this.log(t+"\n",a.LogLevel.Verbose,!1)}setupShutdownListeners(){process.addListener("beforeExit",this.beforeExitCallback),process.addListener("SIGTERM",this.disposeCallback),process.addListener("SIGINT",this.disposeCallback)}removeShutdownListeners(){process.removeListener("beforeExit",this.beforeExitCallback),process.removeListener("SIGTERM",this.disposeCallback),process.removeListener("SIGINT",this.disposeCallback)}dispose(){return new Promise((e=>{this.removeShutdownListeners(),this._logFileStream?(this._logFileStream.end(e),this._logFileStream=null):e()}))}log(e,t,r=!0){if(this._minLogLevel!==a.LogLevel.Stop){if(t>=this._minLogLevel&&this.sendLog(e,t),this._logToConsole){const r=t===a.LogLevel.Error?console.error:t===a.LogLevel.Warn?console.warn:null;r&&r((0,a.trimLastNewline)(e))}t===a.LogLevel.Error&&(e=`[${a.LogLevel[t]}] ${e}`),this._prependTimestamp&&r&&(e="["+c()+"] "+e),this._logFileStream&&this._logFileStream.write(e)}}sendLog(e,t){if(e.length>1500){const t=!!e.match(/(\n|\r\n)$/);e=e.substr(0,1500)+"[...]",t&&(e+="\n")}if(this._logCallback){const r=new a.LogOutputEvent(e,t);this._logCallback(r)}}}},4100:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trimLastNewline=t.LogOutputEvent=t.logger=t.Logger=t.LogLevel=void 0;const s=r(7309),n=r(4651);var i;!function(e){e[e.Verbose=0]="Verbose",e[e.Log=1]="Log",e[e.Warn=2]="Warn",e[e.Error=3]="Error",e[e.Stop=4]="Stop"}(i=t.LogLevel||(t.LogLevel={}));class o{constructor(){this._pendingLogQ=[]}log(e,t=i.Log){e+="\n",this._write(e,t)}verbose(e){this.log(e,i.Verbose)}warn(e){this.log(e,i.Warn)}error(e){this.log(e,i.Error)}dispose(){if(this._currentLogger){const e=this._currentLogger.dispose();return this._currentLogger=null,e}return Promise.resolve()}_write(e,t=i.Log){e+="",this._pendingLogQ?this._pendingLogQ.push({msg:e,level:t}):this._currentLogger&&this._currentLogger.log(e,t)}setup(e,t,r=!0){const s="string"==typeof t?t:t&&this._logFilePathFromInit;if(this._currentLogger){const t={consoleMinLogLevel:e,logFilePath:s,prependTimestamp:r};this._currentLogger.setup(t).then((()=>{if(this._pendingLogQ){const e=this._pendingLogQ;this._pendingLogQ=null,e.forEach((e=>this._write(e.msg,e.level)))}}))}}init(e,t,r){this._pendingLogQ=this._pendingLogQ||[],this._currentLogger=new s.InternalLogger(e,r),this._logFilePathFromInit=t}}t.Logger=o,t.logger=new o;class a extends n.OutputEvent{constructor(e,t){super(e,t===i.Error?"stderr":t===i.Warn?"console":"stdout")}}t.LogOutputEvent=a,t.trimLastNewline=function(e){return e.replace(/(\n|\r\n)$/,"")}},1212:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDebugSession=void 0;const s=r(4100),n=s.logger,i=r(4651);class o extends i.DebugSession{constructor(e,t,r){super(t,r),this.obsolete_logFilePath=e,this.on("error",(e=>{n.error(e.body)}))}start(e,t){super.start(e,t),n.init((e=>this.sendEvent(e)),this.obsolete_logFilePath,this._isServer)}sendEvent(e){if(!(e instanceof s.LogOutputEvent)){let t=e;e instanceof i.OutputEvent&&e.body&&e.body.data&&e.body.data.doNotLogOutput&&(delete e.body.data.doNotLogOutput,t=Object.assign({},e),t.body=Object.assign(Object.assign({},e.body),{output:"<output not logged>"})),n.verbose(`To client: ${JSON.stringify(t)}`)}super.sendEvent(e)}sendRequest(e,t,r,s){n.verbose(`To client: ${JSON.stringify(e)}(${JSON.stringify(t)}), timeout: ${r}`),super.sendRequest(e,t,r,s)}sendResponse(e){n.verbose(`To client: ${JSON.stringify(e)}`),super.sendResponse(e)}dispatchRequest(e){n.verbose(`From client: ${e.command}(${JSON.stringify(e.arguments)})`),super.dispatchRequest(e)}}t.LoggingDebugSession=o},9955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handles=t.Response=t.Event=t.ErrorDestination=t.CompletionItem=t.Module=t.Source=t.Breakpoint=t.Variable=t.Scope=t.StackFrame=t.Thread=t.MemoryEvent=t.InvalidatedEvent=t.ProgressEndEvent=t.ProgressUpdateEvent=t.ProgressStartEvent=t.CapabilitiesEvent=t.LoadedSourceEvent=t.ModuleEvent=t.BreakpointEvent=t.ThreadEvent=t.OutputEvent=t.ContinuedEvent=t.StoppedEvent=t.ExitedEvent=t.TerminatedEvent=t.InitializedEvent=t.logger=t.Logger=t.LoggingDebugSession=t.DebugSession=void 0;const s=r(4651);Object.defineProperty(t,"DebugSession",{enumerable:!0,get:function(){return s.DebugSession}}),Object.defineProperty(t,"InitializedEvent",{enumerable:!0,get:function(){return s.InitializedEvent}}),Object.defineProperty(t,"TerminatedEvent",{enumerable:!0,get:function(){return s.TerminatedEvent}}),Object.defineProperty(t,"ExitedEvent",{enumerable:!0,get:function(){return s.ExitedEvent}}),Object.defineProperty(t,"StoppedEvent",{enumerable:!0,get:function(){return s.StoppedEvent}}),Object.defineProperty(t,"ContinuedEvent",{enumerable:!0,get:function(){return s.ContinuedEvent}}),Object.defineProperty(t,"OutputEvent",{enumerable:!0,get:function(){return s.OutputEvent}}),Object.defineProperty(t,"ThreadEvent",{enumerable:!0,get:function(){return s.ThreadEvent}}),Object.defineProperty(t,"BreakpointEvent",{enumerable:!0,get:function(){return s.BreakpointEvent}}),Object.defineProperty(t,"ModuleEvent",{enumerable:!0,get:function(){return s.ModuleEvent}}),Object.defineProperty(t,"LoadedSourceEvent",{enumerable:!0,get:function(){return s.LoadedSourceEvent}}),Object.defineProperty(t,"CapabilitiesEvent",{enumerable:!0,get:function(){return s.CapabilitiesEvent}}),Object.defineProperty(t,"ProgressStartEvent",{enumerable:!0,get:function(){return s.ProgressStartEvent}}),Object.defineProperty(t,"ProgressUpdateEvent",{enumerable:!0,get:function(){return s.ProgressUpdateEvent}}),Object.defineProperty(t,"ProgressEndEvent",{enumerable:!0,get:function(){return s.ProgressEndEvent}}),Object.defineProperty(t,"InvalidatedEvent",{enumerable:!0,get:function(){return s.InvalidatedEvent}}),Object.defineProperty(t,"MemoryEvent",{enumerable:!0,get:function(){return s.MemoryEvent}}),Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return s.Thread}}),Object.defineProperty(t,"StackFrame",{enumerable:!0,get:function(){return s.StackFrame}}),Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"Variable",{enumerable:!0,get:function(){return s.Variable}}),Object.defineProperty(t,"Breakpoint",{enumerable:!0,get:function(){return s.Breakpoint}}),Object.defineProperty(t,"Source",{enumerable:!0,get:function(){return s.Source}}),Object.defineProperty(t,"Module",{enumerable:!0,get:function(){return s.Module}}),Object.defineProperty(t,"CompletionItem",{enumerable:!0,get:function(){return s.CompletionItem}}),Object.defineProperty(t,"ErrorDestination",{enumerable:!0,get:function(){return s.ErrorDestination}});const n=r(1212);Object.defineProperty(t,"LoggingDebugSession",{enumerable:!0,get:function(){return n.LoggingDebugSession}});const i=r(4100);t.Logger=i;const o=r(601);Object.defineProperty(t,"Event",{enumerable:!0,get:function(){return o.Event}}),Object.defineProperty(t,"Response",{enumerable:!0,get:function(){return o.Response}});const a=r(527);Object.defineProperty(t,"Handles",{enumerable:!0,get:function(){return a.Handles}});const c=i.logger;t.logger=c},601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Event=t.Response=t.Message=void 0;class r{constructor(e){this.seq=0,this.type=e}}t.Message=r,t.Response=class extends r{constructor(e,t){super("response"),this.request_seq=e.seq,this.command=e.command,t?(this.success=!1,this.message=t):this.success=!0}},t.Event=class extends r{constructor(e,t){super("event"),this.event=e,t&&(this.body=t)}}},1839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProtocolServer=void 0;const s=r(2361),n=r(601);class i{get event(){return this._event||(this._event=(e,t)=>{let r;return this._listener=e,this._this=t,r={dispose:()=>{this._listener=void 0,this._this=void 0}},r}),this._event}fire(e){if(this._listener)try{this._listener.call(this._this,e)}catch(e){}}hasListener(){return!!this._listener}dispose(){this._listener=void 0,this._this=void 0}}class o extends s.EventEmitter{constructor(){super(),this._sendMessage=new i,this._pendingRequests=new Map,this.onDidSendMessage=this._sendMessage.event}dispose(){}handleMessage(e){if("request"===e.type)this.dispatchRequest(e);else if("response"===e.type){const t=e,r=this._pendingRequests.get(t.request_seq);r&&(this._pendingRequests.delete(t.request_seq),r(t))}}_isRunningInline(){return this._sendMessage&&this._sendMessage.hasListener()}start(e,t){this._sequence=1,this._writableStream=t,this._rawData=Buffer.alloc(0),e.on("data",(e=>this._handleData(e))),e.on("close",(()=>{this._emitEvent(new n.Event("close"))})),e.on("error",(e=>{this._emitEvent(new n.Event("error","inStream error: "+(e&&e.message)))})),t.on("error",(e=>{this._emitEvent(new n.Event("error","outStream error: "+(e&&e.message)))})),e.resume()}stop(){this._writableStream&&this._writableStream.end()}sendEvent(e){this._send("event",e)}sendResponse(e){e.seq>0?console.error(`attempt to send more than one response for command ${e.command}`):this._send("response",e)}sendRequest(e,t,r,s){const i={command:e};if(t&&Object.keys(t).length>0&&(i.arguments=t),this._send("request",i),s){this._pendingRequests.set(i.seq,s);const e=setTimeout((()=>{clearTimeout(e);const t=this._pendingRequests.get(i.seq);t&&(this._pendingRequests.delete(i.seq),t(new n.Response(i,"timeout")))}),r)}}dispatchRequest(e){}_emitEvent(e){this.emit(e.event,e)}_send(e,t){if(t.type=e,t.seq=this._sequence++,this._writableStream){const e=JSON.stringify(t);this._writableStream.write(`Content-Length: ${Buffer.byteLength(e,"utf8")}\r\n\r\n${e}`,"utf8")}this._sendMessage.fire(t)}_handleData(e){for(this._rawData=Buffer.concat([this._rawData,e]);;){if(this._contentLength>=0){if(this._rawData.length>=this._contentLength){const e=this._rawData.toString("utf8",0,this._contentLength);if(this._rawData=this._rawData.slice(this._contentLength),this._contentLength=-1,e.length>0)try{let t=JSON.parse(e);this.handleMessage(t)}catch(e){this._emitEvent(new n.Event("error","Error handling data: "+(e&&e.message)))}continue}}else{const e=this._rawData.indexOf(o.TWO_CRLF);if(-1!==e){const t=this._rawData.toString("utf8",0,e).split("\r\n");for(let e=0;e<t.length;e++){const r=t[e].split(/: +/);"Content-Length"==r[0]&&(this._contentLength=+r[1])}this._rawData=this._rawData.slice(e+o.TWO_CRLF.length);continue}}break}}}t.ProtocolServer=o,o.TWO_CRLF="\r\n\r\n"},8153:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.runDebugAdapter=void 0;const s=r(1808);t.runDebugAdapter=function(e){let t=0;if(process.argv.slice(2).forEach((function(e,r,s){const n=/^--server=(\d{4,5})$/.exec(e);n&&(t=parseInt(n[1],10))})),t>0)console.error(`waiting for debug protocol on port ${t}`),s.createServer((t=>{console.error(">> accepted connection from client"),t.on("end",(()=>{console.error(">> client connection closed\n")}));const r=new e(!1,!0);r.setRunAsServer(!0),r.start(t,t)})).listen(t);else{const t=new e(!1);process.on("SIGTERM",(()=>{t.shutdown()})),t.start(process.stdin,process.stdout)}}},291:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0,r(8806);var s=r(5943),n={},i="___parser_",o={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},a={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},c={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1},u=function(){function e(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="be",this.constructorFn=null,this.alias=null}return e.start=function(){return new e},e.prototype.primitiveGenerateN=function(e,t){var r=a[e],s=c[e];t.pushCode(t.generateVariable(this.varName)+" = dataView.get"+r+"(offset, "+s+");"),t.pushCode("offset += "+o[e]+";")},e.prototype.primitiveN=function(e,t,r){return this.setNextParser(e,t,r)},e.prototype.useThisEndian=function(e){return e+this.endian.toLowerCase()},e.prototype.uint8=function(e,t){return this.primitiveN("uint8",e,t)},e.prototype.uint16=function(e,t){return this.primitiveN(this.useThisEndian("uint16"),e,t)},e.prototype.uint16le=function(e,t){return this.primitiveN("uint16le",e,t)},e.prototype.uint16be=function(e,t){return this.primitiveN("uint16be",e,t)},e.prototype.uint32=function(e,t){return this.primitiveN(this.useThisEndian("uint32"),e,t)},e.prototype.uint32le=function(e,t){return this.primitiveN("uint32le",e,t)},e.prototype.uint32be=function(e,t){return this.primitiveN("uint32be",e,t)},e.prototype.int8=function(e,t){return this.primitiveN("int8",e,t)},e.prototype.int16=function(e,t){return this.primitiveN(this.useThisEndian("int16"),e,t)},e.prototype.int16le=function(e,t){return this.primitiveN("int16le",e,t)},e.prototype.int16be=function(e,t){return this.primitiveN("int16be",e,t)},e.prototype.int32=function(e,t){return this.primitiveN(this.useThisEndian("int32"),e,t)},e.prototype.int32le=function(e,t){return this.primitiveN("int32le",e,t)},e.prototype.int32be=function(e,t){return this.primitiveN("int32be",e,t)},e.prototype.bigIntVersionCheck=function(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported in this runtime")},e.prototype.int64=function(e,t){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,t)},e.prototype.int64be=function(e,t){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,t)},e.prototype.int64le=function(e,t){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,t)},e.prototype.uint64=function(e,t){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,t)},e.prototype.uint64be=function(e,t){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,t)},e.prototype.uint64le=function(e,t){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,t)},e.prototype.floatle=function(e,t){return this.primitiveN("floatle",e,t)},e.prototype.floatbe=function(e,t){return this.primitiveN("floatbe",e,t)},e.prototype.doublele=function(e,t){return this.primitiveN("doublele",e,t)},e.prototype.doublebe=function(e,t){return this.primitiveN("doublebe",e,t)},e.prototype.bitN=function(e,t,r){return r||(r={}),r.length=e,this.setNextParser("bit",t,r)},e.prototype.bit1=function(e,t){return this.bitN(1,e,t)},e.prototype.bit2=function(e,t){return this.bitN(2,e,t)},e.prototype.bit3=function(e,t){return this.bitN(3,e,t)},e.prototype.bit4=function(e,t){return this.bitN(4,e,t)},e.prototype.bit5=function(e,t){return this.bitN(5,e,t)},e.prototype.bit6=function(e,t){return this.bitN(6,e,t)},e.prototype.bit7=function(e,t){return this.bitN(7,e,t)},e.prototype.bit8=function(e,t){return this.bitN(8,e,t)},e.prototype.bit9=function(e,t){return this.bitN(9,e,t)},e.prototype.bit10=function(e,t){return this.bitN(10,e,t)},e.prototype.bit11=function(e,t){return this.bitN(11,e,t)},e.prototype.bit12=function(e,t){return this.bitN(12,e,t)},e.prototype.bit13=function(e,t){return this.bitN(13,e,t)},e.prototype.bit14=function(e,t){return this.bitN(14,e,t)},e.prototype.bit15=function(e,t){return this.bitN(15,e,t)},e.prototype.bit16=function(e,t){return this.bitN(16,e,t)},e.prototype.bit17=function(e,t){return this.bitN(17,e,t)},e.prototype.bit18=function(e,t){return this.bitN(18,e,t)},e.prototype.bit19=function(e,t){return this.bitN(19,e,t)},e.prototype.bit20=function(e,t){return this.bitN(20,e,t)},e.prototype.bit21=function(e,t){return this.bitN(21,e,t)},e.prototype.bit22=function(e,t){return this.bitN(22,e,t)},e.prototype.bit23=function(e,t){return this.bitN(23,e,t)},e.prototype.bit24=function(e,t){return this.bitN(24,e,t)},e.prototype.bit25=function(e,t){return this.bitN(25,e,t)},e.prototype.bit26=function(e,t){return this.bitN(26,e,t)},e.prototype.bit27=function(e,t){return this.bitN(27,e,t)},e.prototype.bit28=function(e,t){return this.bitN(28,e,t)},e.prototype.bit29=function(e,t){return this.bitN(29,e,t)},e.prototype.bit30=function(e,t){return this.bitN(30,e,t)},e.prototype.bit31=function(e,t){return this.bitN(31,e,t)},e.prototype.bit32=function(e,t){return this.bitN(32,e,t)},e.prototype.namely=function(e){return n[e]=this,this.alias=e,this},e.prototype.skip=function(e,t){return this.seek(e,t)},e.prototype.seek=function(e,t){if(t&&t.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})},e.prototype.string=function(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)},e.prototype.buffer=function(e,t){if(!t.length&&!t.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",e,t)},e.prototype.wrapped=function(e,t){if(!t.length&&!t.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");if(!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined in wrapper parser");return this.setNextParser("wrapper",e,t)},e.prototype.array=function(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("Length option of array is not defined.");if(!t.type)throw new Error("Type option of array is not defined.");if("string"==typeof t.type&&!n[t.type]&&Object.keys(o).indexOf(t.type)<0)throw new Error('Specified primitive type "'+t.type+'" is not supported.');return this.setNextParser("array",e,t)},e.prototype.choice=function(e,t){if("object"!=typeof t&&"object"==typeof e&&(t=e,e=null),!t.tag)throw new Error("Tag option of array is not defined.");if(!t.choices)throw new Error("Choices option of array is not defined.");return Object.keys(t.choices).forEach((function(r){var s=parseInt(r,10),i=t.choices[s];if(isNaN(s))throw new Error("Key of choices must be a number.");if(!i)throw new Error("Choice Case "+r+" of "+e+" is not valid.");if("string"==typeof i&&!n[i]&&Object.keys(o).indexOf(i)<0)throw new Error('Specified primitive type "'+i+'" is not supported.')})),this.setNextParser("choice",e,t)},e.prototype.nest=function(t,r){if("object"!=typeof r&&"object"==typeof t&&(r=t,t=null),!r.type)throw new Error("Type option of nest is not defined.");if(!(r.type instanceof e||n[r.type]))throw new Error("Type option of nest must be a Parser object.");if(!(r.type instanceof e||t))throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",t,r)},e.prototype.pointer=function(t,r){if(!r.offset)throw new Error("Offset option of pointer is not defined.");if(!r.type)throw new Error("Type option of pointer is not defined.");if("string"==typeof r.type){if(Object.keys(o).indexOf(r.type)<0&&!n[r.type])throw new Error('Specified type "'+r.type+'" is not supported.')}else if(!(r.type instanceof e))throw new Error("Type option of pointer must be a string or a Parser object.");return this.setNextParser("pointer",t,r)},e.prototype.saveOffset=function(e,t){return this.setNextParser("saveOffset",e,t)},e.prototype.endianess=function(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: "+e)}return this},e.prototype.create=function(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this},e.prototype.getContext=function(e){var t=new s.Context(e);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode("return "+(i+this.alias)+"(0).result;")):this.addRawCode(t),t},e.prototype.getCode=function(){return this.getContext().code},e.prototype.addRawCode=function(e){e.pushCode("var offset = 0;"),e.pushCode("var vars = "+(this.constructorFn?"new constructorFn()":"{}")+";"),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")},e.prototype.addAliasedCode=function(e){return e.pushCode("function "+(i+this.alias)+"(offset, context) {"),e.pushCode("var vars = "+(this.constructorFn?"new constructorFn()":"{}")+";"),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e},e.prototype.resolveReferences=function(e){var t=e.getUnresolvedReferences();e.markRequested(t),t.forEach((function(t){n[t].addAliasedCode(e)}))},e.prototype.compile=function(){var e="imports",t=this.getContext(e);this.compiled=new Function(e,"TextDecoder","return function (buffer, constructorFn) { "+t.code+" };")(t.imports,TextDecoder)},e.prototype.sizeOf=function(){var t=NaN;if(Object.keys(o).indexOf(this.type)>=0)t=o[this.type];else if("string"===this.type&&"number"==typeof this.options.length)t=this.options.length;else if("buffer"===this.type&&"number"==typeof this.options.length)t=this.options.length;else if("array"===this.type&&"number"==typeof this.options.length){var r=NaN;"string"==typeof this.options.type?r=o[this.options.type]:this.options.type instanceof e&&(r=this.options.type.sizeOf()),t=this.options.length*r}else"seek"===this.type?t=this.options.length:"nest"===this.type?t=this.options.type.sizeOf():this.type||(t=0);return this.next&&(t+=this.next.sizeOf()),t},e.prototype.parse=function(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)},e.prototype.setNextParser=function(t,r,s){var n=new e;return n.type=t,n.varName=r,n.options=s||n.options,n.endian=this.endian,this.head?this.head.next=n:this.next=n,this.head=n,this},e.prototype.generate=function(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e)}this.generateAssert(e)}var t=e.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)},e.prototype.generateAssert=function(e){if(this.options.assert){var t=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":var r=e.addImport(this.options.assert);e.pushCode("if (!"+r+".call(vars, "+t+")) {");break;case"number":e.pushCode("if ("+this.options.assert+" !== "+t+") {");break;case"string":e.pushCode('if ("'+this.options.assert+'" !== '+t+") {");break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}e.generateError('"Assert error: '+t+' is " + '+this.options.assert),e.pushCode("}")}},e.prototype.generateNext=function(e){return this.next&&(e=this.next.generate(e)),e},e.prototype.generateBit=function(e){var t=JSON.parse(JSON.stringify(this));if(t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){var r=0;e.bitFields.forEach((function(e){return r+=e.options.length}));var s=e.generateTmpVariable();if(r<=8)e.pushCode("var "+s+" = dataView.getUint8(offset);"),r=8;else if(r<=16)e.pushCode("var "+s+" = dataView.getUint16(offset);"),r=16;else if(r<=24){var n=e.generateTmpVariable(),i=e.generateTmpVariable();e.pushCode("var "+n+" = dataView.getUint16(offset);"),e.pushCode("var "+i+" = dataView.getUint8(offset + 2);"),e.pushCode("var "+s+" = ("+n+" << 8) | "+i+";"),r=24}else{if(!(r<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");e.pushCode("var "+s+" = dataView.getUint32(offset);"),r=32}e.pushCode("offset += "+r/8+";");var o=0,a="be"===this.endian;e.bitFields.forEach((function(t){var n=t.options.length,i=a?r-o-n:o,c=(1<<n)-1;e.pushCode(t.varName+" = "+s+" >> "+i+" & "+c+";"),o+=n})),e.bitFields=[]}},e.prototype.generateSeek=function(e){var t=e.generateOption(this.options.length);e.pushCode("offset += "+t+";")},e.prototype.generateString=function(e){var t=e.generateVariable(this.varName),r=e.generateTmpVariable(),s=this.options.encoding,n="hex"===s.toLowerCase(),i='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){var o=this.options.length;e.pushCode("var "+r+" = offset;"),e.pushCode("while(dataView.getUint8(offset++) !== 0 && offset - "+r+" < "+o+");");var a="offset - "+r+" < "+o+" ? offset - 1 : offset";e.pushCode(n?t+" = Array.from(buffer.subarray("+r+", "+a+"), "+i+").join('');":t+" = new TextDecoder('"+s+"').decode(buffer.subarray("+r+", "+a+"));")}else this.options.length?(o=e.generateOption(this.options.length),e.pushCode(n?t+" = Array.from(buffer.subarray(offset, offset + "+o+"), "+i+").join('');":t+" = new TextDecoder('"+s+"').decode(buffer.subarray(offset, offset + "+o+"));"),e.pushCode("offset += "+o+";")):this.options.zeroTerminated?(e.pushCode("var "+r+" = offset;"),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(n?t+" = Array.from(buffer.subarray("+r+", offset - 1), "+i+").join('');":t+" = new TextDecoder('"+s+"').decode(buffer.subarray("+r+", offset - 1));")):this.options.greedy&&(e.pushCode("var "+r+" = offset;"),e.pushCode("while(buffer.length > offset++);"),e.pushCode(n?t+" = Array.from(buffer.subarray("+r+", offset), "+i+").join('');":t+" = new TextDecoder('"+s+"').decode(buffer.subarray("+r+", offset));"));this.options.stripNull&&e.pushCode(t+" = "+t+".replace(/\\x00+$/g, '')")},e.prototype.generateBuffer=function(e){var t=e.generateVariable(this.varName);if("function"==typeof this.options.readUntil){var r=this.options.readUntil,s=e.generateTmpVariable(),n=e.generateTmpVariable();e.pushCode("var "+s+" = offset;"),e.pushCode("var "+n+" = 0;"),e.pushCode("while (offset < buffer.length) {"),e.pushCode(n+" = dataView.getUint8(offset);");var i=e.addImport(r);e.pushCode("if ("+i+".call("+e.generateVariable()+", "+n+", buffer.subarray(offset))) break;"),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(t+" = buffer.subarray("+s+", offset);")}else if("eof"===this.options.readUntil)e.pushCode(t+" = buffer.subarray(offset);");else{var o=e.generateOption(this.options.length);e.pushCode(t+" = buffer.subarray(offset, offset + "+o+");"),e.pushCode("offset += "+o+";")}this.options.clone&&e.pushCode(t+" = buffer.constructor.from("+t+");")},e.prototype.generateArray=function(t){var r=t.generateOption(this.options.length),s=t.generateOption(this.options.lengthInBytes),u=this.options.type,h=t.generateTmpVariable(),l=t.generateVariable(this.varName),p=t.generateTmpVariable(),d=this.options.key,f="string"==typeof d;if(f?t.pushCode(l+" = {};"):t.pushCode(l+" = [];"),"function"==typeof this.options.readUntil?t.pushCode("do {"):"eof"===this.options.readUntil?t.pushCode("for (var "+h+" = 0; offset < buffer.length; "+h+"++) {"):void 0!==s?t.pushCode("for (var "+h+" = offset + "+s+"; offset < "+h+"; ) {"):t.pushCode("for (var "+h+" = "+r+"; "+h+" > 0; "+h+"--) {"),"string"==typeof u)if(n[u]){var m=t.generateVariable(),g=t.generateTmpVariable();t.pushCode("var "+g+" = "+(i+u)+"(offset, {"),t.pushCode("$parent: "+m+","),t.pushCode("$root: "+m+".$root,"),this.options.readUntil||void 0!==s||t.pushCode("$index: "+r+" - "+h+","),t.pushCode("});"),t.pushCode("var "+p+" = "+g+".result; offset = "+g+".offset;"),u!==this.alias&&t.addReference(u)}else{var y=a[u],b=c[u];t.pushCode("var "+p+" = dataView.get"+y+"(offset, "+b+");"),t.pushCode("offset += "+o[u]+";")}else u instanceof e&&(m=t.generateVariable(),t.pushCode("var "+p+" = {};"),t.pushScope(p),t.pushCode(p+".$parent = "+m+";"),t.pushCode(p+".$root = "+m+".$root;"),this.options.readUntil||void 0!==s||t.pushCode(p+".$index = "+r+" - "+h+";"),u.generate(t),t.pushCode("delete "+p+".$parent;"),t.pushCode("delete "+p+".$root;"),t.pushCode("delete "+p+".$index;"),t.popScope());if(f?t.pushCode(l+"["+p+"."+d+"] = "+p+";"):t.pushCode(l+".push("+p+");"),t.pushCode("}"),"function"==typeof this.options.readUntil){var v=this.options.readUntil,w=t.addImport(v);t.pushCode("while (!"+w+".call("+t.generateVariable()+", "+p+", buffer.subarray(offset)));")}},e.prototype.generateChoiceCase=function(t,r,s){if("string"==typeof s){var u=t.generateVariable(this.varName);if(n[s]){var h=t.generateTmpVariable();t.pushCode("var "+h+" = "+(i+s)+"(offset, {"),t.pushCode("$parent: "+u+".$parent,"),t.pushCode("$root: "+u+".$root,"),t.pushCode("});"),t.pushCode(u+" = "+h+".result; offset = "+h+".offset;"),s!==this.alias&&t.addReference(s)}else{var l=a[s],p=c[s];t.pushCode(u+" = dataView.get"+l+"(offset, "+p+");"),t.pushCode("offset += "+o[s])}}else s instanceof e&&(t.pushPath(r),s.generate(t),t.popPath(r))},e.prototype.generateChoice=function(e){var t=this,r=e.generateOption(this.options.tag),s=e.generateVariable(this.varName);if(this.varName){e.pushCode(s+" = {};");var n=e.generateVariable();e.pushCode(s+".$parent = "+n+";"),e.pushCode(s+".$root = "+n+".$root;")}e.pushCode("switch("+r+") {"),Object.keys(this.options.choices).forEach((function(r){var s=t.options.choices[parseInt(r,10)];e.pushCode("case "+r+":"),t.generateChoiceCase(e,t.varName,s),e.pushCode("break;")})),e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError('"Met undefined tag value " + '+r+' + " at choice"'),e.pushCode("}"),this.varName&&(e.pushCode("delete "+s+".$parent;"),e.pushCode("delete "+s+".$root;"))},e.prototype.generateNest=function(t){var r=t.generateVariable(this.varName);if(this.options.type instanceof e){if(this.varName){var s=t.generateVariable();t.pushCode(r+" = {};"),t.pushCode(r+".$parent = "+s+";"),t.pushCode(r+".$root = "+s+".$root;")}t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),this.varName&&(t.pushCode("delete "+r+".$parent;"),t.pushCode("delete "+r+".$root;"))}else if(n[this.options.type]){s=t.generateVariable();var o=t.generateTmpVariable();t.pushCode("var "+o+" = "+(i+this.options.type)+"(offset, {"),t.pushCode("$parent: "+s+","),t.pushCode("$root: "+s+".$root,"),t.pushCode("});"),t.pushCode(r+" = "+o+".result; offset = "+o+".offset;"),this.options.type!==this.alias&&t.addReference(this.options.type)}},e.prototype.generateWrapper=function(t){var r=t.generateVariable(this.varName),s=t.generateTmpVariable();if("function"==typeof this.options.readUntil){var o=this.options.readUntil,a=t.generateTmpVariable(),c=t.generateTmpVariable();t.pushCode("var "+a+" = offset;"),t.pushCode("var "+c+" = 0;"),t.pushCode("while (offset < buffer.length) {"),t.pushCode(c+" = dataView.getUint8(offset);");var u=t.addImport(o);t.pushCode("if ("+u+".call("+t.generateVariable()+", "+c+", buffer.subarray(offset))) break;"),t.pushCode("offset += 1;"),t.pushCode("}"),t.pushCode(s+" = buffer.subarray("+a+", offset);")}else if("eof"===this.options.readUntil)t.pushCode(s+" = buffer.subarray(offset);");else{var h=t.generateOption(this.options.length);t.pushCode(s+" = buffer.subarray(offset, offset + "+h+");"),t.pushCode("offset += "+h+";")}this.options.clone&&t.pushCode(s+" = buffer.constructor.from("+s+");");var l=t.generateTmpVariable(),p=t.generateTmpVariable(),d=t.generateTmpVariable(),f=t.addImport(this.options.wrapper);if(t.pushCode(s+" = "+f+".call(this, "+s+").subarray(0);"),t.pushCode("var "+l+" = buffer;"),t.pushCode("var "+p+" = offset;"),t.pushCode("var "+d+" = dataView;"),t.pushCode("buffer = "+s+";"),t.pushCode("offset = 0;"),t.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof e)this.varName&&t.pushCode(r+" = {};"),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName);else if(n[this.options.type]){var m=t.generateTmpVariable();t.pushCode("var "+m+" = "+(i+this.options.type)+"(0);"),t.pushCode(r+" = "+m+".result;"),this.options.type!==this.alias&&t.addReference(this.options.type)}t.pushCode("buffer = "+l+";"),t.pushCode("dataView = "+d+";"),t.pushCode("offset = "+p+";")},e.prototype.generateFormatter=function(e,t,r){if("function"==typeof r){var s=e.addImport(r);e.pushCode(t+" = "+s+".call("+e.generateVariable()+", "+t+");")}},e.prototype.generatePointer=function(t){var r=this.options.type,s=t.generateOption(this.options.offset),u=t.generateTmpVariable(),h=t.generateVariable(this.varName);if(t.pushCode("var "+u+" = offset;"),t.pushCode("offset = "+s+";"),this.options.type instanceof e){var l=t.generateVariable();t.pushCode(h+" = {};"),t.pushCode(h+".$parent = "+l+";"),t.pushCode(h+".$root = "+l+".$root;"),t.pushPath(this.varName),this.options.type.generate(t),t.popPath(this.varName),t.pushCode("delete "+h+".$parent;"),t.pushCode("delete "+h+".$root;")}else if(n[this.options.type]){l=t.generateVariable();var p=t.generateTmpVariable();t.pushCode("var "+p+" = "+(i+this.options.type)+"(offset, {"),t.pushCode("$parent: "+l+","),t.pushCode("$root: "+l+".$root,"),t.pushCode("});"),t.pushCode(h+" = "+p+".result; offset = "+p+".offset;"),this.options.type!==this.alias&&t.addReference(this.options.type)}else if(Object.keys(o).indexOf(this.options.type)>=0){var d=a[r],f=c[r];t.pushCode(h+" = dataView.get"+d+"(offset, "+f+");"),t.pushCode("offset += "+o[r]+";")}t.pushCode("offset = "+u+";")},e.prototype.generateSaveOffset=function(e){var t=e.generateVariable(this.varName);e.pushCode(t+" = offset")},e}();t.Parser=u},5943:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var r=function(){function e(e){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references={},this.imports=[],this.reverseImports=new Map,this.importPath=e}return e.prototype.generateVariable=function(e){var t=[],r=this.scopes[this.scopes.length-1];return t.push.apply(t,r),e&&t.push(e),t.join(".")},e.prototype.generateOption=function(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return this.addImport(e)+".call("+this.generateVariable()+", vars)"}},e.prototype.generateError=function(e){this.pushCode("throw new Error("+e+");")},e.prototype.generateTmpVariable=function(){return"$tmp"+this.tmpVariableCount++},e.prototype.pushCode=function(e){this.code+=e+"\n"},e.prototype.pushPath=function(e){e&&this.scopes[this.scopes.length-1].push(e)},e.prototype.popPath=function(e){e&&this.scopes[this.scopes.length-1].pop()},e.prototype.pushScope=function(e){this.scopes.push([e])},e.prototype.popScope=function(){this.scopes.pop()},e.prototype.addImport=function(e){if(!this.importPath)return"("+e+")";var t=this.reverseImports.get(e);return t||(t=this.imports.push(e)-1,this.reverseImports.set(e,t)),this.importPath+"["+t+"]"},e.prototype.addReference=function(e){this.references[e]||(this.references[e]={resolved:!1,requested:!1})},e.prototype.markResolved=function(e){this.references[e].resolved=!0},e.prototype.markRequested=function(e){var t=this;e.forEach((function(e){t.references[e].requested=!0}))},e.prototype.getUnresolvedReferences=function(){var e=this.references;return Object.keys(this.references).filter((function(t){return!e[t].resolved&&!e[t].requested}))},e}();t.Context=r},5497:(e,t,r)=>{e.exports=r(1261)},1261:(e,t,r)=>{"use strict";var s=r(2081).exec,n=r(2081).execSync,i=r(7147),o=r(1017),a=i.access,c=i.accessSync,u=i.constants||i,h="win32"==process.platform,l=function(e){return/[^A-Za-z0-9_\/:=-]/.test(e)&&(e=(e="'"+e.replace(/'/g,"'\\''")+"'").replace(/^(?:'')+/g,"").replace(/\\'''/g,"\\'")),e};h&&(l=function(e){return/[\\]/.test(e)?'"'+o.dirname(e)+'":"'+o.basename(e)+'"':'"'+e+'"'}),e.exports=function e(t,r){var n=l(t);if(!r&&"undefined"!=typeof Promise)return new Promise((function(r,s){e(t,(function(e,n){n?r(t):s(e)}))}));h?function(e,t,r){/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(e)?s("where "+t,(function(e){r(null,null===e)})):r(null,!1)}(t,n,r):function(e,t,r){!function(e,t){a(e,u.F_OK,(function(e){t(!e)}))}(e,(function(n){n?function(e,t){a(e,u.F_OK|u.X_OK,(function(e){t(null,!e)}))}(e,r):s("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }",(function(e,t,s){r(null,!!t)}))}))}(t,n,r)},e.exports.sync=function(e){var t=l(e);return h?function(e,t,r){if(!/^(?!(?:.*\s|.*\.|\W+)$)(?:[a-zA-Z]:)?(?:(?:[^<>:"\|\?\*\n])+(?:\/\/|\/|\\\\|\\)?)+$/m.test(e))return!1;try{return!!n("where "+t,{stdio:[]})}catch(e){return!1}}(e,t):function(e,t){if(function(e){try{return c(e,u.F_OK),!1}catch(e){return!0}}(e))try{return!!n("command -v "+t+" 2>/dev/null && { echo >&1 "+t+"; exit 0; }")}catch(e){return!1}return function(e){try{return c(e,u.F_OK|u.X_OK),!0}catch(e){return!1}}(e)}(e,t)}},1227:(e,t,r)=>{t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let s=0,n=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(s++,"%c"===e&&(n=s))})),t.splice(n,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(2447)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},2447:(e,t,r)=>{e.exports=function(e){function t(e){let r,n,i,o=null;function a(...e){if(!a.enabled)return;const s=a,n=Number(new Date),i=n-(r||n);s.diff=i,s.prev=r,s.curr=n,r=n,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((r,n)=>{if("%%"===r)return"%";o++;const i=t.formatters[n];if("function"==typeof i){const t=e[o];r=i.call(s,t),e.splice(o,1),o--}return r})),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==t.namespaces&&(n=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,r){const s=t(this.namespace+(void 0===r?":":r)+e);return s.log=this.log,s}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),n=s.length;for(r=0;r<n;r++)s[r]&&("-"===(e=s[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,s;for(r=0,s=t.skips.length;r<s;r++)if(t.skips[r].test(e))return!1;for(r=0,s=t.names.length;r<s;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(7824),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},5158:(e,t,r)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=r(1227):e.exports=r(39)},39:(e,t,r)=>{const s=r(6224),n=r(3837);t.init=function(e){e.inspectOpts={};const r=Object.keys(t.inspectOpts);for(let s=0;s<r.length;s++)e.inspectOpts[r[s]]=t.inspectOpts[r[s]]},t.log=function(...e){return process.stderr.write(n.format(...e)+"\n")},t.formatArgs=function(r){const{namespace:s,useColors:n}=this;if(n){const t=this.color,n="[3"+(t<8?t:"8;5;"+t),i=`  ${n};1m${s} [0m`;r[0]=i+r[0].split("\n").join("\n"+i),r.push(n+"m+"+e.exports.humanize(this.diff)+"[0m")}else r[0]=(t.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+s+" "+r[0]},t.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},t.load=function(){return process.env.DEBUG},t.useColors=function(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)},t.destroy=n.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),t.colors=[6,2,3,4,5,1];try{const e=r(2130);e&&(e.stderr||e).level>=2&&(t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let s=process.env[t];return s=!!/^(yes|on|true|enabled)$/i.test(s)||!/^(no|off|false|disabled)$/i.test(s)&&("null"===s?null:Number(s)),e[r]=s,e}),{}),e.exports=r(2447)(t);const{formatters:i}=e.exports;i.o=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},i.O=function(e){return this.inspectOpts.colors=this.useColors,n.inspect(e,this.inspectOpts)}},8806:function(){!function(e){function t(){}function r(e,t){if(e=void 0===e?"utf-8":e,t=void 0===t?{fatal:!1}:t,-1===n.indexOf(e.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+e+"') is invalid.");if(t.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function s(e){for(var t=0,r=Math.min(65536,e.length+1),s=new Uint16Array(r),n=[],i=0;;){var o=t<e.length;if(!o||i>=r-1){if(n.push(String.fromCharCode.apply(null,s.subarray(0,i))),!o)return n.join("");e=e.subarray(t),i=t=0}if(0==(128&(o=e[t++])))s[i++]=o;else if(192==(224&o)){var a=63&e[t++];s[i++]=(31&o)<<6|a}else if(224==(240&o)){a=63&e[t++];var c=63&e[t++];s[i++]=(31&o)<<12|a<<6|c}else 240==(248&o)&&(65535<(o=(7&o)<<18|(a=63&e[t++])<<12|(c=63&e[t++])<<6|63&e[t++])&&(o-=65536,s[i++]=o>>>10&1023|55296,o=56320|1023&o),s[i++]=o)}}if(e.TextEncoder&&e.TextDecoder)return!1;var n=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");t=0;for(var r=e.length,s=0,n=Math.max(32,r+(r>>>1)+7),i=new Uint8Array(n>>>3<<3);t<r;){var o=e.charCodeAt(t++);if(55296<=o&&56319>=o){if(t<r){var a=e.charCodeAt(t);56320==(64512&a)&&(++t,o=((1023&o)<<10)+(1023&a)+65536)}if(55296<=o&&56319>=o)continue}if(s+4>i.length&&(n+=8,n=(n*=1+t/e.length*2)>>>3<<3,(a=new Uint8Array(n)).set(i),i=a),0==(4294967168&o))i[s++]=o;else{if(0==(4294965248&o))i[s++]=o>>>6&31|192;else if(0==(4294901760&o))i[s++]=o>>>12&15|224,i[s++]=o>>>6&63|128;else{if(0!=(4292870144&o))continue;i[s++]=o>>>18&7|240,i[s++]=o>>>12&63|128,i[s++]=o>>>6&63|128}i[s++]=63&o|128}}return i.slice?i.slice(0,s):i.subarray(0,s)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1});var i=s;"function"==typeof Buffer&&Buffer.from?i=function(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(i=function(e){var t=URL.createObjectURL(new Blob([e],{type:"text/plain;charset=UTF-8"}));try{var r=new XMLHttpRequest;return r.open("GET",t,!1),r.send(),r.responseText}catch(t){return s(e)}finally{URL.revokeObjectURL(t)}}),r.prototype.decode=function(e,t){if((t=void 0===t?{stream:!1}:t).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return e=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),i(e)},e.TextEncoder=t,e.TextDecoder=r}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this)},6560:e=>{"use strict";e.exports=(e,t=process.argv)=>{const r=e.startsWith("-")?"":1===e.length?"-":"--",s=t.indexOf(r+e),n=t.indexOf("--");return-1!==s&&(-1===n||s<n)}},1890:(e,t,r)=>{const s=r(4231),n=r(3610),{mkdirpNative:i,mkdirpNativeSync:o}=r(9378),{mkdirpManual:a,mkdirpManualSync:c}=r(8600),{useNative:u,useNativeSync:h}=r(6167),l=(e,t)=>(e=n(e),t=s(t),u(t)?i(e,t):a(e,t));l.sync=(e,t)=>(e=n(e),t=s(t),h(t)?o(e,t):c(e,t)),l.native=(e,t)=>i(n(e),s(t)),l.manual=(e,t)=>a(n(e),s(t)),l.nativeSync=(e,t)=>o(n(e),s(t)),l.manualSync=(e,t)=>c(n(e),s(t)),e.exports=l},8812:(e,t,r)=>{const{dirname:s}=r(1017),n=(e,t,r)=>r===t?Promise.resolve():e.statAsync(t).then((e=>e.isDirectory()?r:void 0),(r=>"ENOENT"===r.code?n(e,s(t),t):void 0)),i=(e,t,r)=>{if(r!==t)try{return e.statSync(t).isDirectory()?r:void 0}catch(r){return"ENOENT"===r.code?i(e,s(t),t):void 0}};e.exports={findMade:n,findMadeSync:i}},8600:(e,t,r)=>{const{dirname:s}=r(1017),n=(e,t,r)=>{t.recursive=!1;const i=s(e);return i===e?t.mkdirAsync(e,t).catch((e=>{if("EISDIR"!==e.code)throw e})):t.mkdirAsync(e,t).then((()=>r||e),(s=>{if("ENOENT"===s.code)return n(i,t).then((r=>n(e,t,r)));if("EEXIST"!==s.code&&"EROFS"!==s.code)throw s;return t.statAsync(e).then((e=>{if(e.isDirectory())return r;throw s}),(()=>{throw s}))}))},i=(e,t,r)=>{const n=s(e);if(t.recursive=!1,n===e)try{return t.mkdirSync(e,t)}catch(e){if("EISDIR"!==e.code)throw e;return}try{return t.mkdirSync(e,t),r||e}catch(s){if("ENOENT"===s.code)return i(e,t,i(n,t,r));if("EEXIST"!==s.code&&"EROFS"!==s.code)throw s;try{if(!t.statSync(e).isDirectory())throw s}catch(e){throw s}}};e.exports={mkdirpManual:n,mkdirpManualSync:i}},9378:(e,t,r)=>{const{dirname:s}=r(1017),{findMade:n,findMadeSync:i}=r(8812),{mkdirpManual:o,mkdirpManualSync:a}=r(8600);e.exports={mkdirpNative:(e,t)=>(t.recursive=!0,s(e)===e?t.mkdirAsync(e,t):n(t,e).then((r=>t.mkdirAsync(e,t).then((()=>r)).catch((r=>{if("ENOENT"===r.code)return o(e,t);throw r}))))),mkdirpNativeSync:(e,t)=>{if(t.recursive=!0,s(e)===e)return t.mkdirSync(e,t);const r=i(t,e);try{return t.mkdirSync(e,t),r}catch(r){if("ENOENT"===r.code)return a(e,t);throw r}}}},4231:(e,t,r)=>{const{promisify:s}=r(3837),n=r(7147);e.exports=e=>{if(e)if("object"==typeof e)e={mode:511,fs:n,...e};else if("number"==typeof e)e={mode:e,fs:n};else{if("string"!=typeof e)throw new TypeError("invalid options argument");e={mode:parseInt(e,8),fs:n}}else e={mode:511,fs:n};return e.mkdir=e.mkdir||e.fs.mkdir||n.mkdir,e.mkdirAsync=s(e.mkdir),e.stat=e.stat||e.fs.stat||n.stat,e.statAsync=s(e.stat),e.statSync=e.statSync||e.fs.statSync||n.statSync,e.mkdirSync=e.mkdirSync||e.fs.mkdirSync||n.mkdirSync,e}},3610:(e,t,r)=>{const s=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:n,parse:i}=r(1017);e.exports=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=n(e),"win32"===s){const t=/[*|"<>?:]/,{root:r}=i(e);if(t.test(e.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e}},6167:(e,t,r)=>{const s=r(7147),n=(process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version).replace(/^v/,"").split("."),i=+n[0]>10||10==+n[0]&&+n[1]>=12,o=i?e=>e.mkdir===s.mkdir:()=>!1,a=i?e=>e.mkdirSync===s.mkdirSync:()=>!1;e.exports={useNative:o,useNativeSync:a}},7824:e=>{var t=1e3,r=60*t,s=60*r,n=24*s;function i(e,t,r,s){var n=t>=1.5*r;return Math.round(e/r)+" "+s+(n?"s":"")}e.exports=function(e,o){o=o||{};var a,c,u=typeof e;if("string"===u&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(i){var o=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"weeks":case"week":case"w":return 6048e5*o;case"days":case"day":case"d":return o*n;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*r;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===u&&isFinite(e))return o.long?(a=e,(c=Math.abs(a))>=n?i(a,c,n,"day"):c>=s?i(a,c,s,"hour"):c>=r?i(a,c,r,"minute"):c>=t?i(a,c,t,"second"):a+" ms"):function(e){var i=Math.abs(e);return i>=n?Math.round(e/n)+"d":i>=s?Math.round(e/s)+"h":i>=r?Math.round(e/r)+"m":i>=t?Math.round(e/t)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},473:e=>{function t(e,t){this._elements=new Array(e||50),this._first=0,this._last=0,this._size=0,this._evictedCb=t}e.exports=t,t.prototype.capacity=function(){return this._elements.length},t.prototype.isEmpty=function(){return 0===this.size()},t.prototype.isFull=function(){return this.size()===this.capacity()},t.prototype.peek=function(){if(this.isEmpty())throw new Error("RingBuffer is empty");return this._elements[this._first]},t.prototype.peekN=function(e){if(e>this._size)throw new Error("Not enough elements in RingBuffer");var t=Math.min(this._first+e,this.capacity()),r=this._elements.slice(this._first,t);if(t<this.capacity())return r;var s=this._elements.slice(0,e-r.length);return r.concat(s)},t.prototype.deq=function(){var e=this.peek();return this._size--,this._first=(this._first+1)%this.capacity(),e},t.prototype.deqN=function(e){var t=this.peekN(e);return this._size-=e,this._first=(this._first+e)%this.capacity(),t},t.prototype.enq=function(e){this._end=(this._first+this.size())%this.capacity();var t=this.isFull();return t&&this._evictedCb&&this._evictedCb(this._elements[this._end]),this._elements[this._end]=e,t?this._first=(this._first+1)%this.capacity():this._size++,this.size()},t.prototype.size=function(){return this._size}},6099:(e,t,r)=>{!function(e){e.parser=function(e,t){return new n(e,t)},e.SAXParser=n,e.SAXStream=o,e.createStream=function(e,t){return new o(e,t)},e.MAX_BUFFER_LENGTH=65536;var t,s=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function n(t,r){if(!(this instanceof n))return new n(t,r);var i=this;!function(e){for(var t=0,r=s.length;t<r;t++)e[s[t]]=""}(i),i.q=i.c="",i.bufferCheckPosition=e.MAX_BUFFER_LENGTH,i.opt=r||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=C.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(u)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),S(i,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}),n.prototype={end:function(){_(this)},write:function(t){var r=this;if(this.error)throw this.error;if(r.closed)return D(r,"Cannot write after close. Assign an onready handler.");if(null===t)return _(r);"object"==typeof t&&(t=t.toString());for(var n=0,i="";i=V(t,n++),r.c=i,i;)switch(r.trackPosition&&(r.position++,"\n"===i?(r.line++,r.column=0):r.column++),r.state){case C.BEGIN:if(r.state=C.BEGIN_WHITESPACE,"\ufeff"===i)continue;L(r,i);continue;case C.BEGIN_WHITESPACE:L(r,i);continue;case C.TEXT:if(r.sawRoot&&!r.closedRoot){for(var o=n-1;i&&"<"!==i&&"&"!==i;)(i=V(t,n++))&&r.trackPosition&&(r.position++,"\n"===i?(r.line++,r.column=0):r.column++);r.textNode+=t.substring(o,n-1)}"<"!==i||r.sawRoot&&r.closedRoot&&!r.strict?(f(i)||r.sawRoot&&!r.closedRoot||I(r,"Text data outside of root node."),"&"===i?r.state=C.TEXT_ENTITY:r.textNode+=i):(r.state=C.OPEN_WAKA,r.startTagPosition=r.position);continue;case C.SCRIPT:"<"===i?r.state=C.SCRIPT_ENDING:r.script+=i;continue;case C.SCRIPT_ENDING:"/"===i?r.state=C.CLOSE_TAG:(r.script+="<"+i,r.state=C.SCRIPT);continue;case C.OPEN_WAKA:if("!"===i)r.state=C.SGML_DECL,r.sgmlDecl="";else if(f(i));else if(y(h,i))r.state=C.OPEN_TAG,r.tagName=i;else if("/"===i)r.state=C.CLOSE_TAG,r.tagName="";else if("?"===i)r.state=C.PROC_INST,r.procInstName=r.procInstBody="";else{if(I(r,"Unencoded <"),r.startTagPosition+1<r.position){var a=r.position-r.startTagPosition;i=new Array(a).join(" ")+i}r.textNode+="<"+i,r.state=C.TEXT}continue;case C.SGML_DECL:"[CDATA["===(r.sgmlDecl+i).toUpperCase()?(P(r,"onopencdata"),r.state=C.CDATA,r.sgmlDecl="",r.cdata=""):r.sgmlDecl+i==="--"?(r.state=C.COMMENT,r.comment="",r.sgmlDecl=""):"DOCTYPE"===(r.sgmlDecl+i).toUpperCase()?(r.state=C.DOCTYPE,(r.doctype||r.sawRoot)&&I(r,"Inappropriately located doctype declaration"),r.doctype="",r.sgmlDecl=""):">"===i?(P(r,"onsgmldeclaration",r.sgmlDecl),r.sgmlDecl="",r.state=C.TEXT):m(i)?(r.state=C.SGML_DECL_QUOTED,r.sgmlDecl+=i):r.sgmlDecl+=i;continue;case C.SGML_DECL_QUOTED:i===r.q&&(r.state=C.SGML_DECL,r.q=""),r.sgmlDecl+=i;continue;case C.DOCTYPE:">"===i?(r.state=C.TEXT,P(r,"ondoctype",r.doctype),r.doctype=!0):(r.doctype+=i,"["===i?r.state=C.DOCTYPE_DTD:m(i)&&(r.state=C.DOCTYPE_QUOTED,r.q=i));continue;case C.DOCTYPE_QUOTED:r.doctype+=i,i===r.q&&(r.q="",r.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:r.doctype+=i,"]"===i?r.state=C.DOCTYPE:m(i)&&(r.state=C.DOCTYPE_DTD_QUOTED,r.q=i);continue;case C.DOCTYPE_DTD_QUOTED:r.doctype+=i,i===r.q&&(r.state=C.DOCTYPE_DTD,r.q="");continue;case C.COMMENT:"-"===i?r.state=C.COMMENT_ENDING:r.comment+=i;continue;case C.COMMENT_ENDING:"-"===i?(r.state=C.COMMENT_ENDED,r.comment=O(r.opt,r.comment),r.comment&&P(r,"oncomment",r.comment),r.comment=""):(r.comment+="-"+i,r.state=C.COMMENT);continue;case C.COMMENT_ENDED:">"!==i?(I(r,"Malformed comment"),r.comment+="--"+i,r.state=C.COMMENT):r.state=C.TEXT;continue;case C.CDATA:"]"===i?r.state=C.CDATA_ENDING:r.cdata+=i;continue;case C.CDATA_ENDING:"]"===i?r.state=C.CDATA_ENDING_2:(r.cdata+="]"+i,r.state=C.CDATA);continue;case C.CDATA_ENDING_2:">"===i?(r.cdata&&P(r,"oncdata",r.cdata),P(r,"onclosecdata"),r.cdata="",r.state=C.TEXT):"]"===i?r.cdata+="]":(r.cdata+="]]"+i,r.state=C.CDATA);continue;case C.PROC_INST:"?"===i?r.state=C.PROC_INST_ENDING:f(i)?r.state=C.PROC_INST_BODY:r.procInstName+=i;continue;case C.PROC_INST_BODY:if(!r.procInstBody&&f(i))continue;"?"===i?r.state=C.PROC_INST_ENDING:r.procInstBody+=i;continue;case C.PROC_INST_ENDING:">"===i?(P(r,"onprocessinginstruction",{name:r.procInstName,body:r.procInstBody}),r.procInstName=r.procInstBody="",r.state=C.TEXT):(r.procInstBody+="?"+i,r.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:y(l,i)?r.tagName+=i:(R(r),">"===i?k(r):"/"===i?r.state=C.OPEN_TAG_SLASH:(f(i)||I(r,"Invalid character in tag name"),r.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:">"===i?(k(r,!0),A(r)):(I(r,"Forward-slash in opening tag not followed by >"),r.state=C.ATTRIB);continue;case C.ATTRIB:if(f(i))continue;">"===i?k(r):"/"===i?r.state=C.OPEN_TAG_SLASH:y(h,i)?(r.attribName=i,r.attribValue="",r.state=C.ATTRIB_NAME):I(r,"Invalid attribute name");continue;case C.ATTRIB_NAME:"="===i?r.state=C.ATTRIB_VALUE:">"===i?(I(r,"Attribute without value"),r.attribValue=r.attribName,F(r),k(r)):f(i)?r.state=C.ATTRIB_NAME_SAW_WHITE:y(l,i)?r.attribName+=i:I(r,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if("="===i)r.state=C.ATTRIB_VALUE;else{if(f(i))continue;I(r,"Attribute without value"),r.tag.attributes[r.attribName]="",r.attribValue="",P(r,"onattribute",{name:r.attribName,value:""}),r.attribName="",">"===i?k(r):y(h,i)?(r.attribName=i,r.state=C.ATTRIB_NAME):(I(r,"Invalid attribute name"),r.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(f(i))continue;m(i)?(r.q=i,r.state=C.ATTRIB_VALUE_QUOTED):(I(r,"Unquoted attribute value"),r.state=C.ATTRIB_VALUE_UNQUOTED,r.attribValue=i);continue;case C.ATTRIB_VALUE_QUOTED:if(i!==r.q){"&"===i?r.state=C.ATTRIB_VALUE_ENTITY_Q:r.attribValue+=i;continue}F(r),r.q="",r.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:f(i)?r.state=C.ATTRIB:">"===i?k(r):"/"===i?r.state=C.OPEN_TAG_SLASH:y(h,i)?(I(r,"No whitespace between attributes"),r.attribName=i,r.attribValue="",r.state=C.ATTRIB_NAME):I(r,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(!g(i)){"&"===i?r.state=C.ATTRIB_VALUE_ENTITY_U:r.attribValue+=i;continue}F(r),">"===i?k(r):r.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(r.tagName)">"===i?A(r):y(l,i)?r.tagName+=i:r.script?(r.script+="</"+r.tagName,r.tagName="",r.state=C.SCRIPT):(f(i)||I(r,"Invalid tagname in closing tag"),r.state=C.CLOSE_TAG_SAW_WHITE);else{if(f(i))continue;b(h,i)?r.script?(r.script+="</"+i,r.state=C.SCRIPT):I(r,"Invalid tagname in closing tag."):r.tagName=i}continue;case C.CLOSE_TAG_SAW_WHITE:if(f(i))continue;">"===i?A(r):I(r,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var c,u;switch(r.state){case C.TEXT_ENTITY:c=C.TEXT,u="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:c=C.ATTRIB_VALUE_QUOTED,u="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:c=C.ATTRIB_VALUE_UNQUOTED,u="attribValue"}";"===i?(r[u]+=M(r),r.entity="",r.state=c):y(r.entity.length?d:p,i)?r.entity+=i:(I(r,"Invalid character in entity name"),r[u]+="&"+r.entity+i,r.entity="",r.state=c);continue;default:throw new Error(r,"Unknown state: "+r.state)}return r.position>=r.bufferCheckPosition&&function(t){for(var r=Math.max(e.MAX_BUFFER_LENGTH,10),n=0,i=0,o=s.length;i<o;i++){var a=t[s[i]].length;if(a>r)switch(s[i]){case"textNode":x(t);break;case"cdata":P(t,"oncdata",t.cdata),t.cdata="";break;case"script":P(t,"onscript",t.script),t.script="";break;default:D(t,"Max buffer length exceeded: "+s[i])}n=Math.max(n,a)}var c=e.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=c+t.position}(r),r},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;x(e=this),""!==e.cdata&&(P(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(P(e,"onscript",e.script),e.script="")}};try{t=r(2781).Stream}catch(e){t=function(){}}var i=e.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function o(e,r){if(!(this instanceof o))return new o(e,r);t.apply(this),this._parser=new n(e,r),this.writable=!0,this.readable=!0;var s=this;this._parser.onend=function(){s.emit("end")},this._parser.onerror=function(e){s.emit("error",e),s._parser.error=null},this._decoder=null,i.forEach((function(e){Object.defineProperty(s,"on"+e,{get:function(){return s._parser["on"+e]},set:function(t){if(!t)return s.removeAllListeners(e),s._parser["on"+e]=t,t;s.on(e,t)},enumerable:!0,configurable:!1})}))}o.prototype=Object.create(t.prototype,{constructor:{value:o}}),o.prototype.write=function(e){if("function"==typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(e)){if(!this._decoder){var t=r(1576).StringDecoder;this._decoder=new t("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(e,r){var s=this;return s._parser["on"+e]||-1===i.indexOf(e)||(s._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),s.emit.apply(s,t)}),t.prototype.on.call(s,e,r)};var a="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/",u={xml:a,xmlns:c},h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,l=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,p=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function f(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function m(e){return'"'===e||"'"===e}function g(e){return">"===e||f(e)}function y(e,t){return e.test(t)}function b(e,t){return!y(e,t)}var v,w,T,C=0;for(var E in e.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var r=e.ENTITIES[t],s="number"==typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=s})),e.STATE)e.STATE[e.STATE[E]]=E;function S(e,t,r){e[t]&&e[t](r)}function P(e,t,r){e.textNode&&x(e),S(e,t,r)}function x(e){e.textNode=O(e.opt,e.textNode),e.textNode&&S(e,"ontext",e.textNode),e.textNode=""}function O(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function D(e,t){return x(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,S(e,"onerror",t),e}function _(e){return e.sawRoot&&!e.closedRoot&&I(e,"Unclosed root tag"),e.state!==C.BEGIN&&e.state!==C.BEGIN_WHITESPACE&&e.state!==C.TEXT&&D(e,"Unexpected end"),x(e),e.c="",e.closed=!0,S(e,"onend"),n.call(e,e.strict,e.opt),e}function I(e,t){if("object"!=typeof e||!(e instanceof n))throw new Error("bad call to strictFail");e.strict&&D(e,t)}function R(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,r=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(r.ns=t.ns),e.attribList.length=0,P(e,"onopentagstart",r)}function N(e,t){var r=e.indexOf(":")<0?["",e]:e.split(":"),s=r[0],n=r[1];return t&&"xmlns"===e&&(s="xmlns",n=""),{prefix:s,local:n}}function F(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=N(e.attribName,!0),r=t.prefix,s=t.local;if("xmlns"===r)if("xml"===s&&e.attribValue!==a)I(e,"xml: prefix must be bound to "+a+"\nActual: "+e.attribValue);else if("xmlns"===s&&e.attribValue!==c)I(e,"xmlns: prefix must be bound to "+c+"\nActual: "+e.attribValue);else{var n=e.tag,i=e.tags[e.tags.length-1]||e;n.ns===i.ns&&(n.ns=Object.create(i.ns)),n.ns[s]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,P(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function k(e,t){if(e.opt.xmlns){var r=e.tag,s=N(e.tagName);r.prefix=s.prefix,r.local=s.local,r.uri=r.ns[s.prefix]||"",r.prefix&&!r.uri&&(I(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),r.uri=s.prefix);var n=e.tags[e.tags.length-1]||e;r.ns&&n.ns!==r.ns&&Object.keys(r.ns).forEach((function(t){P(e,"onopennamespace",{prefix:t,uri:r.ns[t]})}));for(var i=0,o=e.attribList.length;i<o;i++){var a=e.attribList[i],c=a[0],u=a[1],h=N(c,!0),l=h.prefix,p=h.local,d=""===l?"":r.ns[l]||"",f={name:c,value:u,prefix:l,local:p,uri:d};l&&"xmlns"!==l&&!d&&(I(e,"Unbound namespace prefix: "+JSON.stringify(l)),f.uri=l),e.tag.attributes[c]=f,P(e,"onattribute",f)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),P(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=C.TEXT:e.state=C.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function A(e){if(!e.tagName)return I(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=C.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=C.SCRIPT);P(e,"onscript",e.script),e.script=""}var t=e.tags.length,r=e.tagName;e.strict||(r=r[e.looseCase]());for(var s=r;t--&&e.tags[t].name!==s;)I(e,"Unexpected close tag");if(t<0)return I(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=C.TEXT);e.tagName=r;for(var n=e.tags.length;n-- >t;){var i=e.tag=e.tags.pop();e.tagName=e.tag.name,P(e,"onclosetag",e.tagName);var o={};for(var a in i.ns)o[a]=i.ns[a];var c=e.tags[e.tags.length-1]||e;e.opt.xmlns&&i.ns!==c.ns&&Object.keys(i.ns).forEach((function(t){var r=i.ns[t];P(e,"onclosenamespace",{prefix:t,uri:r})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=C.TEXT}function M(e){var t,r=e.entity,s=r.toLowerCase(),n="";return e.ENTITIES[r]?e.ENTITIES[r]:e.ENTITIES[s]?e.ENTITIES[s]:("#"===(r=s).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),n=(t=parseInt(r,16)).toString(16)):(r=r.slice(1),n=(t=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(t)||n.toLowerCase()!==r?(I(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function L(e,t){"<"===t?(e.state=C.OPEN_WAKA,e.startTagPosition=e.position):f(t)||(I(e,"Non-whitespace before first tag."),e.textNode=t,e.state=C.TEXT)}function V(e,t){var r="";return t<e.length&&(r=e.charAt(t)),r}C=e.STATE,String.fromCodePoint||(v=String.fromCharCode,w=Math.floor,T=function(){var e,t,r=16384,s=[],n=-1,i=arguments.length;if(!i)return"";for(var o="";++n<i;){var a=Number(arguments[n]);if(!isFinite(a)||a<0||a>1114111||w(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?s.push(a):(e=55296+((a-=65536)>>10),t=a%1024+56320,s.push(e,t)),(n+1===i||s.length>r)&&(o+=v.apply(null,s),s.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:T,configurable:!0,writable:!0}):String.fromCodePoint=T)}(t)},2130:(e,t,r)=>{"use strict";const s=r(2037),n=r(6224),i=r(6560),{env:o}=process;let a;function c(e,t={}){return 0!==(r=function(e,{streamIsTTY:t,sniffFlags:r=!0}={}){const n=function(){if("FORCE_COLOR"in o)return"true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(Number.parseInt(o.FORCE_COLOR,10),3)}();void 0!==n&&(a=n);const c=r?a:n;if(0===c)return 0;if(r){if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2}if(e&&!t&&void 0===c)return 0;const u=c||0;if("dumb"===o.TERM)return u;if("win32"===process.platform){const e=s.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some((e=>e in o))||"codeship"===o.CI_NAME?1:u;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=Number.parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:u}(e,{streamIsTTY:e&&e.isTTY,...t}))&&{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3};var r}i("no-color")||i("no-colors")||i("color=false")||i("color=never")?a=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(a=1),e.exports={supportsColor:c,stdout:c({isTTY:n.isatty(1)}),stderr:c({isTTY:n.isatty(2)})}},2159:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GDBServer=t.ServerConsoleLog=t.GdbPid=void 0;const n=r(2081),i=r(2037),o=r(1808),a=r(7147),c=r(2361),u=r(9512),h=r(3200),l=r(530);function p(e,r){try{const s=i.tmpdir(),n=new Date;r&&(t.GdbPid=r),e=`[${n.toISOString()}] ppid=${process.pid} pid=${t.GdbPid} `+e,console.log(e),e.endsWith("\n")||(e+="\n"),a.appendFileSync(`${s}/cortex-debug-server-exiting.log`,e)}catch(e){console.log(e.toString())}}t.GdbPid=-1,t.ServerConsoleLog=p;let d=[];class f extends c.EventEmitter{constructor(e,t,r,s,n,i){super(),this.cwd=e,this.application=t,this.args=r,this.initMatch=s,this.port=n,this.consolePort=i,this.outBuffer="",this.errBuffer="",this.consoleSocket=null,this.pid=-1,this.exitTimeout=null,this.killInProgress=!1}init(){return new Promise(((e,t)=>s(this,void 0,void 0,(function*(){if(null!==this.application){this.initResolve=e,this.initReject=t;try{yield this.connectToConsole()}catch(e){p("GDBServer: Could not connect to console: "+e),t(e)}this.process=n.spawn(this.application,this.args,{cwd:this.cwd}),d.push(this),this.pid=this.process.pid,this.process.stdout.on("data",this.onStdout.bind(this)),this.process.stderr.on("data",this.onStderr.bind(this)),this.process.on("exit",this.onExit.bind(this)),this.process.on("error",this.onError.bind(this)),-1!==this.application.indexOf("st-util")&&"win32"===i.platform()&&u.setTimeout((()=>{this.initResolve&&(this.initResolve(!0),this.initReject=null,this.initResolve=null)}),500),null==this.initMatch&&u.setTimeout((()=>{this.initResolve&&(this.initResolve(!0),this.initReject=null,this.initResolve=null)}),100)}else e(!0)}))))}isExternal(){return!this.application}isProcessRunning(){return!!this.process}exit(){if(this.process&&!this.killInProgress)try{p(`GDBServer(${this.pid}): forcing an exit with kill()`),this.killInProgress=!0,this.process.kill()}catch(e){p(`GDBServer(${this.pid}): Trying to force and exit failed ${e}`)}}onExit(e,t){p(`GDBServer(${this.pid}): exited code=${e} signal=${t}`),d=d.filter((e=>e!==this)),this.process=null,this.exitTimeout&&(clearTimeout(this.exitTimeout),this.exitTimeout=null),this.emit("exit",e,t),this.disconnectConsole()}onError(e){this.initReject&&(this.initReject(e),this.initReject=null,this.initResolve=null),this.emit("launcherror",e)}onStdout(e){if(this.sendToConsole(e),this.initResolve){this.outBuffer+="string"==typeof e?e:e.toString("utf8"),this.initResolve&&this.initMatch&&this.initMatch.test(this.outBuffer)&&(this.initResolve(!0),this.initResolve=null,this.initReject=null);const t=this.outBuffer.lastIndexOf("\n");-1!==t&&(this.outBuffer=this.outBuffer.substring(t+1))}}onStderr(e){if(this.sendToConsole(e),this.initResolve){this.errBuffer+="string"==typeof e?e:e.toString("utf8"),this.initResolve&&this.initMatch&&this.initMatch.test(this.errBuffer)&&(this.initResolve(!0),this.initResolve=null,this.initReject=null);const t=this.errBuffer.lastIndexOf("\n");-1!==t&&(this.errBuffer=this.errBuffer.substring(t+1))}}connectToConsole(){return new Promise(((e,t)=>{const r=new o.Socket;r.on("data",(e=>{try{this.process.stdin.write(e,"utf8")}catch(e){console.error(`stdin write failed ${e}`)}})),r.once("close",(()=>{this.consoleSocket=null})),r.on("error",(e=>{if("ECONNRESET"!==e.code){const r=`Error: unexpected socket error ${e}. Please report this problem`;this.emit("output",r+"\n"),console.error(r),this.consoleSocket||t(e)}else this.consoleSocket&&(this.consoleSocket.destroy(),this.consoleSocket=null)})),r.connect(this.consolePort,"127.0.0.1",(()=>{r.write(l.greenFormat(h.quoteShellCmdLine([this.application,...this.args])+"\n")),this.consoleSocket=r,e()}))}))}sendToConsole(e){this.consoleSocket?this.consoleSocket.write(e):console.error("sendToConsole: console not open. How did this happen?")}disconnectConsole(){try{this.consoleSocket&&(this.consoleSocket.destroy(),this.consoleSocket=null)}catch(e){}}}t.GDBServer=f,f.SERVER_TIMEOUT=1e4,f.LOCALHOST="0.0.0.0",process.on("exit",((e,t)=>{if(d.length>0){p(`Debug Adapter killed by VSCode? code=${e} signal=${t}`);for(const e of[...d])e.exit()}}))},3200:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SpawnLineReader=t.validateELFHeader=t.sanitizeDevDebug=t.quoteShellCmdLine=t.quoteShellAndCmdChars=t.HrTimer=t.ResettableTimeout=t.ResettableInterval=t.getNonce=t.parseHostPort=t.toStringDecHexOctBin=t.parseHexOrDecInt=t.getAnyFreePort=t.createPortName=t.calculatePortMask=t.RTTServerHelper=t.genDownloadCommands=t.defSymbolFile=t.ChainedEvents=t.TelemetryEvent=t.RTTConfigureEvent=t.BinaryEncoding=t.TextEncoding=t.TerminalInputMode=t.SWOConfigureEvent=t.StoppedEvent=t.GenericCustomEvent=t.NumberFormat=t.CortexDebugKeys=t.ADAPTER_DEBUG_MODE=void 0;const n=r(9955),i=r(2361),o=r(3725),a=r(2159),c=r(2081),u=r(7147),h=r(4521);var l,p,d,f,m,g,y;!function(e){e.NONE="none",e.PARSED="parsed",e.BOTH="both",e.RAW="raw",e.VSCODE="vscode"}(l=t.ADAPTER_DEBUG_MODE||(t.ADAPTER_DEBUG_MODE={})),(d=t.CortexDebugKeys||(t.CortexDebugKeys={})).REGISTER_DISPLAY_MODE="registerUseNaturalFormat",d.VARIABLE_DISPLAY_MODE="variableUseNaturalFormat",d.SERVER_LOG_FILE_NAME="dbgServerLogfile",d.DEV_DEBUG_MODE="showDevDebugOutput",(p=t.NumberFormat||(t.NumberFormat={}))[p.Auto=0]="Auto",p[p.Hexadecimal=1]="Hexadecimal",p[p.Decimal=2]="Decimal",p[p.Binary=3]="Binary";class b extends n.Event{constructor(e,t){super("custom-event-"+e,{info:t})}}t.GenericCustomEvent=b;class v extends n.Event{constructor(e,t,r){super("stopped",{reason:e,threadId:t,allThreadsStopped:r})}}t.StoppedEvent=v;class w extends n.Event{constructor(e){super("swo-configure",e)}}t.SWOConfigureEvent=w,(g=t.TerminalInputMode||(t.TerminalInputMode={})).COOKED="cooked",g.RAW="raw",g.RAWECHO="rawecho",g.DISABLED="disabled",(m=t.TextEncoding||(t.TextEncoding={})).UTF8="utf8",m.UTF16LE="utf16le",m.ASCII="ascii",m.UCS2="ucs2",(f=t.BinaryEncoding||(t.BinaryEncoding={})).UNSIGNED="unsigned",f.SIGNED="signed",f.Q1616="Q16.16",f.FLOAT="float";class T extends n.Event{constructor(e){super("rtt-configure",e)}}t.RTTConfigureEvent=T;class C extends n.Event{constructor(e,t,r,s={}){super("record-event",{category:e,action:t,label:r,parameters:s})}}function E(e){const t=/[\s\"\*\[\]!@#$%^&*\(\)\\:]/g.test(e)?'"':"";return t+(e=e.replace(/"/g,'\\"').replace(/\\/g,"\\\\")).replace(/"/g,'\\"')+t}t.TelemetryEvent=C,(y=t.ChainedEvents||(t.ChainedEvents={})).POSTSTART="postStart",y.POSTINIT="postInit",t.defSymbolFile=function(e){return{file:e,sections:[],sectionMap:{}}},t.genDownloadCommands=function(e,t){if(Array.isArray(null==e?void 0:e.loadFiles)){if(0===e.loadFiles.length)return[];{const r=[...t];for(const t of e.loadFiles){const e=t.replace("\\","/");r.push(`file-exec-file "${e}"`,"target-download")}return r}}return[...t,"target-download"]},t.RTTServerHelper=class{constructor(){this.rttLocalPortMap={},this.allocDone=!1}allocateRTTPorts(e,t=6e4){if(this.allocDone=!0,!e||!e.enabled||!e.decoders||0===e.decoders.length)return Promise.resolve();const r="??";for(const t of e.decoders)if(t.ports&&t.ports.length>0){t.tcpPorts=[];for(const e of t.ports)this.rttLocalPortMap[e]=r}else this.rttLocalPortMap[t.port]=r;const s={min:t,max:t+2e3,retrieve:Object.keys(this.rttLocalPortMap).length,consecutive:!1};return o.TcpPortScanner.findFreePorts(s,a.GDBServer.LOCALHOST).then((t=>{for(const s of e.decoders)if(s.ports&&s.ports.length>0){s.tcpPorts=[];for(const e of s.ports){let n=this.rttLocalPortMap[e];n===r&&(n=t.shift().toString(),this.rttLocalPortMap[e]=n),s.tcpPorts.push(n)}}else{let e=this.rttLocalPortMap[s.port];e===r&&(e=t.shift().toString(),this.rttLocalPortMap[s.port]=e),s.tcpPort=e}}))}emitConfigures(e,t){if(e.enabled)for(const r of e.decoders)(r.tcpPort||r.tcpPorts)&&t.emit("event",new T({type:"socket",decoder:r}))}},t.calculatePortMask=function(e){if(!e)return 0;let t=0;return e.forEach((e=>{if("advanced"===e.type)for(const r of e.ports)t=(t|1<<r)>>>0;else t=(t|1<<e.port)>>>0})),t},t.createPortName=function(e,t="gdbPort"){return t+(0===e?"":e.toString())},t.getAnyFreePort=function(e){return new Promise(((t,r)=>s(this,void 0,void 0,(function*(){function s(){o.TcpPortScanner.findFreePorts({min:6e4,max:62e3,retrieve:1,consecutive:!1},a.GDBServer.LOCALHOST).then((e=>{t(e[0])})).catch((e=>{r(e)}))}e>0?o.TcpPortScanner.isPortInUseEx(e,a.GDBServer.LOCALHOST,o.TcpPortScanner.AvoidPorts).then((r=>{r?s():(o.TcpPortScanner.EmitAllocated([e]),t(e))})):s()}))))},t.parseHexOrDecInt=function(e){return e.startsWith("0x")?parseInt(e.substring(2),16):parseInt(e,10)},t.toStringDecHexOctBin=function(e){if(Number.isNaN(e))return"NaN: Not a number";if(!Number.isSafeInteger(e))return"Big Num: "+e.toString()+"\nother-radix values not yet available. Sorry";let t=`dec: ${e}`;e<0&&(e=1+~((e=-e)>>>0)>>>0);let r=e.toString(16);r="0x"+"0".repeat(Math.max(0,8-r.length))+r,t+=`\nhex: ${r}`,r=e.toString(8),r="0".repeat(Math.max(0,12-r.length))+r,t+=`\noct: ${r}`,r=e.toString(2),r="0".repeat(Math.max(0,32-r.length))+r;let s="";for(;;){if(r.length<=8){s=r+s;break}s=" "+r.slice(-8)+s,r=r.slice(0,-8)}return t+=`\nbin: ${s}`,t},t.parseHostPort=function(e){let t,r="127.0.0.1";const s=e.match(/(.*)\:([0-9]+)/);return s?(r=s[1]?s[1]:r,t=parseInt(s[2],10)):(e.startsWith(":")&&(e=e.slice(1)),t=parseInt(e,10)),{port:t,host:r}},t.getNonce=function(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},t.ResettableInterval=class{constructor(e,t,r=!1,...s){this.cb=e,this.interval=t,this.args=s,r&&this.cb(...this.args),this.intervalId=setInterval(this.cb,this.interval,...this.args)}kill(){this.isRunning()&&(clearInterval(this.intervalId),this.intervalId=null)}reset(e){this.kill(),void 0!==e&&(this.interval=e),this.intervalId=setInterval(this.cb,this.interval,...this.args)}isRunning(){return null!=this.intervalId}},t.ResettableTimeout=class{constructor(e,t,...r){this.cb=e,this.interval=t,this.timeoutId=null,this.args=r,this.timeoutId=setTimeout(((...e)=>{this.timeoutId=null,this.cb(...this.args)}),this.interval,...this.args)}kill(){this.isRunning()&&(clearTimeout(this.timeoutId),this.timeoutId=null)}reset(e){this.kill(),void 0!==e&&(this.interval=e),this.timeoutId=setTimeout(this.cb,this.interval,...this.args)}isRunning(){return null!==this.timeoutId}},t.HrTimer=class{constructor(){this.start=process.hrtime.bigint()}restart(){this.start=process.hrtime.bigint()}getStart(){return this.start}deltaNs(){return(process.hrtime.bigint()-this.start).toString()}deltaUs(){return this.toStringWithRes(3)}deltaMs(){return this.toStringWithRes(6)}createPaddedMs(e){return this.deltaMs().padStart(e,"0")}createDateTimestamp(){const e=this.createPaddedMs(6);return`[${(new Date).toISOString()}, +${e}ms]`}toStringWithRes(e){let t=(process.hrtime.bigint()-this.start+BigInt(Math.pow(10,e)/2)).toString();return t=t.length<=e?"0":t.substr(0,t.length-e),t}},t.quoteShellAndCmdChars=E,t.quoteShellCmdLine=function(e){return e.map((e=>E(e))).join(" ")},t.sanitizeDevDebug=function(e){const t=Object.values(l);let r=e.showDevDebugOutput;if("string"==typeof r&&(r=r.toLowerCase().trim(),e.showDevDebugOutput=r),!1===r||"false"===r||""===r||"none"===r)delete e.showDevDebugOutput;else if(!0===r||"true)"===r)e.showDevDebugOutput=l.RAW;else if(t.indexOf(r)<0)return e.showDevDebugOutput=l.VSCODE,!1;return!0},t.validateELFHeader=function(e,t){try{if(!u.existsSync(e))return t&&t(`File not found "executable": "${e}"`,!0),!1;const r=Buffer.alloc(16),s=u.openSync(e,"r"),n=u.readSync(s,r,0,16,0);return u.closeSync(s),16!==n?(t&&t(`Could not read 16 bytes from "executable": "${e}"`,!0),!1):127===r[0]&&69===r[1]&&76===r[2]&&70===r[3]||(t&&t(`Not a valid ELF file "executable": "${e}". Many debug functions may not work`,!1),!1)}catch(r){return t&&t(`Could not read file "executable": "${e}" ${r?r.toString():""}`,!0),!1}};class S extends i.EventEmitter{constructor(){super()}startWithProgram(e,t=[],r={},s=null){if(this.promise)throw new Error("SpawnLineReader: can't reuse this object");return this.callback=s,this.promise=new Promise((s=>{try{const n=c.spawn(e,t,r);n.on("error",(e=>{this.emit("error",e),s(!1)})),n.on("exit",((e,t)=>{this.emit("exit",e,t)})),this.doReadline(n.stdout,s)}catch(e){this.emit("error",e)}})),this.promise}startWithStream(e,t=null){if(this.promise)throw new Error("SpawnLineReader: can't reuse this object");return this.callback=t,this.promise=new Promise((t=>{this.doReadline(e,t)})),this.promise}startWithFile(e,t=null,r=null){if(this.promise)throw new Error("SpawnLineReader: can't reuse this object");return this.callback=r,this.promise=new Promise((r=>{const s=u.createReadStream(e,t||{flags:"r"});s.on("error",(e=>{this.emit("error",e),r(!1)})),s.on("open",(()=>{this.doReadline(s,r)}))})),this.promise}doReadline(e,t){try{const r=h.createInterface({input:e,crlfDelay:1/0,console:!1});r.on("line",(e=>{this.callback?this.callback(e)||r.close():this.emit("line",e)})),r.once("close",(()=>{this.callback&&this.callback(null),e.destroy(),this.emit("close"),t(!0)}))}catch(e){this.emit("error",e)}}}t.SpawnLineReader=S},1644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressRangesUtils=t.AddrRange=void 0;class r{constructor(e,t){this.base=e,this.length=t}nxtAddr(){return this.base+this.length}endAddr(){return this.nxtAddr()-1}}t.AddrRange=r;t.AddressRangesUtils=class{constructor(){}static splitIntoChunks(e,t,s="",n=0){const i=new Array;for(const s of e){for(;s.length>t;)i.push(new r(s.base,t)),s.base+=t,s.length-=t;s.length>0&&i.push(s)}return i.length,i}static consoleLog(e,t,r,s){console.log(e+` base=0x${t.toString(16)}, totalLen=${r}, #ranges=${s.length}\n`);let n=0;for(const e of s)n+=e.length,console.log(`**** 0x${e.base.toString(16)}, len=${e.length}, cum-bytes=${n}\n`);const i=r-n;if(n>0&&r>0){const t=i/r*100;console.log(e+` totalLen=${r}, savings=${i} ${t.toFixed(2)}%`)}}}},530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.magentaFormat=t.greenFormat=t.BR_GREEN_FG=t.BR_MAGENTA_FG=t.RESET=t.BOLD=t.CSI=t.ESC=void 0,t.ESC="",t.CSI=t.ESC+"[",t.BOLD=t.CSI+"1m",t.RESET=t.CSI+"0m",t.BR_MAGENTA_FG=t.CSI+"95m",t.BR_GREEN_FG=t.CSI+"92m",t.greenFormat=function(e){return t.BR_GREEN_FG+e+t.RESET},t.magentaFormat=function(e){return t.BR_MAGENTA_FG+e+t.RESET}},6244:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CortexDebugConfigurationProvider=void 0;const s=r(6828),n=r(7147),i=r(2037),o=r(2057),a=r(5287),c=r(3200),u=r(8640),h=r(1017),l=["ChibiOS","eCos","embKernel","FreeRTOS","mqx","nuttx","ThreadX","uCOS-III","auto"],p=["Azure","ChibiOS","embOS","FreeRTOS","NuttX","Zephyr"];class d{constructor(e){this.context=e}resolveDebugConfiguration(e,t,r){if(a.GDBServerConsole.BackendPort<=0)return void s.window.showErrorMessage("GDB server console not yet ready. Please try again. Report this problem");switch(t.gdbServerConsolePort=a.GDBServerConsole.BackendPort,t.pvtAvoidPorts=u.CDebugSession.getAllUsedPorts(),i.platform()){case"darwin":Object.assign(t,t.osx),delete t.osx;break;case"win32":Object.assign(t,t.windows),delete t.windows;break;case"linux":Object.assign(t,t.linux),delete t.linux;break;default:console.log(`Unknown platform ${i.platform()}`)}this.sanitizeChainedConfigs(t),t.debugger_args&&!t.debuggerArgs&&(t.debuggerArgs=t.debugger_args),t.debuggerArgs||(t.debuggerArgs=[]);const n=t.servertype;let h=null;switch(t.swoConfig?(t.swoConfig.ports&&!t.swoConfig.decoders&&(t.swoConfig.decoders=t.swoConfig.ports),t.swoConfig.source||(t.swoConfig.source="probe"),t.swoConfig.decoders||(t.swoConfig.decoders=[]),t.swoConfig.decoders.forEach(((e,t)=>{"advanced"===e.type?void 0===e.ports&&void 0!==e.number&&(e.ports=[e.number]):void 0===e.port&&void 0!==e.number&&(e.port=e.number)}))):t.swoConfig={enabled:!1,decoders:[],cpuFrequency:0,swoFrequency:0,source:"probe"},t.rttConfig?t.rttConfig.decoders||(t.rttConfig.decoders=[]):t.rttConfig={enabled:!1,decoders:[]},t.graphConfig||(t.graphConfig=[]),t.preLaunchCommands||(t.preLaunchCommands=[]),t.postLaunchCommands||(t.postLaunchCommands=[]),t.preAttachCommands||(t.preAttachCommands=[]),t.postAttachCommands||(t.postAttachCommands=[]),t.preRestartCommands||(t.preRestartCommands=[]),t.postRestartCommands||(t.postRestartCommands=[]),t.runToEntryPoint?t.runToEntryPoint=t.runToEntryPoint.trim():t.runToMain&&(t.runToEntryPoint="main",s.window.showWarningMessage('launch.json: "runToMain" has been deprecated and will not work in future versions of Cortex-Debug. Please use "runToEntryPoint" instead')),n){case"jlink":h=this.verifyJLinkConfiguration(e,t);break;case"openocd":h=this.verifyOpenOCDConfiguration(e,t);break;case"stutil":h=this.verifySTUtilConfiguration(e,t);break;case"stlink":h=this.verifySTLinkConfiguration(e,t);break;case"pyocd":h=this.verifyPyOCDConfiguration(e,t);break;case"bmp":h=this.verifyBMPConfiguration(e,t);break;case"pe":h=this.verifyPEConfiguration(e,t);break;case"external":h=this.verifyExternalConfiguration(e,t);break;case"qemu":h=this.verifyQEMUConfiguration(e,t);break;default:h='Invalid servertype parameters. The following values are supported: "jlink", "openocd", "stlink", "stutil", "pyocd", "bmp", "pe", "qemu", "external"'}const l=s.workspace.getConfiguration("cortex-debug");if(void 0===t.showDevDebugOutput&&(t.showDevDebugOutput=l.get(c.CortexDebugKeys.DEV_DEBUG_MODE,c.ADAPTER_DEBUG_MODE.NONE)),!c.sanitizeDevDebug(t)){const e=Object.values(c.ADAPTER_DEBUG_MODE);s.window.showInformationMessage(`launch.json: "showDevDebugOutput" muse be one of ${e}. Setting to "${t.showDevDebugOutput}"`)}if(t.armToolchainPath&&(t.toolchainPath=t.armToolchainPath),this.setOsSpecficConfigSetting(t,"toolchainPath","armToolchainPath"),t.toolchainPath||t.armToolchainPath||"stlink"!==t.servertype||(t.armToolchainPath=o.STLinkServerController.getArmToolchainPath()),t.toolchainPrefix||(t.toolchainPrefix=l.armToolchainPrefix||"arm-none-eabi"),this.setOsSpecficConfigSetting(t,"gdbPath"),this.setOsSpecficConfigSetting(t,"objdumpPath"),t.extensionPath=this.context.extensionPath,"win32"===i.platform()&&(t.extensionPath=t.extensionPath.replace(/\\/g,"/")),t.registerUseNaturalFormat=l.get(c.CortexDebugKeys.REGISTER_DISPLAY_MODE,!0),t.variableUseNaturalFormat=l.get(c.CortexDebugKeys.VARIABLE_DISPLAY_MODE,!0),!h)return t;s.window.showErrorMessage(h)}resolveDebugConfigurationWithSubstitutedVariables(e,t,r){var n;let i=t.cwd||e.uri.fsPath;h.isAbsolute(i)||(i=h.join(e.uri.fsPath,i)),t.cwd=i,this.validateLoadAndSymbolFiles(t,i);const o=s.extensions.getExtension("marus25.cortex-debug");t.pvtVersion=(null===(n=null==o?void 0:o.packageJSON)||void 0===n?void 0:n.version)||"<unknown version>";let a=null;if(a="jlink"===t.servertype?this.verifyJLinkConfigurationAfterSubstitution(e,t):null,!a)return t;s.window.showErrorMessage(a)}static adjustStrIntProp(e,t,r){if(!e.hasOwnProperty(t))return;let n=e[t];if(n){let i=!1;"string"==typeof n&&(n=n.trim(),i=n.match(/^0[x][0-9a-f]+/i)||n.match(/^[0-9]+/)),i?e[t]=parseInt(n):"number"!=typeof e[t]&&(s.window.showErrorMessage(`Invalid "${t}" value ${n} for ${r}. Must be a number or a string." +\n                    " Use a string starting with "0x" for a hexadecimal number`),delete e[t])}}validateLoadAndSymbolFiles(e,t){const r=c.defSymbolFile(e.executable),n=e.symbolFiles||[r];if(n&&0!==n.length){for(const r of n){let n=r.file;n=h.isAbsolute(n)?n:h.join(t,n),n=h.normalize(n).replace("\\","/"),e.symbolFiles?r.file=n:e.executable=n,d.adjustStrIntProp(r,"offset",`file ${n}`),d.adjustStrIntProp(r,"textaddress",`file ${n}`),r.sectionMap={},r.sections=r.sections||[];for(const e of r.sections)d.adjustStrIntProp(e,"address",`section ${e.name} of file ${n}`),r.sectionMap[e.name]=e;c.validateELFHeader(n,((e,t)=>{t?s.window.showErrorMessage(e):s.window.showWarningMessage(e)}))}e.symbolFiles&&(e.symbolFiles=n)}else s.window.showWarningMessage('No "executable" or "symbolFiles" specified. We will try to run program without symbols');if(e.loadFiles)for(let r=0;r<e.loadFiles.length;r++){let s=e.loadFiles[r];s=h.isAbsolute(s)?s:h.join(t,s),s=h.normalize(s).replace("\\","/"),e.loadFiles[r]=s}}handleChainedInherits(e,t,r){if(!r)return;const n=["type","name","request","chainedConfigurations"];for(const i of r){if(n.includes(i)||i.startsWith("pvt")){s.window.showWarningMessage(`Cannot inherit property '${i}' for configuration '${e.name}' because it is reserved`);continue}const r=t[i];void 0!==r?e[i]=r:s.window.showWarningMessage(`Cannot inherit property '${i}' for configuration '${e.name}' because it does not exist in parent configuration`)}}handleChainedOverrides(e,t){if(!t)return;const r=["type","name","request"];for(const s of Object.keys(t)){if(r.includes(s)||s.startsWith("pvt"))continue;const n=t[s];null===n?delete e[s]:e[s]=n}}sanitizeChainedConfigs(e){const t=u.CDebugChainedSessionItem.FindByName(e.name);t&&(e.pvtParent=t.parent.config,e.pvtMyConfigFromParent=t.config,this.handleChainedInherits(e,e.pvtParent,t.config.inherits),this.handleChainedOverrides(e,t.config.overrides));const r=e.chainedConfigurations;if(!r||!r.enabled||!r.launches||0===r.launches.length)return void(e.chainedConfigurations={enabled:!1});r.delayMs||(r.delayMs=0),r.waitOnEvent&&Object.values(c.ChainedEvents).includes(r.waitOnEvent)||(r.waitOnEvent=c.ChainedEvents.POSTINIT),void 0!==r.detached&&null!==r.detached||(r.detached="jlink"===e.servertype),void 0!==r.lifecycleManagedByParent&&null!==r.lifecycleManagedByParent||(r.lifecycleManagedByParent=!0);const s=r.overrides||{};for(const e of r.launches){void 0!==e.enabled&&null!==e.enabled||(e.enabled=!0),void 0===e.delayMs&&(e.delayMs=r.delayMs),void 0!==e.detached&&null!==e.detached||(e.detached=r.detached),void 0!==e.waitOnEvent&&Object.values(c.ChainedEvents).includes(e.waitOnEvent)||(e.waitOnEvent=r.waitOnEvent),void 0!==e.lifecycleManagedByParent&&null!==e.lifecycleManagedByParent||(e.lifecycleManagedByParent=r.lifecycleManagedByParent);const t=(e.inherits||[]).concat(r.inherits||[]);t.length>0?e.inherits=t:delete e.inherits;const n=e.overrides||{};Object.keys(s).length>0||Object.keys(n).length>0?e.overrides=Object.assign(s,n):delete e.overrides}}setOsSpecficConfigSetting(e,t,r=""){if(!e[t]){const n=s.workspace.getConfiguration("cortex-debug"),o=i.platform(),a=(r||t)+"."+("win32"===o?"windows":"darwin"===o?"osx":"linux");e[t]=n.get(a,n.get(r||t,""))}}verifyQEMUConfiguration(e,t){return this.setOsSpecficConfigSetting(t,"serverpath","qemupath"),t.cpu||(t.cpu="cortex-m3"),t.machine||(t.machine="lm3s6965evb"),t.swoConfig.enabled&&(s.window.showWarningMessage("SWO support is not available when using QEMU."),t.swoConfig={enabled:!1,ports:[],cpuFrequency:0,swoFrequency:0},t.graphConfig=[]),t.rtos?"RTOS support is not available when using QEMU":null}verifyJLinkConfiguration(e,t){if(t.jlinkpath&&!t.serverpath&&(t.serverpath=t.jlinkpath),!t.interface&&t.jlinkInterface&&(t.interface=t.jlinkInterface),t.interface||(t.interface="swd"),this.setOsSpecficConfigSetting(t,"serverpath","JLinkGDBServerPath"),!t.device)return"Device Identifier is required for J-Link configurations. Please see https://www.segger.com/downloads/supported-devices.php for supported devices";if(("jtag"===t.interface||"cjtag"===t.interface)&&t.swoConfig.enabled&&"probe"===t.swoConfig.source)return"SWO Decoding cannot be performed through the J-Link Probe in JTAG mode.";if(t.rttConfig&&t.rttConfig.enabled&&t.rttConfig.decoders&&0!==t.rttConfig.decoders.length)for(const e of t.rttConfig.decoders)if(void 0===e.port)e.port=0;else if(0!==e.port)return`Invalid port/channel '${e.port}'. JLink RTT port/channel has to be 0 because that is the only one supported by JLinkGDBServer`;return null}verifyJLinkConfigurationAfterSubstitution(e,t){function r(){switch(i.platform()){case"darwin":return".dylib";case"linux":return".so";case"win32":return".dll";default:return console.log(`Unknown platform ${i.platform()}`),""}}if(t.rtos)if(-1===p.indexOf(t.rtos)){if(""===h.extname(t.rtos)&&(t.rtos=t.rtos+r()),!n.existsSync(t.rtos))return`JLink RTOS plugin file "${t.rtos}" not found.\nThe following RTOS values are supported by J-Link: ${p.join(", ")}. A custom plugin can be used by supplying a complete path to a J-Link GDB Server Plugin.`}else t.rtos=`GDBServer/RTOSPlugin_${t.rtos}`+r();return null}verifyOpenOCDConfiguration(e,t){if(t.openOCDPath&&!t.serverpath&&(t.serverpath=t.openOCDPath),this.setOsSpecficConfigSetting(t,"serverpath","openocdPath"),t.rtos&&-1===l.indexOf(t.rtos))return`The following RTOS values are supported by OpenOCD: ${l.join(" ")}`;if(!u.CDebugChainedSessionItem.FindByName(t.name)){if(!t.configFiles||0===t.configFiles.length)return"At least one OpenOCD Configuration File must be specified.";t.searchDir&&0!==t.searchDir.length||(t.searchDir=[])}return null}verifySTUtilConfiguration(e,t){return t.stutilpath&&!t.serverpath&&(t.serverpath=t.stutilpath),this.setOsSpecficConfigSetting(t,"serverpath","stutilPath"),t.rtos?"The st-util GDB Server does not have support for the rtos option.":(t.swoConfig.enabled&&"probe"===t.swoConfig.source&&(s.window.showWarningMessage("SWO support is not available from the probe when using the ST-Util GDB server. Disabling SWO."),t.swoConfig={enabled:!1,ports:[],cpuFrequency:0,swoFrequency:0},t.graphConfig=[]),null)}verifySTLinkConfiguration(e,t){return t.stlinkPath&&!t.serverpath&&(t.serverpath=t.stlinkPath),this.setOsSpecficConfigSetting(t,"serverpath","stlinkPath"),this.setOsSpecficConfigSetting(t,"stm32cubeprogrammer"),t.rtos?"The ST-Link GDB Server does not have support for the rtos option.":(t.swoConfig.enabled&&"probe"===t.swoConfig.source&&(s.window.showWarningMessage("SWO support is not available from the probe when using the ST-Link GDB server. Disabling SWO."),t.swoConfig={enabled:!1,ports:[],cpuFrequency:0,swoFrequency:0},t.graphConfig=[]),null)}verifyPyOCDConfiguration(e,t){return t.pyocdPath&&!t.serverpath&&(t.serverpath=t.pyocdPath),this.setOsSpecficConfigSetting(t,"serverpath","pyocdPath"),t.rtos?"The PyOCD GDB Server does not have support for the rtos option.":(t.board&&!t.boardId&&(t.boardId=t.board),t.target&&!t.targetId&&(t.targetId=t.target),null)}verifyBMPConfiguration(e,t){return t.BMPGDBSerialPort?(t.powerOverBMP||(t.powerOverBMP="lastState"),t.interface||(t.interface="swd"),t.targetId||(t.targetId=1),t.rtos?"The Black Magic Probe GDB Server does not have support for the rtos option.":(t.swoConfig.enabled&&"probe"===t.swoConfig.source&&(s.window.showWarningMessage("SWO support is not available from the probe when using the BMP GDB server. Disabling SWO."),t.swoConfig={enabled:!1,ports:[],cpuFrequency:0,swoFrequency:0},t.graphConfig=[]),null)):"A Serial Port for the Black Magic Probe GDB server is required."}verifyPEConfiguration(e,t){return this.setOsSpecficConfigSetting(t,"serverpath","PEGDBServerPath"),t.configFiles&&t.configFiles.length>1?"Only one pegdbserver Configuration File is allowed.":t.device?t.swoConfig.enabled?"The PE GDB Server does not have support for SWO":null:"Device Identifier is required for PE configurations. Please run `pegdbserver_console.exe -devicelist` for supported devices"}verifyExternalConfiguration(e,t){return t.swoConfig.enabled&&("socket"!==t.swoConfig.source||t.swoConfig.swoPort?"socket"===t.swoConfig.source||t.swoConfig.swoPath||(s.window.showWarningMessage(`SWO source type "${t.swoConfig.source}" requires a "swoPath". Disabling SWO support.`),t.swoConfig={enabled:!1},t.graphConfig=[]):(s.window.showWarningMessage('SWO source type "socket" requires a "swoPort". Disabling SWO support.'),t.swoConfig={enabled:!1},t.graphConfig=[])),t.gdbTarget?null:'External GDB server type must specify the GDB target. This should either be a "hostname:port" combination or a serial port.'}}t.CortexDebugConfigurationProvider=d},8640:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CDebugChainedSessionItem=t.CDebugSession=void 0;const s=r(6206),n=r(6828);class i{constructor(e,t){this.session=e,this.config=t,this.swo=null,this.rtt=null,this.swoSource=null,this.rttPortMap={},this.status="none",this.parent=null,this.children=[],this.usedPorts=new Set,e&&i.CurrentSessions.push(this)}getRoot(){return this.parent&&this.parent.parent?this.parent.getRoot():this}hasChildren(){return this.children.length>0}moveToRoot(){this.parent&&(this.remove(),i.ROOT.add(this))}broadcastDFS(e,t=!0){(t?this.getRoot():this)._broadcastDFS(e)}_broadcastDFS(e){for(const t of this.children)t._broadcastDFS(e);e(this)}remove(){this.parent.removeChild(this)}add(e){s.assert(!e.parent,"child already has a parent?"),this.children.find((t=>t===e))?s.assert(!1,"child already exists"):(this.children.push(e),e.parent=this)}removeChild(e){this.children=this.children.filter((t=>t!==e)),e.parent=null}stopAll(){this.broadcastDFS((e=>{n.debug.stopDebugging(e.session)}))}static RemoveSession(e){const t=i.FindSession(e);t?(t.status="exited",t.remove(),i.CurrentSessions=i.CurrentSessions.filter((t=>t.session.id!==e.id))):console.error(`Where did session ${e.id} go?`)}static FindSession(e){return i.FindSessionById(e.id)}static FindSessionById(e){return i.CurrentSessions.find((t=>t.session.id===e))}static GetSession(e,t){const r=i.FindSessionById(e.id);return r?(r.config=t||r.config,r):new i(e,t||e.configuration)}static NewSessionStarted(e){const t=i.GetSession(e);if(t.status="started",e.parentSession&&"cortex-debug"===e.parentSession.type){const r=i.FindSession(e.parentSession);r?r.add(t):n.window.showErrorMessage(`Internal Error: Have parent for new session, Parent = ${e.parentSession.name} but can't find it`)}else i.ROOT.add(t);return t}static getAllUsedPorts(){const e=new Set;for(const t of i.CurrentSessions)if("started"===t.status||"stopped"===t.status||"running"===t.status)for(const r of t.usedPorts.values())e.add(r);return Array.from(e.values())}addUsedPorts(e){for(const t of e)this.usedPorts.add(t)}}t.CDebugSession=i,i.ROOT=new i(null,null),i.CurrentSessions=[];class o{constructor(e,t,r){this.parent=e,this.config=t,this.options=r,o.SessionsStack.push(this)}static FindByName(e){return this.SessionsStack.find((t=>t.config.name===e))}static RemoveItem(e){o.SessionsStack=o.SessionsStack.filter((t=>t!==e))}}t.CDebugChainedSessionItem=o,o.SessionsStack=[]},3414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisassemblyContentProvider=void 0;const s=r(6828),n=r(6292);t.DisassemblyContentProvider=class{provideTextDocumentContent(e,t){return new Promise(((t,r)=>{let i,o;const a=e.path,c=a.substring(1,a.length-6).split(":::");1===c.length?(o=null,i=c[0]):(o=c[0],i=c[1]);const u=n.CortexDebugExtension.getActiveCDSession();u?u.customRequest("disassemble",{function:i,file:o}).then((e=>{const r=e.instructions;let s="";r.forEach((e=>{s+=`${e.address}: ${this.padEnd(15,e.opcodes)} \t${e.instruction}\n`})),t(s)}),(e=>{s.window.showErrorMessage(e.message),r(e.message)})):r(new Error("DisassemblyContentProvider: unknown debug session type"))}))}padEnd(e,t){for(let r=t.length;r<e;r++)t+=" ";return t}}},6292:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.activate=t.CortexDebugExtension=void 0;const n=r(6828),i=r(7147),o=r(1017),a=r(2028),c=r(3213),u=r(8904),h=r(3200),l=r(4533),p=r(4942),d=r(6244),f=r(1337),m=r(1339),g=r(3624),y=r(1325),b=r(3414),v=r(565),w=r(7561),T=r(5287),C=r(8640),E=r(2159),S=r(1485);r(5497).sync;class P{constructor(e,t,r,s){this.name=e,this.promise=t,this.resolve=r,this.reject=s}}class x{constructor(e){this.context=e,this.rttTerminals=[],this.gdbServerConsole=null,this.SVDDirectory=[],this.functionSymbols=null;const t=n.workspace.getConfiguration("cortex-debug");this.startServerConsole(e,t.get(h.CortexDebugKeys.SERVER_LOG_FILE_NAME,"")),this.peripheralProvider=new a.PeripheralTreeProvider,this.registerProvider=new c.RegisterTreeProvider,this.memoryProvider=new l.MemoryContentProvider,new S.RTOSTracker(e);let r=[];try{const t=o.join(e.extensionPath,"data","SVDMap.json");r=JSON.parse(i.readFileSync(t,"utf8"))}catch(e){}p.default.activate(e),this.peripheralTreeView=n.window.createTreeView("cortex-debug.peripherals",{treeDataProvider:this.peripheralProvider}),this.registerTreeView=n.window.createTreeView("cortex-debug.registers",{treeDataProvider:this.registerProvider}),n.commands.executeCommand("setContext",`cortex-debug:${h.CortexDebugKeys.REGISTER_DISPLAY_MODE}`,t.get(h.CortexDebugKeys.REGISTER_DISPLAY_MODE,!0)),n.commands.executeCommand("setContext",`cortex-debug:${h.CortexDebugKeys.VARIABLE_DISPLAY_MODE}`,t.get(h.CortexDebugKeys.VARIABLE_DISPLAY_MODE,!0)),e.subscriptions.push(n.workspace.registerTextDocumentContentProvider("examinememory",this.memoryProvider),n.workspace.registerTextDocumentContentProvider("disassembly",new b.DisassemblyContentProvider),n.commands.registerCommand("cortex-debug.peripherals.updateNode",this.peripheralsUpdateNode.bind(this)),n.commands.registerCommand("cortex-debug.peripherals.copyValue",this.peripheralsCopyValue.bind(this)),n.commands.registerCommand("cortex-debug.peripherals.setFormat",this.peripheralsSetFormat.bind(this)),n.commands.registerCommand("cortex-debug.peripherals.forceRefresh",this.peripheralsForceRefresh.bind(this)),n.commands.registerCommand("cortex-debug.peripherals.pin",this.peripheralsTogglePin.bind(this)),n.commands.registerCommand("cortex-debug.peripherals.unpin",this.peripheralsTogglePin.bind(this)),n.commands.registerCommand("cortex-debug.registers.copyValue",this.registersCopyValue.bind(this)),n.commands.registerCommand("cortex-debug.registers.refresh",this.registersRefresh.bind(this)),n.commands.registerCommand("cortex-debug.registers.regHexModeTurnOn",this.registersNaturalMode.bind(this,!1)),n.commands.registerCommand("cortex-debug.registers.regHexModeTurnOff",this.registersNaturalMode.bind(this,!0)),n.commands.registerCommand("cortex-debug.varHexModeTurnOn",this.variablesNaturalMode.bind(this,!1)),n.commands.registerCommand("cortex-debug.varHexModeTurnOff",this.variablesNaturalMode.bind(this,!0)),n.commands.registerCommand("cortex-debug.toggleVariableHexFormat",this.toggleVariablesHexMode.bind(this)),n.commands.registerCommand("cortex-debug.examineMemory",this.examineMemory.bind(this)),n.commands.registerCommand("cortex-debug.viewDisassembly",this.showDisassembly.bind(this)),n.commands.registerCommand("cortex-debug.setForceDisassembly",this.setForceDisassembly.bind(this)),n.commands.registerCommand("cortex-debug.resetDevice",this.resetDevice.bind(this)),n.commands.registerCommand("cortex-debug.pvtEnableDebug",this.pvtCycleDebugMode.bind(this)),n.workspace.onDidChangeConfiguration(this.settingsChanged.bind(this)),n.debug.onDidReceiveDebugSessionCustomEvent(this.receivedCustomEvent.bind(this)),n.debug.onDidStartDebugSession(this.debugSessionStarted.bind(this)),n.debug.onDidTerminateDebugSession(this.debugSessionTerminated.bind(this)),n.window.onDidChangeActiveTextEditor(this.activeEditorChanged.bind(this)),n.window.onDidCloseTerminal(this.terminalClosed.bind(this)),n.window.onDidChangeTextEditorSelection((e=>{e&&e.textEditor.document.fileName.endsWith(".cdmem")&&this.memoryProvider.handleSelection(e)})),n.debug.registerDebugConfigurationProvider("cortex-debug",new d.CortexDebugConfigurationProvider(e)),this.registerTreeView,this.registerTreeView.onDidCollapseElement((e=>{e.element.expanded=!1})),this.registerTreeView.onDidExpandElement((e=>{e.element.expanded=!0})),this.peripheralTreeView,this.peripheralTreeView.onDidExpandElement((e=>{e.element.expanded=!0,e.element.getPeripheral().updateData(),this.peripheralProvider.refresh()})),this.peripheralTreeView.onDidCollapseElement((e=>{e.element.expanded=!1})))}static getActiveCDSession(){const e=n.debug.activeDebugSession;return"cortex-debug"===(null==e?void 0:e.type)?e:null}resetDevice(){const e=x.getActiveCDSession();e&&e.customRequest("reset-device","reset")}startServerConsole(e,t=""){return new Promise(((r,s)=>{this.gdbServerConsole=new T.GDBServerConsole(e,t),this.gdbServerConsole.startServer().then((()=>{console.log("GDB server console created"),r()})).catch((e=>{this.gdbServerConsole.dispose(),this.gdbServerConsole=null,n.window.showErrorMessage(`Could not create gdb-server-console. Will use old style console. Please report this problem. ${e.toString()}`)}))}))}settingsChanged(e){if(e.affectsConfiguration(`cortex-debug.${h.CortexDebugKeys.REGISTER_DISPLAY_MODE}`)){let e=0;for(const t of C.CDebugSession.CurrentSessions)"stopped"===t.status&&this.isDebugging(t.session)&&(this.registerProvider.refresh(t.session),e++);if(e!==C.CDebugSession.CurrentSessions.length){const t=`Cortex-Debug: ${e>0?"Some sessions updated. ":""}New format will take effect next time the session pauses`;n.window.showInformationMessage(t)}}if(e.affectsConfiguration(`cortex-debug.${h.CortexDebugKeys.VARIABLE_DISPLAY_MODE}`)){const t=!n.workspace.getConfiguration("cortex-debug").get(h.CortexDebugKeys.VARIABLE_DISPLAY_MODE,!0);let r=!1;for(const s of C.CDebugSession.CurrentSessions)try{this.isDebugging(s.session)&&(s.session.customRequest("set-var-format",{hex:t}),"stopped"===s.status&&(r=!0))}catch(e){}if(!r){const e=`Cortex-Debug: Variables window format "${t?"hex":"dec"}" will take effect next time the session pauses`;n.window.showInformationMessage(e)}}if(e.affectsConfiguration(`cortex-debug.${h.CortexDebugKeys.SERVER_LOG_FILE_NAME}`)){const e=n.workspace.getConfiguration("cortex-debug").get(h.CortexDebugKeys.SERVER_LOG_FILE_NAME,"");this.gdbServerConsole.createLogFile(e)}if(e.affectsConfiguration(`cortex-debug.${h.CortexDebugKeys.DEV_DEBUG_MODE}`)){const t=n.workspace.getConfiguration("cortex-debug").get(h.CortexDebugKeys.DEV_DEBUG_MODE,h.ADAPTER_DEBUG_MODE.NONE);for(const r of C.CDebugSession.CurrentSessions)try{r.session.customRequest("set-debug-mode",{mode:t})}catch(e){}}}getSVDFile(e){const t=this.SVDDirectory.find((t=>t.expression.test(e)));return t?t.path:null}registerSVDFile(e,t){"string"==typeof e&&(e=new RegExp(`^${e}$`,"")),this.SVDDirectory.push({expression:e,path:t})}activeEditorChanged(e){const t=x.getActiveCDSession();if(void 0!==e&&t){const r=e.document.uri;"file"===r.scheme||"disassembly"===r.scheme&&t.customRequest("set-active-editor",{path:`${r.scheme}://${r.authority}${r.path}`})}}showDisassembly(){return s(this,void 0,void 0,(function*(){const e=x.getActiveCDSession();if(e){if(!this.functionSymbols)try{const t=yield e.customRequest("load-function-symbols");this.functionSymbols=t.functionSymbols}catch(e){n.window.showErrorMessage("Unable to load symbol table. Disassembly view unavailable.")}try{let e=yield n.window.showInputBox({placeHolder:"main",ignoreFocusOut:!0,prompt:"Function Name (exact or a regexp) to Disassemble."});if(e=e?e.trim():null,!e)return;let t,r=this.functionSymbols.filter((t=>t.name===e));if(0===r.length){let t=new RegExp(e);e.endsWith("/i")&&(t=new RegExp(e.substring(0,e.length-2),"i")),r=this.functionSymbols.filter((e=>t.test(e.name)))}if(0===r.length)n.window.showInformationMessage(`No function matching name/regexp '${e}' found.\nPlease report this problem if you think it in error. We will need your executable to debug.`),t=`disassembly:///${e}.cdasm`;else if(1===r.length)t=r[0].file&&r[0].scope!==v.SymbolScope.Global?`disassembly:///${r[0].file}:::${r[0].name}.cdasm`:`disassembly:///${r[0].name}.cdasm`;else if(r.length>31)n.window.showErrorMessage(`Too many(${r.length}) functions matching '${e}' found.`);else{const e=yield n.window.showQuickPick(r.map((e=>({label:e.name,name:e.name,file:e.file,scope:e.scope,description:e.file&&e.scope!==v.SymbolScope.Global?`Static in ${e.file}`:"Global Scope"}))),{ignoreFocusOut:!0});t=e.file&&e.scope!==v.SymbolScope.Global?`disassembly:///${e.file}:::${e.name}.cdasm`:`disassembly:///${e.name}.cdasm`}t&&n.window.showTextDocument(n.Uri.parse(t))}catch(e){n.window.showErrorMessage("Unable to show disassembly.")}}else n.window.showErrorMessage("No cortex-debug debugging session available")}))}setForceDisassembly(){const e=x.getActiveCDSession();e?n.window.showQuickPick([{label:"Auto",description:"Show disassembly for functions when source cannot be located."},{label:"Forced",description:"Always show disassembly for functions."}],{matchOnDescription:!0,ignoreFocusOut:!0}).then((t=>{const r="Forced"===t.label;e.customRequest("set-force-disassembly",{force:r}),p.default.sendEvent("Force Disassembly","Set",r?"Forced":"Auto")}),(e=>{})):n.window.showErrorMessage("Command not valid when cortex-debug session not active")}examineMemory(){x.getActiveCDSession()?n.window.showInputBox({placeHolder:"Enter a valid C/gdb expression. Use 0x prefix for hexadecimal numbers",ignoreFocusOut:!0,prompt:"Memory Address"}).then((e=>{if(!function(e){return""===e?null:e}(e=e.trim()))return n.window.showErrorMessage("Invalid memory address entered"),void p.default.sendEvent("Examine Memory","Invalid Address",e);n.window.showInputBox({placeHolder:"Enter a constant value. Prefix with 0x for hexadecimal format.",ignoreFocusOut:!0,prompt:"Length"}).then((t=>{if(!function(e){return/^0x[0-9a-f]{1,8}$/i.test(e)||/^[0-9]+$/i.test(e)?e:null}(t=t.trim()))return n.window.showErrorMessage("Invalid length entered"),void p.default.sendEvent("Examine Memory","Invalid Length",t);p.default.sendEvent("Examine Memory","Valid",`${e}-${t}`);const r=(new Date).getTime(),s=encodeURIComponent(`${e}`);n.workspace.openTextDocument(n.Uri.parse(`examinememory:///Memory%20[${s},${t}].cdmem?address=${s}&length=${t}&timestamp=${r}`)).then((e=>{n.window.showTextDocument(e,{viewColumn:2,preview:!1}),p.default.sendEvent("Examine Memory","Used")}),(e=>{n.window.showErrorMessage(`Failed to examine memory: ${e}`),p.default.sendEvent("Examine Memory","Error",e.toString())}))}),(e=>{}))}),(e=>{})):n.window.showErrorMessage("No cortex-debug session available")}peripheralsUpdateNode(e){e.performUpdate().then((e=>{e&&(this.peripheralProvider.refresh(),p.default.sendEvent("Peripheral View","Update Node"))}),(e=>{n.window.showErrorMessage(`Unable to update value: ${e.toString()}`)}))}peripheralsCopyValue(e){const t=e.getCopyValue();t&&n.env.clipboard.writeText(t).then((()=>{p.default.sendEvent("Peripheral View","Copy Value")}))}peripheralsSetFormat(e){return s(this,void 0,void 0,(function*(){const t=yield n.window.showQuickPick([{label:"Auto",description:"Automatically choose format (Inherits from parent)",value:h.NumberFormat.Auto},{label:"Hex",description:"Format value in hexadecimal",value:h.NumberFormat.Hexadecimal},{label:"Decimal",description:"Format value in decimal",value:h.NumberFormat.Decimal},{label:"Binary",description:"Format value in binary",value:h.NumberFormat.Binary}]);void 0!==t&&(e.format=t.value,this.peripheralProvider.refresh(),p.default.sendEvent("Peripheral View","Set Format",t.label))}))}peripheralsForceRefresh(e){return s(this,void 0,void 0,(function*(){e?e.getPeripheral().updateData().then((e=>{this.peripheralProvider.refresh()})):this.peripheralProvider.refresh()}))}peripheralsTogglePin(e){return s(this,void 0,void 0,(function*(){this.peripheralProvider.togglePinPeripheral(e),this.peripheralProvider.refresh()}))}registersCopyValue(e){const t=e.getCopyValue();t&&n.env.clipboard.writeText(t).then((()=>{p.default.sendEvent("Register View","Copy Value")}))}registersRefresh(){const e=x.getActiveCDSession();e&&this.isDebugging(e)&&this.registerProvider.refresh(e)}registersNaturalMode(e){const t=n.workspace.getConfiguration("cortex-debug");n.commands.executeCommand("setContext",`cortex-debug:${h.CortexDebugKeys.REGISTER_DISPLAY_MODE}`,e);try{t.update(h.CortexDebugKeys.REGISTER_DISPLAY_MODE,e)}catch(e){console.error(e)}}variablesNaturalMode(e,t){const r=n.workspace.getConfiguration("cortex-debug");n.commands.executeCommand("setContext",`cortex-debug:${h.CortexDebugKeys.VARIABLE_DISPLAY_MODE}`,e);try{r.update(h.CortexDebugKeys.VARIABLE_DISPLAY_MODE,e)}catch(e){console.error(e)}}toggleVariablesHexMode(){const e=n.workspace.getConfiguration("cortex-debug"),t=!e.get(h.CortexDebugKeys.VARIABLE_DISPLAY_MODE,!0);n.commands.executeCommand("setContext",`cortex-debug:${h.CortexDebugKeys.VARIABLE_DISPLAY_MODE}`,t);try{e.update(h.CortexDebugKeys.VARIABLE_DISPLAY_MODE,t)}catch(e){console.error(e)}}pvtCycleDebugMode(){const e=n.workspace.getConfiguration("cortex-debug"),t=e.get(h.CortexDebugKeys.DEV_DEBUG_MODE,h.ADAPTER_DEBUG_MODE.NONE),r=Object.values(h.ADAPTER_DEBUG_MODE);let s=r.indexOf(t);s=s<0?s=0:(s+1)%r.length,e.set(h.CortexDebugKeys.DEV_DEBUG_MODE,r[s])}debugSessionStarted(e){if("cortex-debug"!==e.type)return;const t=C.CDebugSession.NewSessionStarted(e);this.functionSymbols=null,e.customRequest("get-arguments").then((r=>{t.config=r;let s=r.svdFile;s||(s=this.getSVDFile(r.device)),p.default.beginSession(e.id,r),t.swoSource&&this.initializeSWO(e,r),Object.keys(t.rttPortMap).length>0&&this.initializeRTT(e,r),this.isDebugging(e)&&this.registerProvider.debugSessionStarted(e),this.peripheralProvider.debugSessionStarted(e,s&&!r.noDebug?s:null,r.svdAddrGapThreshold),this.cleanupRTTTerminals()}),(e=>{}))}debugSessionTerminated(e){if("cortex-debug"!==e.type)return;const t=C.CDebugSession.FindSession(e);try{if(p.default.endSession(e.id),this.isDebugging(e)&&this.registerProvider.debugSessionTerminated(e),this.peripheralProvider.debugSessionTerminated(e),(null==t?void 0:t.swo)&&t.swo.debugSessionTerminated(),(null==t?void 0:t.swoSource)&&t.swoSource.dispose(),(null==t?void 0:t.rtt)&&t.rtt.debugSessionTerminated(),null==t?void 0:t.rttPortMap){for(const e of Object.keys(t.rttPortMap))t.rttPortMap[e].dispose();t.rttPortMap={}}}catch(e){n.window.showInformationMessage(`Debug session did not terminate cleanly ${e}\n${e?e.stackstrace:""}. Please report this problem`)}finally{C.CDebugSession.RemoveSession(e)}}receivedCustomEvent(e){var t,r;if("cortex-debug"===e.session.type)switch(e.event){case"custom-stop":this.receivedStopEvent(e);break;case"custom-continued":this.receivedContinuedEvent(e);break;case"swo-configure":this.receivedSWOConfigureEvent(e);break;case"rtt-configure":this.receivedRTTConfigureEvent(e);break;case"record-event":this.receivedEvent(e);break;case"custom-event-open-disassembly":n.commands.executeCommand("editor.debug.action.openDisassemblyView");break;case"custom-event-post-start-server":this.startChainedConfigs(e,h.ChainedEvents.POSTSTART);break;case"custom-event-post-start-gdb":this.startChainedConfigs(e,h.ChainedEvents.POSTINIT);break;case"custom-event-session-terminating":E.ServerConsoleLog("Got event for sessions terminating",process.pid),this.endChainedConfigs(e);break;case"custom-event-session-restart":this.resetOrResartChained(e,"restart");break;case"custom-event-session-reset":this.resetOrResartChained(e,"reset");break;case"custom-event-popup":const s=null===(t=e.body.info)||void 0===t?void 0:t.message;switch(null===(r=e.body.info)||void 0===r?void 0:r.type){case"warning":n.window.showWarningMessage(s);break;case"error":n.window.showErrorMessage(s);break;default:n.window.showInformationMessage(s)}break;case"custom-event-ports-allocated":this.registerPortsAsUsed(e);break;case"custom-event-ports-done":this.signalPortsAllocated(e)}}signalPortsAllocated(e){this.serverStartedEvent&&(this.serverStartedEvent.resolve(e),this.serverStartedEvent=void 0)}registerPortsAsUsed(e){var t;C.CDebugSession.GetSession(e.session).addUsedPorts((null===(t=e.body)||void 0===t?void 0:t.info)||[])}startChainedConfigs(e,t){var r,i;return s(this,void 0,void 0,(function*(){const s=null===(r=null==e?void 0:e.body)||void 0===r?void 0:r.info,o=C.CDebugSession.GetSession(e.session,s);if(!s||!(null===(i=s.chainedConfigurations)||void 0===i?void 0:i.enabled))return;const a=s.chainedConfigurations.launches.filter(((e,t)=>t===s.chainedConfigurations.launches.findIndex(((t,r)=>t.name===e.name)))).filter((e=>e.enabled&&e.waitOnEvent===t&&e.name));let c=0,u=a.length;for(const t of a){u--;const r={consoleMode:n.DebugConsoleMode.Separate,noDebug:s.noDebug,compact:!1};t.lifecycleManagedByParent&&(r.lifecycleManagedByParent=!0,r.parentSession=e.session),c+=Math.max(t.delayMs||0,0);const i=new C.CDebugChainedSessionItem(o,t,r),a=this.getWsFolder(t.folder,e.session.workspaceFolder,t.name);if(setTimeout((()=>{n.debug.startDebugging(a,t.name,r).then((e=>{e||n.window.showErrorMessage("Failed to launch chained configuration "+t.name),C.CDebugChainedSessionItem.RemoveItem(i)}))}),c),t&&t.detached&&u>0){try{let e,r;const s=new Promise(((t,s)=>{e=t,r=s}));this.serverStartedEvent=new P(t.name,s,e,r);let n=setTimeout((()=>{this.serverStartedEvent&&(this.serverStartedEvent.reject(new Error(`Timeout starting chained session: ${t.name}`)),this.serverStartedEvent=void 0),n=void 0}),5e3);yield s,n&&clearTimeout(n)}catch(e){n.window.showErrorMessage(`Detached chained configuration launch failed? Aborting rest. Error: ${e}`);break}c=0}else c+=5}}))}endChainedConfigs(e){const t=C.CDebugSession.FindSession(e.session);if(t&&t.hasChildren){const r=[],s=[];for(t.broadcastDFS((e=>{e!==t&&(e.config.pvtMyConfigFromParent.lifecycleManagedByParent?r.push(e):s.push(e))}),!1);s.length>0;)s.pop().moveToRoot();for(;r.length>0;){const t=r.pop();E.ServerConsoleLog(`Sending custom-stop-debugging to ${t.session.name}`,process.pid),t.session.customRequest("custom-stop-debugging",e.body.info).then((()=>{}),(e=>{n.window.showErrorMessage(`Cortex-Debug: Bug? session.customRequest('set-stop-debugging-type', ... failed ${e}\n`)}))}}}resetOrResartChained(e,t){const r=C.CDebugSession.FindSession(e.session);r&&r.hasChildren&&r.broadcastDFS((e=>{e!==r&&e.config.pvtMyConfigFromParent.lifecycleManagedByParent&&e.session.customRequest("reset-device",t).then((()=>{}),(e=>{}))}),!1)}getWsFolder(e,t,r){if(e){const t=e,s=e=>(e="/"===(e=o.normalize(e).replace("\\","/"))?e:e.replace(/\/+$/,""),"win32"===process.platform&&(e=e.toLowerCase()),e);e=s(e);for(const t of n.workspace.workspaceFolders){const r=s(t.uri.fsPath);if(t.uri.fsPath===e||t.name===e||r===e)return t}n.window.showInformationMessage(`Chained configuration for '${r}' specified folder is '${t}' normalized path is '${e}' did not match any workspace folders. Using parents folder.`)}return t}getCurrentArgs(e){if(!(e||(e=n.debug.activeDebugSession)&&"cortex-debug"===e.type))return;const t=C.CDebugSession.FindSession(e);return t?t.config:e.configuration}getCurrentProp(e,t){const r=this.getCurrentArgs(e);return r?r[t]:void 0}isDebugging(e){return!0!==this.getCurrentProp(e,"noDebug")}receivedStopEvent(e){const t=C.CDebugSession.FindSession(e.session);t.status="stopped",this.peripheralProvider.debugStopped(e.session),this.isDebugging(e.session)&&this.registerProvider.debugStopped(e.session),n.workspace.textDocuments.filter((e=>e.fileName.endsWith(".cdmem"))).forEach((e=>{this.memoryProvider.update(e)})),t.swo&&t.swo.debugStopped(),t.rtt&&t.rtt.debugStopped()}receivedContinuedEvent(e){const t=C.CDebugSession.FindSession(e.session);t.status="running",this.peripheralProvider.debugContinued(),this.isDebugging(e.session)&&this.registerProvider.debugContinued(),t.swo&&t.swo.debugContinued(),t.rtt&&t.rtt.debugContinued()}receivedEvent(e){p.default.sendEvent(e.body.category,e.body.action,e.body.label,e.body.parameters)}receivedSWOConfigureEvent(e){const t=C.CDebugSession.GetSession(e.session);if("socket"===e.body.type){const r=new f.SocketSWOSource(e.body.port);return t.swoSource=r,this.initializeSWO(e.session,e.body.args),r.start().then((()=>{console.log(`Connected after ${r.nTries} tries`)}),(e=>{n.window.showErrorMessage(`Could not open SWO TCP port ${e.body.port} ${e} after ${r.nTries} tries`)})),void p.default.sendEvent("SWO","Source","Socket")}"fifo"===e.body.type?(t.swoSource=new m.FifoSWOSource(e.body.path),p.default.sendEvent("SWO","Source","FIFO")):"file"===e.body.type?(t.swoSource=new g.FileSWOSource(e.body.path),p.default.sendEvent("SWO","Source","File")):"serial"===e.body.type&&(t.swoSource=new y.SerialSWOSource(e.body.device,e.body.baudRate,this.context.extensionPath),p.default.sendEvent("SWO","Source","Serial")),this.initializeSWO(e.session,e.body.args)}receivedRTTConfigureEvent(e){if("socket"===e.body.type){const t=e.body.decoder;if("console"===t.type||"binary"===t.type)p.default.sendEvent("RTT","Source","Socket: Console"),this.rttCreateTerninal(e,t);else if(p.default.sendEvent("RTT","Source",`Socket: ${t.type}`),t.ports)for(let r=0;r<t.ports.length;r+=1)this.createRTTSource(e,t.tcpPorts[r],t.ports[r]);else this.createRTTSource(e,t.tcpPort,t.port)}else console.error("receivedRTTConfigureEvent: unknown type: "+e.body.type)}createRTTSource(e,t,r){const s=C.CDebugSession.GetSession(e.session);return new Promise(((e,i)=>{let o=s.rttPortMap[r];o?e(o):(o=new f.SocketRTTSource(t,r),s.rttPortMap[r]=o,e(o),o.start().then((()=>{})).catch((e=>{n.window.showErrorMessage(`Could not connect to RTT TCP port ${t} ${e}`),i(e)})))}))}cleanupRTTTerminals(){this.rttTerminals=this.rttTerminals.filter((e=>!!e.inUse||(e.dispose(),!1)))}rttCreateTerninal(e,t){this.createRTTSource(e,t.tcpPort,t.port).then((e=>{for(const r of this.rttTerminals)if(!r.inUse&&r.tryReuse(t,e))return void(n.debug.activeDebugConsole&&n.debug.activeDebugConsole.appendLine(`Reusing RTT terminal for channel ${t.port} on tcp port ${t.tcpPort}`));const r=new w.RTTTerminal(this.context,t,e);this.rttTerminals.push(r),n.debug.activeDebugConsole&&n.debug.activeDebugConsole.appendLine(`Created RTT terminal for channel ${t.port} on tcp port ${t.tcpPort}`)}))}terminalClosed(e){this.rttTerminals=this.rttTerminals.filter((t=>t.terminal!==e))}initializeSWO(e,t){const r=C.CDebugSession.FindSession(e);r.swoSource?r.swo||(r.swo=new u.SWOCore(e,r.swoSource,t,this.context.extensionPath)):n.window.showErrorMessage("Tried to initialize SWO Decoding without a SWO data source")}initializeRTT(e,t){const r=C.CDebugSession.FindSession(e);r.rtt||(r.rtt=new u.RTTCore(r.rttPortMap,t,this.context.extensionPath))}}t.CortexDebugExtension=x,t.activate=function(e){return new x(e)},t.deactivate=function(){}},4533:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryContentProvider=void 0;const s=r(6828),n=r(3200),i=r(6292),o=r(2942);t.MemoryContentProvider=class{constructor(){this._onDidChange=new s.EventEmitter,this.onDidChange=this._onDidChange.event,this.firstBytePos=10,this.lastBytePos=this.firstBytePos+48-1,this.firstAsciiPos=this.lastBytePos+3,this.lastAsciiPos=this.firstAsciiPos+16,this.smallDecorationType=s.window.createTextEditorDecorationType({borderWidth:"1px",borderStyle:"solid",overviewRulerColor:"blue",overviewRulerLane:s.OverviewRulerLane.Right,light:{borderColor:"darkblue"},dark:{borderColor:"lightblue"}})}provideTextDocumentContent(e){return new Promise(((t,r)=>{const a=this.parseQuery(e.query),c=a.address,u=n.parseHexOrDecInt(a.length),h=i.CortexDebugExtension.getActiveCDSession();h?h.customRequest("read-memory",{address:c,length:u||32}).then((e=>{const r=e.bytes,s=n.parseHexOrDecInt(e.startAddress);let i=s-s%16;const a=s-i;let c="";c+="  Offset: 00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F \t\n",c+=o.hexFormat(i,8,!1)+": ";let h="";for(let e=0;e<a;e++)c+="   ",h+=" ";for(let e=0;e<u;e++){const t=r[e];c+=o.hexFormat(t,2,!1).toUpperCase()+" ",h+=t<=32||t>=127&&t<=159?".":String.fromCharCode(r[e]),(s+e)%16==15&&e<u-1&&(c+="  "+h,h="",c+="\n",i+=16,c+=o.hexFormat(i,8,!1)+": ")}const l=(16-(s+u)%16)%16;for(let e=0;e<l;e++)c+="   ";c+="  "+h,c+="\n",t(c)}),(e=>{const t=e.message||"";s.window.showErrorMessage(`Unable to read memory from ${c} of length ${o.hexFormat(u,8)}: ${t}`),r(e.toString())})):r(new Error("MemoryContentProvider: unknown debug session type"))}))}update(e){this._onDidChange.fire(e.uri)}parseQuery(e){const t={};function r(e){const r=e.split("="),s=r.shift();t[s]=r.join("=")}const s=("?"===e[0]?e.substr(1):e).split("&");return r(s.pop()),r(s.pop()),r(s.join("&")),t}getOffset(e){if(e.line<1||e.character<this.firstBytePos)return;let t=16*(e.line-1);const r=e.character-this.firstBytePos;return e.character>=this.firstBytePos&&e.character<=this.lastBytePos?t+=Math.floor(r/3):e.character>=this.firstAsciiPos&&(t+=e.character-this.firstAsciiPos),t}getPosition(e,t=!1){const r=1+Math.floor(e/16);let n=e%16;return t?n+=this.firstAsciiPos:n=this.firstBytePos+3*n,new s.Position(r,n)}getRanges(e,t,r){const n=this.getPosition(e,r);let i=this.getPosition(t,r);i=new s.Position(i.line,i.character+(r?1:2));const o=[],a=r?this.firstAsciiPos:this.firstBytePos,c=r?this.lastAsciiPos:this.lastBytePos;for(let e=n.line;e<=i.line;++e){const t=new s.Position(e,e===n.line?n.character:a),r=new s.Position(e,e===i.line?i.character:c);o.push(new s.Range(t,r))}return o}handleSelection(e){const t=e.textEditor.document.lineCount;if(e.selections[0].start.line+1===t||e.selections[0].end.line+1===t)return void e.textEditor.setDecorations(this.smallDecorationType,[]);const r=this.getOffset(e.selections[0].start),s=this.getOffset(e.selections[0].end);if(void 0===r||void 0===s)return void e.textEditor.setDecorations(this.smallDecorationType,[]);let n=this.getRanges(r,s,!1);n=n.concat(this.getRanges(r,s,!0)),e.textEditor.setDecorations(this.smallDecorationType,n)}}},4751:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MemReadUtils=void 0;const n=r(1644);class i{static readMemoryChunks(e,t,r,n){const i=r.map((r=>new Promise(((s,i)=>{const o="0x"+r.base.toString(16);e.customRequest("read-memory",{address:o,length:r.length}).then((e=>{let i=r.base-t;const o=e.bytes;for(const e of o)n[i++]=e;s(!0)}),(e=>{let s=r.base-t;for(let e=0;e<r.length;e++)n[s++]=255;i(e)}))}))));return new Promise(((e,t)=>s(this,void 0,void 0,(function*(){const r=yield Promise.all(i.map((e=>e.catch((e=>e))))),s=[];r.map((e=>{e instanceof Error&&s.push(e.message)})),0!==s.length?t(new Error(s.join("\n"))):e(!0)}))))}static readMemory(e,t,r,s){const o=n.AddressRangesUtils.splitIntoChunks([new n.AddrRange(t,r)],4096);return i.readMemoryChunks(e,t,o,s)}}t.MemReadUtils=i},8477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PtyTerminal=t.magentaWrite=void 0;const s=r(2361),n=r(2037),i=r(6828),o=r(3200),a=r(530);t.magentaWrite=function(e,t){t&&t.write(a.BR_MAGENTA_FG+e+a.RESET)};const c={},u="@".charCodeAt(0);for(let e=u;e<="Z".charCodeAt(0);e++)c[String.fromCharCode(e)]=e-u;class h{static cursorUp(e=1){return e>0?a.CSI+e.toString()+"A":""}static cursorDown(e=1){return e>0?a.CSI+e.toString()+"B":""}static cursorForward(e=1){return e>0?a.CSI+e.toString()+"C":""}static cursorBack(e=1){return e>0?a.CSI+e.toString()+"D":""}static clearAll(){return a.CSI+"2J"+a.CSI+"3J"+a.CSI+";H"}static clearScreen(){return a.CSI+"2J"+a.CSI+";H"}static deleteChar(){return a.CSI+"P"}static deletePrevChar(){return h.cursorBack()+h.deleteChar()}static deleteCurrChar(){return h.deleteChar()}static killLineForward(){return a.CSI+"K"}static killLine(e=0){return h.cursorBack(e)+h.killLineForward()}static killEntireLine(){return a.CSI+"2K"}}class l extends s{constructor(e){super(),this.options=e,this.writeEmitter=new i.EventEmitter,this.didPrompt=!1,this.curLine="",this.cursorPos=1,this.terminal=null,this.disposing=!1,this.isPaused=!1,this.promptTimer=null,this.isReady=!1,this.pendingWrites=[],this.suspendPrompting=!1,this.pty={onDidWrite:this.writeEmitter.event,open:()=>{this.onOpen()},close:()=>{this.onClose()},handleInput:e=>{this.handleInput(e)}},this.terminal=i.window.createTerminal({name:this.options.name,pty:this.pty}),this.resetOptions(e),l.oldOnes[this.options.name]=this,i.window.onDidCloseTerminal((e=>{e!==this.terminal||this.disposing||this.onClose()}))}onOpen(){if(this.isReady=!0,this.pendingWrites.length){for(const e of this.pendingWrites)this.write(e);this.pendingWrites=[]}else this.doPrompt()}onClose(){this.emit("close"),super.removeAllListeners(),delete l.oldOnes[this.options.name],this.isReady=!1,this.terminal=null}static findExisting(e){return l.oldOnes[e]}pause(){this.isPaused=!0}resume(){this.isPaused=!1}resetOptions(e){if(this.options.name!==e.name)throw Error("Reset terminal: Terminal name cannot change once created");this.promptTimer&&(this.promptTimer.kill(),this.promptTimer=null),this.unPrompt(),this.options=e,this.curLine="",this.cursorPos=1,this.write("\n")}handleInput(e){if(!this.isPaused&&this.options.inputMode!==o.TerminalInputMode.DISABLED)try{switch(e){case"\r":this.handleReturn(e);break;case"":this.options.inputMode===o.TerminalInputMode.COOKED?this.killPrevChar():this.emit("data",e);break;default:this.handleSpecialChars(e)||this.handleOtherChars(e)}}catch(e){console.error(`MyPtyTerminal: handleInput: ${e}`)}}handleReturn(e){this.options.inputMode===o.TerminalInputMode.COOKED?this.emit("data",this.curLine+n.EOL):this.emit("data",e),this.options.inputMode!==o.TerminalInputMode.RAW&&(this.writeEmitter.fire("\r\n"),this.cursorPos=1,this.curLine="",this.didPrompt=!1,this.doPrompt())}handleOtherChars(e){const t=e.split(/\r\n|\r|\n/);t.length>1&&(this.promptTimer&&(this.promptTimer.kill(),this.promptTimer=null),this.didPrompt=!1,this.suspendPrompting=!0);for(let e=0;e<t.length;e++){const r=t[e],s=e===t.length-1;if(""===r&&s){this.suspendPrompting=!1,this.doPrompt();break}let n=this.curLine.slice(this.cursorPos-1);if(this.curLine=l.insertCharsAt(this.curLine,r,this.cursorPos-1),this.writeEmitter.fire(h.killLineForward()),s){n=this.curLine.slice(this.cursorPos-1),this.writeEmitter.fire(n);const e=n.length-r.length;this.writeEmitter.fire(h.cursorBack(e)),this.cursorPos+=r.length}else this.writeEmitter.fire(r),this.cursorPos+=r.length,this.curLine=n.length>0?this.curLine.slice(0,-n.length):this.curLine,this.handleReturn("\r"),n.length>0&&(this.writeEmitter.fire(n+h.cursorBack(n.length)),this.curLine=n)}this.suspendPrompting=!1}handleSpecialChars(e){if(this.options.inputMode!==o.TerminalInputMode.COOKED)return this.options.inputMode===o.TerminalInputMode.RAWECHO&&this.writeEmitter.fire(e),this.emit("data",e),!0;let t=e.charCodeAt(0);if(27===t){if("["!==e[1]||3!==e.length)return!1;switch(e[2]){case"A":case"B":break;case"C":this.moveRight();break;case"D":this.moveLeft();break;case"H":this.moveToBeg();break;case"E":this.moveToEnd()}return!0}if(1===e.length&&t<32){switch(e=String.fromCharCode(t+=64)){case"C":this.emit("break");break;case"D":"win32"!==n.platform()&&this.emit("eof");break;case"Z":"win32"===n.platform()&&this.emit("eof");break;case"A":this.moveToBeg();break;case"E":this.moveToEnd();break;case"F":this.moveRight();break;case"B":this.moveLeft();break;case"D":this.killCurrChar();break;case"H":this.killPrevChar();break;case"K":this.killLineFromCursor();break;case"U":this.killEntireLine();break;case"L":this.clearScreen()}return!0}return!1}clearScreen(){this.writeEmitter.fire(h.clearScreen()),this.curLine="",this.cursorPos=1,this.didPrompt=!1,this.doPrompt()}killEntireLine(){const e=this.cursorPos-1;this.writeEmitter.fire(h.killLine(e)),this.cursorPos=1,this.curLine=""}killLineFromCursor(){const e=this.curLine.length-this.cursorPos+1;e>1&&(this.writeEmitter.fire(h.killLineForward()),this.curLine=this.curLine.slice(this.cursorPos-1,e))}killCurrChar(){this.cursorPos<=this.curLine.length&&(this.writeEmitter.fire(h.deleteCurrChar()),this.curLine=l.removeCharAt(this.curLine,this.cursorPos-1))}moveToEnd(){const e=this.curLine.length-this.cursorPos+1;e>0&&(this.writeEmitter.fire(h.cursorForward(e)),this.cursorPos+=e)}moveToBeg(){const e=this.cursorPos-1;e>0&&(this.writeEmitter.fire(h.cursorBack(e)),this.cursorPos=1)}moveLeft(){this.cursorPos>1&&(this.writeEmitter.fire(h.cursorBack(1)),this.cursorPos--)}moveRight(){this.cursorPos<=this.curLine.length&&(this.writeEmitter.fire(h.cursorForward(1)),this.cursorPos++)}killPrevChar(){this.cursorPos>1&&(this.writeEmitter.fire(h.deletePrevChar()),this.cursorPos--,this.curLine=l.removeCharAt(this.curLine,this.cursorPos-1))}static removeCharAt(e,t){return 0===t?e.slice(1):t>=e.length-1?e.slice(0,-1):e.slice(0,t)+e.slice(t+1)}static insertCharsAt(e,t,r){return 0===r?t+e:r>=e.length?e+t:e.slice(0,r)+t+e.slice(r)}clearTerminalBuffer(){this.writeEmitter.fire(h.clearAll()),this.curLine="",this.cursorPos=1}writeWithHeader(e,t){if(!this.terminal)return;if(!t||!e)return void this.write(e);let r;r="string"==typeof e||e instanceof String?e:e.toString("utf8"),1===this.cursorPos&&this.write(t);let s=!1;for(;r.endsWith("\n");)r=r.substr(0,r.length-1),s=!0;r=r.replace(/\n/g,"\n"+t),this.write(s?r+"\n":r)}write(e){if(this.terminal)if(this.isReady)try{this.unPrompt(),"string"==typeof e||e instanceof String||(e=e.toString("utf8")),e=e.replace(/[\r]?\n/g,"\r\n"),this.writeEmitter.fire(e),e.endsWith("\n")?this.doPrompt():this.promptTimer&&this.promptTimer.kill()}catch(e){console.error(`MyPtyTerminal: write: ${e}`)}else this.pendingWrites.push(e)}doPrompt(){this.didPrompt||this.suspendPrompting||(null===this.promptTimer?this.promptTimer=new o.ResettableTimeout((()=>{const e=this.options.prompt+this.curLine;e.length&&this.writeEmitter.fire(e),this.cursorPos=this.curLine.length+1,this.didPrompt=!0}),100):this.promptTimer.reset())}unPrompt(){if(this.didPrompt){const e=this.options.prompt.length+this.cursorPos-1;this.writeEmitter.fire(h.killEntireLine()),this.writeEmitter.fire(h.cursorBack(e)),this.writeEmitter.fire(this.curLine),this.didPrompt=!1}}dispose(){this.terminal&&(super.removeAllListeners(),this.disposing=!0,this.terminal.dispose(),this.terminal=null,delete l.oldOnes[this.options.name]),this.promptTimer&&(this.promptTimer.kill(),this.promptTimer=null)}}t.PtyTerminal=l,l.oldOnes={}},2982:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RTOSVarHelper=t.RTOSBase=t.ShouldRetry=void 0;class s extends Error{constructor(e){super("Busy or Error for expr "+e)}}t.ShouldRetry=s,t.RTOSBase=class{constructor(e,t){this.session=e,this.name=t,this.exprValues=new Map,this.status="none",this.progStatus="started"}onStopped(e){return this.progStatus="stopped",this.refresh(e)}onContinued(){this.progStatus="running"}onExited(){this.progStatus="exited"}evalForVarRef(e,t,s,n){return r(this,void 0,void 0,(function*(){if(void 0!==e)return e;if("stopped"!==this.progStatus)return;const r={frameId:t,expression:s,context:"hover"};try{const e=yield this.session.customRequest("evaluate",r);if(!e||!n&&0===e.variablesReference)throw new Error(`Failed to evaluate ${s}`);return e?e.variablesReference:0}catch(e){throw e}}))}evalForVarValue(e,t){return r(this,void 0,void 0,(function*(){const r={frameId:e,expression:t,context:"hover"};try{const e=yield this.session.customRequest("evaluate",r);return null==e?void 0:e.result}catch(e){throw e}}))}getVarChildren(e,t){return new Promise(((r,s)=>{if("stopped"!==this.progStatus)return s(new Error(`busy, failed to evaluate ${t}`));{const n={variablesReference:e};this.session.customRequest("variables",n).then((e=>{e&&e.variables&&e.variables.length?r(e.variables):s(Error(`Failed to evaluate variable ${n.variablesReference} ${t}`))}),(e=>{s(e)}))}}))}getVarChildrenObj(e,t){return new Promise(((r,s)=>{void 0!==e&&0!==e?this.getVarChildren(e,t).then((e=>{const t=n.varsToObj(e);r(t)}),(e=>{s(e)})):r(null)}))}getVarIfEmpty(e,t,o,a){return r(this,void 0,void 0,(function*(){try{if(void 0!==e||"stopped"!==this.progStatus)return e;const r=new n(o,this);if(!(yield r.tryInitOrUpdate(t))||i(r.value)&&"stopped"!==this.progStatus)throw new s(o);if(i(r.value)){if(!a)throw Error(`${o} not found`);return null}return r}catch(e){throw e}}))}getExprVal(e,t){return r(this,void 0,void 0,(function*(){let r=this.exprValues.get(e);return r||(r=new n(e,this)),r.getValue(t)}))}getExprValChildren(e,t){return r(this,void 0,void 0,(function*(){let r=this.exprValues.get(e);return r||(r=new n(e,this)),r.getVarChildren(t)}))}getExprValChildrenObj(e,t){return new Promise(((s,i)=>r(this,void 0,void 0,(function*(){try{const r=yield this.getExprValChildren(e,t),i=n.varsToObj(r);s(i)}catch(e){s(e)}}))))}getHTMLCommon(e,t,r,s){const n=e.map((e=>`${t[e].width}fr`)).join(" ");let i=`<vscode-data-grid class="${this.name}-grid threads-grid" grid-template-columns="${n}">\n`,o="";for(const s of r){const r=s.display;if(!o){let r=1,s=!1;const n='  <vscode-data-grid-row row-type="header" class="threads-header-row">\n',a='    <vscode-data-grid-cell cell-type="columnheader" class="threads-header-cell" grid-column=';o=n;for(const n of e)o+=`${a}"${r}">${t[n].headerRow1}</vscode-data-grid-cell>\n`,s||(s=!!t[n].headerRow2),r++;if(o+="  </vscode-data-grid-row>\n",s){r=1,o+=n;for(const s of e)o+=`${a}"${r}">${t[s].headerRow2}</vscode-data-grid-cell>\n`,r++;o+="  </vscode-data-grid-row>\n"}i+=o}let n=1;const a="RUNNING"===r.Status?"running":"";i+=`  <vscode-data-grid-row class="${this.name}-row threads-row">\n`;for(const t of e){const e=r[t];let s=e;const o=t.toLowerCase();"StackStart"===t&&(s=`<vscode-link class="threads-link-${o}" href="#">${e}</vscode-link>`),i+=`    <vscode-data-grid-cell class="${this.name}-cell threads-cell threads-cell-${o} ${a}" grid-column="${n}">${s}</vscode-data-grid-cell>\n`,n++}i+="  </vscode-data-grid-row>\n"}let a=i;return a+="</vscode-data-grid>\n",s&&(a+=`<p>Data collected at ${s}</p>\n`),a}};class n{constructor(e,t){this.expression=e,this.rtos=t}static varsToObj(e){const t={};for(const r of e)t[r.name+"-val"]=r.value,t[r.name+"-ref"]=r.variablesReference,t[r.name+"-exp"]=r.evaluateName;return t}tryInitOrUpdate(e){return r(this,void 0,void 0,(function*(){try{if("stopped"!==this.rtos.progStatus)return!1;const t={frameId:e,expression:this.expression,context:"hover"};this.value=void 0;const r=yield this.rtos.session.customRequest("evaluate",t);return this.value=r.result,this.varReference=r.variablesReference,!0}catch(e){return!1}}))}getValue(e){return new Promise(((t,s)=>r(this,void 0,void 0,(function*(){if("stopped"!==this.rtos.progStatus)return s(new Error(`busy, failed on ${this.expression}`));this.tryInitOrUpdate(e).then((e=>{e?t(this.value):s(new Error("failed to initialize/update"))}),(e=>{s(e)}))}))))}getVarChildren(e){return new Promise(((t,r)=>{if("stopped"!==this.rtos.progStatus)return r(new Error(`busy, failed on ${this.expression}`));this.getValue(e).then((e=>{if(!this.varReference||!e)return void r(Error(`Failed to get variable reference for ${this.expression}`));const s={variablesReference:this.varReference};this.rtos.session.customRequest("variables",s).then((e=>{e&&e.variables&&e.variables.length?t(e.variables):r(Error(`Failed to evaluate variable ${this.expression} ${s.variablesReference}`))}),(e=>{r(e)}))}),(e=>{r(e)}))}))}getVarChildrenObj(e){return new Promise(((t,r)=>{this.getVarChildren(e).then((e=>{const r=n.varsToObj(e);t(r)}),(e=>{r(e)}))}))}}function i(e){return null==e}t.RTOSVarHelper=n},4883:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.RTOSFreeRTOS=void 0;const n=r(2982),i=r(2942),o=r(3200);var a;!function(e){e[e.ID=0]="ID",e[e.Address=1]="Address",e[e.TaskName=2]="TaskName",e[e.Status=3]="Status",e[e.Priority=4]="Priority",e[e.StackStart=5]="StackStart",e[e.StackTop=6]="StackTop",e[e.StackEnd=7]="StackEnd",e[e.StackSize=8]="StackSize",e[e.StackUsed=9]="StackUsed",e[e.StackFree=10]="StackFree",e[e.StackPeak=11]="StackPeak",e[e.Runtime=12]="Runtime"}(a||(a={}));const c={};c[a[a.ID]]={width:1,headerRow1:"",headerRow2:"ID"},c[a[a.Address]]={width:3,headerRow1:"Thread",headerRow2:"Address"},c[a[a.TaskName]]={width:4,headerRow1:"",headerRow2:"Task Name"},c[a[a.Status]]={width:3,headerRow1:"",headerRow2:"Status"},c[a[a.Priority]]={width:1.5,headerRow1:"Prio",headerRow2:"rity"},c[a[a.StackStart]]={width:3,headerRow1:"Stack",headerRow2:"Start"},c[a[a.StackTop]]={width:3,headerRow1:"Stack",headerRow2:"Top"},c[a[a.StackEnd]]={width:3,headerRow1:"Stack",headerRow2:"End"},c[a[a.StackSize]]={width:2,headerRow1:"Stack",headerRow2:"Size"},c[a[a.StackUsed]]={width:2,headerRow1:"Stack",headerRow2:"Used"},c[a[a.StackFree]]={width:2,headerRow1:"Stack",headerRow2:"Free"},c[a[a.StackPeak]]={width:2,headerRow1:"Stack",headerRow2:"Peak"},c[a[a.Runtime]]={width:2,headerRow1:"",headerRow2:"Runtime"};const u=Object.keys(c);class h extends n.RTOSBase{constructor(e){super(e,"FreeRTOS"),this.session=e,this.foundThreads=[],this.finalThreads=[],this.maxThreads=1024,this.helpHtml=void 0,this.stackIncrements=-1,this.lastValidHtml=""}tryDetect(e){return s(this,void 0,void 0,(function*(){this.progStatus="stopped";try{return"none"===this.status&&(this.uxCurrentNumberOfTasks=yield this.getVarIfEmpty(this.uxCurrentNumberOfTasks,e,"uxCurrentNumberOfTasks"),this.pxReadyTasksLists=yield this.getVarIfEmpty(this.pxReadyTasksLists,e,"pxReadyTasksLists"),this.xDelayedTaskList1=yield this.getVarIfEmpty(this.xDelayedTaskList1,e,"xDelayedTaskList1"),this.xDelayedTaskList2=yield this.getVarIfEmpty(this.xDelayedTaskList2,e,"xDelayedTaskList2"),this.xPendingReadyList=yield this.getVarIfEmpty(this.xPendingReadyList,e,"xPendingReadyList"),this.pxCurrentTCB=yield this.getVarIfEmpty(this.pxCurrentTCB,e,"pxCurrentTCB"),this.xSuspendedTaskList=yield this.getVarIfEmpty(this.xSuspendedTaskList,e,"xSuspendedTaskList",!0),this.xTasksWaitingTermination=yield this.getVarIfEmpty(this.xTasksWaitingTermination,e,"xTasksWaitingTermination",!0),this.ulTotalRunTime=yield this.getVarIfEmpty(this.ulTotalRunTime,e,"ulTotalRunTime",!0),this.status="initialized"),this}catch(e){return e instanceof n.ShouldRetry?console.error(e.message):(this.status="failed",this.failedWhy=e),this}}))}createHmlHelp(e,t){if(void 0===this.helpHtml){this.helpHtml="";try{let r="";function s(e){return`<strong>${e}</strong>`}t["uxTCBNumber-val"]||(r+=`Thread ID missing......: Enable macro ${s("configUSE_TRACE_FACILITY")} in FW<br>`),e.stackInfo.stackEnd||(r+=`Stack End missing......: Enable macro ${s("configRECORD_STACK_HIGH_ADDRESS")} in FW<br>`),"[0]"!==t["pcTaskName-val"]&&"[1]"!==t["pcTaskName-val"]||(r+=`Thread Name missing....: Set macro ${s("configMAX_TASK_NAME_LEN")} to something greater than 1 in FW<br>`),this.ulTotalRunTime||(r+=`<br>Missing Runtime stats..:<br>\n                    /* To get runtime stats, modify the following macro in FreeRTOSConfig.h */<br>\n                    #define ${s("configGENERATE_RUN_TIME_STATS")}             1 /* 1: generate runtime statistics; 0: no runtime statistics */<br>\n                    /* Also, add the following two macros to provide a high speed counter -- something at least 10x faster than<br>\n                    ** your RTOS scheduler tick. One strategy could be to use a HW counter and sample its current value when needed<br>\n                    */<br>\n                    #define ${s("portCONFIGURE_TIMER_FOR_RUN_TIME_STATS()")} /* Define this to initialize your timer */<br>\n                    #define ${s("portGET_RUN_TIME_COUNTER_VALUE()")}${"&nbsp".repeat(9)}/* Define this to sample the counter */<br>\n                    `),r&&(r+="<br>Note: Make sure you consider the performance/resources impact for any changes to your FW.<br>\n",r=`<button class="help-button">Hints to get more out of the FreeRTOS viewer</button>\n<div class="help"><p>\n${r}\n</p></div>\n`,this.helpHtml=r)}catch(n){console.log(n)}}}updateCurrentThreadAddr(e){return new Promise(((t,r)=>{this.pxCurrentTCB.getValue(e).then((e=>{this.curThreadAddr=parseInt(e),t()}),(e=>{r(e)}))}))}updateTotalRuntime(e){return new Promise(((t,r)=>{this.ulTotalRunTime?this.ulTotalRunTime.getValue(e).then((e=>{this.ulTotalRunTimeVal=parseInt(e),t()}),(e=>{r(e)})):t()}))}refresh(e){return new Promise(((t,r)=>{if("stopped"!==this.progStatus)return void t();const n=new o.HrTimer;this.stale=!0,this.timeInfo=(new Date).toISOString(),this.uxCurrentNumberOfTasksVal=Number.MAX_SAFE_INTEGER,this.foundThreads=[],this.uxCurrentNumberOfTasks.getValue(e).then((r=>s(this,void 0,void 0,(function*(){try{if(this.uxCurrentNumberOfTasksVal=r?parseInt(r):Number.MAX_SAFE_INTEGER,this.uxCurrentNumberOfTasksVal>0&&this.uxCurrentNumberOfTasksVal<=this.maxThreads){let t=[];const r=yield this.pxReadyTasksLists.getVarChildren(e);for(const s of r)t.push(this.getThreadInfo(s.variablesReference,"READY",e));t.push(this.updateCurrentThreadAddr(e)),t.push(this.updateTotalRuntime(e)),yield Promise.all(t),t=[],t.push(this.getThreadInfo(this.xDelayedTaskList1,"BLOCKED",e)),t.push(this.getThreadInfo(this.xDelayedTaskList2,"BLOCKED",e)),t.push(this.getThreadInfo(this.xPendingReadyList,"PENDING",e)),yield Promise.all(t),t=[],t.push(this.getThreadInfo(this.xSuspendedTaskList,"SUSPENDED",e)),t.push(this.getThreadInfo(this.xTasksWaitingTermination,"TERMINATED",e)),yield Promise.all(t),t=[],this.foundThreads.length>0&&("??"!==this.foundThreads[0].ID?this.foundThreads.sort(((e,t)=>parseInt(e.display.ID)-parseInt(t.display.ID))):this.foundThreads.sort(((e,t)=>parseInt(e.display.Address)-parseInt(t.display.Address)))),this.finalThreads=[...this.foundThreads]}else this.finalThreads=[];this.stale=!1,this.timeInfo+=" in "+n.deltaMs()+" ms",t()}catch(e){t(),console.error("FreeRTOS.refresh() failed: ",e)}}))),(e=>{t(),console.error("FreeRTOS.refresh() failed: ",e)}))}))}getThreadInfo(e,t,r){return new Promise(((n,o)=>{if(!e||"number"!=typeof e&&!e.varReference||this.foundThreads.length>=this.uxCurrentNumberOfTasksVal)return void n();if("stopped"!==this.progStatus)return void o(new Error("Busy"));let c;c="number"!=typeof e?e.getVarChildrenObj(r):this.getVarChildrenObj(e,"task-list"),c.then((e=>s(this,void 0,void 0,(function*(){const s=parseInt(e["uxNumberOfItems-val"]),o=e["xListEnd-ref"];if(s<=0||!o)n();else try{let e=(yield this.getVarChildrenObj(o,"xListEnd"))["pxPrevious-ref"];for(let n=0;n<s;n++){const s=yield this.getVarChildrenObj(e,"pxPrevious"),n=parseInt(s["pvOwner-val"]),o=yield this.getExprValChildrenObj(`((TCB_t*)${i.hexFormat(n)})`,r),c=yield this.getExprVal("(char *)"+o["pcTaskName-exp"],r),h=c.match(/"([^*]*)"$/),l=h?h[1]:c,p=yield this.getStackInfo(o,165),d={},f=(e,t)=>{d[u[e]]=t},m=e=>d[u[e]];f(a.ID,o["uxTCBNumber-val"]||"??"),f(a.Address,i.hexFormat(n)),f(a.TaskName,l),f(a.Status,n===this.curThreadAddr?"RUNNING":t),f(a.StackStart,i.hexFormat(p.stackStart)),f(a.StackTop,i.hexFormat(p.stackTop)),f(a.StackEnd,p.stackEnd?i.hexFormat(p.stackEnd):"0x????????"),f(a.Priority,o["uxPriority-val"]),o["uxBasePriority-val"]&&f(a.Priority,m(a.Priority)+`,${o["uxBasePriority-val"]}`);const g=e=>void 0===e?"???":e.toString();if(f(a.StackSize,g(p.stackSize)),f(a.StackUsed,g(p.stackUsed)),f(a.StackFree,g(p.stackFree)),f(a.StackPeak,g(p.stackPeak)),o["ulRunTimeCounter-val"]&&this.ulTotalRunTimeVal){const e=(parseInt(o["ulRunTimeCounter-val"])/this.ulTotalRunTimeVal*100).toFixed(2);f(a.Runtime,e.padStart(5,"0")+"%")}else f(a.Runtime,"??.??%");const y={display:d,stackInfo:p};this.foundThreads.push(y),this.createHmlHelp(y,o),e=s["pxPrevious-ref"]}n()}catch(e){console.log("FreeRTOS read thread info error",e)}}))),(e=>{o(e)}))}))}getStackInfo(e,t){return s(this,void 0,void 0,(function*(){const r=e["pxStack-val"],s=e["pxTopOfStack-val"],n=e["pxEndOfStack-val"],o={stackStart:parseInt(r),stackTop:parseInt(s)},a=Math.abs(o.stackTop-o.stackStart);if(this.stackIncrements<0?o.stackFree=a:o.stackUsed=a,n){o.stackEnd=parseInt(n),o.stackSize=Math.abs(o.stackStart-o.stackEnd),this.stackIncrements<0?o.stackUsed=o.stackSize-a:o.stackFree=o.stackSize-a;const e={memoryReference:i.hexFormat(Math.min(o.stackStart,o.stackEnd)),count:o.stackSize};try{const r=yield this.session.customRequest("readMemory",e),s=Buffer.from(r.data,"base64");o.bytes=new Uint8Array(s);let n=this.stackIncrements<0?0:o.bytes.length-1;const i=this.stackIncrements<0?o.bytes.length:-1;let a=0;for(;n!==i&&o.bytes[n]===t;)n-=this.stackIncrements,a++;o.stackPeak=o.stackSize-a}catch(e){console.log(e)}}return o}))}getHTML(){let e="";if("none"===this.status)return"<p>RTOS not yet fully initialized. Will occur next time program pauses</p>\n";if(this.stale){let e="",t=this.lastValidHtml;return this.uxCurrentNumberOfTasksVal===Number.MAX_SAFE_INTEGER?(e='Count not read "uxCurrentNumberOfTasks". Perhaps program is busy or did not stop long enough',t=""):this.uxCurrentNumberOfTasksVal>this.maxThreads?(e=`FreeRTOS variable uxCurrentNumberOfTasks = ${this.uxCurrentNumberOfTasksVal} seems invalid`,t=""):t&&(e=" Following info from last query may be stale."),`<p>Unable to collect full RTOS information. ${e}</p>\n`+t}if(this.uxCurrentNumberOfTasksVal!==Number.MAX_SAFE_INTEGER&&this.finalThreads.length!==this.uxCurrentNumberOfTasksVal)e+=`<p>Expecting ${this.uxCurrentNumberOfTasksVal} threads, found ${this.finalThreads.length}. Thread data may be unreliable<p>\n`;else if(0===this.finalThreads.length)return`<p>No ${this.name} threads detected, perhaps RTOS not yet initialized or tasks yet to be created!</p>\n`;return e+=this.getHTMLCommon(u,c,this.finalThreads,this.timeInfo),this.lastValidHtml=e+(this.helpHtml||""),this.lastValidHtml}}t.RTOSFreeRTOS=h},1485:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getUri=t.RTOSTracker=t.RTOSSession=void 0;const n=r(6828),i={FreeRTOS:r(4883).RTOSFreeRTOS};class o{constructor(e){this.session=e,this.html="",this.allRTOSes=[],this.triedAndFailed=!1,this.lastFrameId=void 0;for(const t of Object.keys(i))this.allRTOSes.push(new i[t](e))}onStopped(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,r)=>s(this,void 0,void 0,(function*(){this.lastFrameId=e;const r=()=>{this.rtos?(this.html="<p>Failed to get RTOS information. Please report an issue if RTOS is actually running</p>\n",this.rtos.onStopped(e).then((()=>{this.html=this.rtos.getHTML(),t()}))):(this.triedAndFailed=!0,this.html="",t())};if(void 0===this.rtos&&this.allRTOSes.length>0){const s=[];for(const t of this.allRTOSes)s.push(t.tryDetect(e));Promise.all(s).then((e=>{for(const t of e)if("failed"===t.status){const e=this.allRTOSes.findIndex((e=>e===t));if(this.allRTOSes.splice(e,1),0===this.allRTOSes.length){r();break}}else if("initialized"===t.status){this.allRTOSes=[],this.rtos=t,r();break}this.allRTOSes.length>0&&(this.html="<p>RTOS detection in progress...</p>\n",t())}))}else r()}))))}))}onContinued(){this.lastFrameId=void 0,this.rtos&&this.rtos.onContinued()}onExited(){this.rtos&&this.rtos.onExited(),this.lastFrameId=void 0,this.rtos=void 0}getHTML(){return this.html}refresh(){return void 0!==this.lastFrameId?this.onStopped(this.lastFrameId):new Promise((e=>e()))}}t.RTOSSession=o;class a{constructor(e,t){this.session=e,this.handler=t,this.lastFrameId=void 0}onDidSendMessage(e){var t;const r=e;if(r)switch(r.type){case"event":{const e=r;e&&("stopped"===e.event?this.lastFrameId=void 0:"continued"===e.event&&this.handler.onContinued(this.session));break}case"response":{const e=r;e&&"stackTrace"===e.command&&(null===(t=e.body)||void 0===t?void 0:t.stackFrames)&&e.body.stackFrames.length>0&&void 0===this.lastFrameId&&(this.lastFrameId=e.body.stackFrames[0].id,this.handler.onStopped(this.session,this.lastFrameId));break}}}}t.RTOSTracker=class{constructor(e){this.context=e,this.sessionMap=new Map,this.provider=new c(e.extensionUri,this);const t=n.workspace.getConfiguration("cortex-debug",null);this.enabled=t.get("showRTOS",!1),this.visible=this.enabled,n.commands.executeCommand("setContext","cortex-debug:showRTOS",this.enabled),e.subscriptions.push(n.debug.onDidStartDebugSession(this.debugSessionStarted.bind(this)),n.debug.onDidTerminateDebugSession(this.debugSessionTerminated.bind(this)),n.debug.registerDebugAdapterTrackerFactory("cortex-debug",this),n.window.registerWebviewViewProvider(c.viewType,this.provider),n.workspace.onDidChangeConfiguration(this.settingsChanged.bind(this)),n.commands.registerCommand("cortex-debug.rtos.toggleRTOSPanel",this.toggleRTOSPanel.bind(this)),n.commands.registerCommand("cortex-debug.rtos.refresh",this.update.bind(this)))}settingsChanged(e){if(e.affectsConfiguration("cortex-debug.showRTOS")){const e=n.workspace.getConfiguration("cortex-debug",null);this.enabled=e.get("showRTOS",!1),n.commands.executeCommand("setContext","cortex-debug:showRTOS",this.enabled),this.update()}}createDebugAdapterTracker(e){return new a(e,this)}onStopped(e,t){return s(this,void 0,void 0,(function*(){for(const r of this.sessionMap.values())if(r.session.id===e.id){r.lastFrameId=t,this.enabled&&this.visible&&(yield r.onStopped(t),this.provider.updateHtml());break}}))}onContinued(e){for(const t of this.sessionMap.values())t.session.id===e.id&&t.onContinued()}debugSessionStarted(e){this.sessionMap.set(e.id,new o(e))}debugSessionTerminated(e){const t=this.sessionMap.get(e.id);t&&(t.onExited(),this.sessionMap.delete(e.id))}updateRTOSInfo(){return s(this,void 0,void 0,(function*(){const e=[];if(this.enabled&&this.visible)for(const t of this.sessionMap.values())e.push(t.refresh());return Promise.all(e)}))}toggleRTOSPanel(){this.enabled=!this.enabled,this.updateRTOSPanelStatus()}updateRTOSPanelStatus(){n.workspace.getConfiguration("cortex-debug",null).update("showRTOS",this.enabled),n.commands.executeCommand("setContext","cortex-debug:showRTOS",this.enabled)}notifyPanelDisposed(){this.enabled=this.visible=!1,this.updateRTOSPanelStatus()}visibilityChanged(e){return s(this,void 0,void 0,(function*(){if(e!==this.visible){if(this.visible=e,this.visible){const e="Some sessions are busy. RTOS panel will be updated when session is paused";for(const t of this.sessionMap.values())if(void 0===t.lastFrameId&&e){n.window.showInformationMessage(e);break}}try{yield this.update()}catch(e){}}}))}update(){return new Promise((e=>{this.enabled&&this.visible&&this.sessionMap.size||e(),this.busyHtml="<h4>Busy updating...</h4>\n",this.provider.updateHtml(),this.updateRTOSInfo().then((()=>{this.busyHtml=void 0,this.provider.updateHtml(),e()}),(t=>{this.busyHtml=void 0,this.provider.updateHtml(),e()}))}))}getHtml(){if(this.busyHtml)return this.busyHtml;if(0===this.sessionMap.size)return this.lastGoodHtml||"<p>No active/compatible debug sessions running.</p>\n";if(!this.visible||!this.enabled)return"<p>Contents are not visible, so no html generated</p>\n";let e="";for(const t of this.sessionMap.values()){const r=t.html,s=`Session Name: "${t.session.name}"`;t.rtos?e+=`<h4>${s+", "+t.rtos.name+" Detected."+(r?"":" (No data available yet)")}</h4>\n`+r:(e+=`<h4>${s+" -- No RTOS detected"}</h4>\n`,t.triedAndFailed?e+=`<p>Failed to match any supported RTOS. Supported RTOSes are (${Object.keys(i).join(", ")}). Please report issues and/or contribute code/knowledge to add your RTOS</p>\n`:e+="<p>Try refreshing this panel. RTOS detection may be still in progress</p>\n")}return this.lastGoodHtml=e,e}};class c{constructor(e,t){this.extensionUri=e,this.parent=t}resolveWebviewView(e,t,r){this.webviewView=e,this.parent.visible=this.webviewView.visible,this.parent.enabled=!0,e.webview.options={enableScripts:!0,localResourceRoots:[this.extensionUri]},this.webviewView.description="View RTOS internals",this.webviewView.onDidDispose((e=>{this.webviewView=void 0,this.parent.notifyPanelDisposed()})),this.webviewView.onDidChangeVisibility((e=>{this.parent.visibilityChanged(this.webviewView.visible)})),this.updateHtml(),e.webview.onDidReceiveMessage((e=>{"refresh"===(null==e?void 0:e.type)&&this.parent.update()}))}showAndFocus(){this.webviewView&&this.webviewView.show(!1)}updateHtml(){this.webviewView&&(this.webviewView.webview.html=this.getHtmlForWebview())}getHtmlForWebview(){var e;const t=null===(e=this.webviewView)||void 0===e?void 0:e.webview;if(!t)return"";if(!this.parent.enabled)return'<!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t<title>RTOS Threads</title>\n\t\t\t</head>\n\t\t\t<body>\n                \'<p>Currently disabled. Enable setting "cortex-debug.showRTOS" or use Command "Cortex Debug: Toggle RTOS Panel" to see any RTOS info</p>\n\'\n\t\t\t</body>\n\t\t\t</html>';const r=u(t,this.extensionUri,["webview","node_modules","@vscode","webview-ui-toolkit","dist","toolkit.js"]),s=t.asWebviewUri(n.Uri.joinPath(this.extensionUri,"resources","rtos.js")),i=t.asWebviewUri(n.Uri.joinPath(this.extensionUri,"resources","rtos.css")),o=this.parent.getHtml(),a=function(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();return`\n            <!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t\x3c!--\n\t\t\t\t\tUse a content security policy to only allow loading images from https or from our extension directory,\n\t\t\t\t\tand only allow scripts that have a specific nonce.\n\t\t\t\t--\x3e\n\t\t\t\t<meta http-equiv="Content-Security-Policy" content="default-src 'none'; style-src ${t.cspSource}; script-src 'nonce-${a}';">\n\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n                <link href="${i}" rel="stylesheet">\n\t\t\t\t\n\t\t\t\t<title>RTOS Threads</title>\n\t\t\t</head>\n\t\t\t<body>\n                ${o}\n                <script type="module" nonce="${a}" src="${r}"><\/script>\n\t\t\t\t<script type="module" nonce="${a}" src="${s}"><\/script>\n\t\t\t</body>\n\t\t\t</html>`}}function u(e,t,r){return e.asWebviewUri(n.Uri.joinPath(t,...r))}c.viewType="cortex-debug.rtos",t.getUri=u},7561:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTTTerminal=void 0;const s=r(6828),n=r(7147),i=r(3200),o=r(8477),a=r(4359),c=r(530);class u{constructor(e,t,r){this.context=e,this.options=t,this.inUse=!0,this.hrTimer=new i.HrTimer,this.ptyOptions=this.createTermOptions(null),this.createTerminal(),this.sanitizeEncodings(this.options),this.connectToSource(r),this.openLogFile()}get terminal(){return this.ptyTerm?this.ptyTerm.terminal:null}connectToSource(e){this.hrTimer=new i.HrTimer,this.binaryFormatter=new p(this.ptyTerm,this.options.encoding,this.options.scale),e.once("disconnected",(()=>{this.onClose()})),e.on("error",(e=>{const t=e.code;"ECONNRESET"===t||("ECONNREFUSED"===t?o.magentaWrite(`${e}\n.`,this.ptyTerm):o.magentaWrite(`${e}\n`,this.ptyTerm))})),e.on("data",(e=>{this.onData(e)})),e.connError?(this.source=e,o.magentaWrite(`${e.connError.message}\n`,this.ptyTerm)):e.connected?this.source=e:e.once("connected",(()=>{this.source=e}))}onClose(){if(this.source=null,this.inUse=!1,!this.options.noclear&&this.logFd>=0)try{n.closeSync(this.logFd)}catch(e){}this.logFd=-1,this.ptyTerm.write(c.RESET+"\n"),o.magentaWrite(`RTT connection on TCP port ${this.options.tcpPort} ended. Waiting for next connection...`,this.ptyTerm)}onData(e){try{this.logFd>=0&&n.writeSync(this.logFd,e),"binary"===this.options.type?this.binaryFormatter.writeBinary(e):this.writeNonBinary(e)}catch(e){o.magentaWrite(`Error writing data: ${e}\n`,this.ptyTerm)}}openLogFile(){if(this.logFd=-1,this.options.logfile)try{this.logFd=n.openSync(this.options.logfile,"w")}catch(e){const t=`Could not open file ${this.options.logfile} for writing. ${e.toString()}`;console.error(t),o.magentaWrite(t,this.ptyTerm)}}writeNonBinary(e){let t=0,r="";this.options.timestamp&&(r=this.hrTimer.createDateTimestamp()+" ");for(let s=1;s<e.length;s++){if(255!==e[s-1])continue;const n=e[s];(n>=48&&n<=57||n>=65&&n<=90)&&(s>=1&&this.ptyTerm.writeWithHeader(e.slice(t,s-1),r),this.ptyTerm.write(`<switch to vTerm#${String.fromCharCode(n)}>\n`),e=e.slice(s+1),s=0,t=0)}e.length>0&&this.ptyTerm.writeWithHeader(e,r)}createTermOptions(e){return{name:u.createTermName(this.options,e),prompt:this.createPrompt(),inputMode:this.options.inputmode||i.TerminalInputMode.COOKED}}createTerminal(){this.ptyTerm=new o.PtyTerminal(this.createTermOptions(null)),this.ptyTerm.on("data",this.sendData.bind(this)),this.ptyTerm.on("close",this.terminalClosed.bind(this))}createPrompt(){return this.options.noprompt?"":this.options.prompt||`RTT:${this.options.port}> `}static createTermName(e,t){const r="binary"===e.type?`enc:${l(e.encoding)}`:e.type,n=e.label||`RTT Ch:${e.port} ${r}`;let i=n,o=1;for(;s.window.terminals.findIndex((e=>e.name===i))>=0;){if(t===i)return t;i=`${n}-${o}`,o++}return i}terminalClosed(){this.dispose()}sendData(e){if(this.source)try{("string"==typeof e||e instanceof String)&&this.options.inputmode===i.TerminalInputMode.COOKED&&(e=Buffer.from(e,this.options.iencoding)),this.source.write(e)}catch(e){console.error(`RTTTerminal:sendData failed ${e}`)}}sanitizeEncodings(e){var t;e.encoding=l(e.encoding),e.iencoding=(t=(t=e.iencoding)?t.toLowerCase():"")in i.TextEncoding?t:i.TextEncoding.UTF8}tryReuse(e,t){if(!this.ptyTerm||!this.ptyTerm.terminal)return!1;this.sanitizeEncodings(this.options);const r=u.createTermName(e,this.ptyOptions.name);if(r===this.ptyOptions.name){if(this.inUse=!0,!this.options.noclear||this.options.type!==e.type){this.ptyTerm.clearTerminalBuffer();try{this.logFd>=0&&(n.closeSync(this.logFd),this.logFd=-1),this.openLogFile()}catch(e){o.magentaWrite(`Error: closing fille ${e}\n`,this.ptyTerm)}}return this.options=e,this.ptyOptions=this.createTermOptions(r),this.ptyTerm.resetOptions(this.ptyOptions),this.connectToSource(t),!0}return!1}dispose(){if(this.ptyTerm.dispose(),this.logFd>=0){try{n.closeSync(this.logFd)}catch(e){}this.logFd=-1}}}function h(e,t,r=" "){return e.length>=t?e:e=r.repeat(t-e.length)+e}function l(e){return(e=e?e.toLowerCase():"")in i.BinaryEncoding||(e=i.BinaryEncoding.UNSIGNED),e}t.RTTTerminal=u;class p{constructor(e,t,r){this.ptyTerm=e,this.encoding=t,this.scale=r,this.bytesNeeded=4,this.buffer=Buffer.alloc(4),this.bytesRead=0,this.hrTimer=new i.HrTimer,this.bytesRead=0,this.encoding=l(t),this.scale=r||1}writeBinary(e){const t=Buffer.from(e),r=this.hrTimer.createDateTimestamp();for(const e of t)if(this.buffer[this.bytesRead]=e,this.bytesRead=this.bytesRead+1,this.bytesRead===this.bytesNeeded){let e="";for(const t of this.buffer)e+=t<=32||t>=127&&t<=159?".":String.fromCharCode(t);this.buffer.toString();const t=h(this.buffer.toString("hex"),8,"0"),i=(s=this.buffer,n=this.encoding,a.decoders[n]?a.decoders[n](s):a.decoders.unsigned(s)),o=h(`${i}`,12),c=h(""+i*this.scale,12);this.ptyTerm.write(`${r} ${e}  0x${t} - ${o} - ${c}\n`),this.bytesRead=0}var s,n}}},5287:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GDBServerConsole=t.GDBServerConsoleInstance=void 0;const s=r(1808),n=r(6828),i=r(7147),o=r(2037),a=r(1017),c=r(8477),u=r(3200);let h=-1;class l{constructor(){this.ptyTerm=null,this.toBackend=null,this.ptyOptions={name:"gdb-server",prompt:"",inputMode:u.TerminalInputMode.COOKED}}static newOrExistingConsole(){let e=l.allConsoles.find((e=>e.isClosed()));return e||(e=new l,l.allConsoles.push(e),e)}static disposeAll(){const e=l.allConsoles;l.allConsoles=[];for(const t of e)t.toBackend&&(t.toBackend.destroy(),t.toBackend=null),t.ptyTerm&&t.ptyTerm.dispose()}newBackendConnection(e){this.createAndShowTerminal(),this.toBackend=e,this.ptyTerm.resume(),this.clearTerminal(),this.debugMsg('onBackendConnect: gdb-server session connected. You can switch to "DEBUG CONSOLE" to see GDB interactions.'),e.setKeepAlive(!0),e.on("close",(()=>{this.debugMsg("onBackendConnect: gdb-server session closed"),c.magentaWrite("GDB server session ended. This terminal will be reused, waiting for next session to start...",this.ptyTerm),this.toBackend=null,this.ptyTerm.pause()})),e.on("data",(e=>{this.ptyTerm.write(e),this.logData(e)})),e.on("error",(e=>{this.debugMsg(`GDBServerConsole: onBackendConnect: gdb-server program client error ${e}`),this.toBackend=null,this.ptyTerm.pause()}))}isClosed(){return null===this.toBackend}createAndShowTerminal(){this.ptyTerm||this.setupTerminal()}clearTerminal(){this.ptyTerm.clearTerminalBuffer()}setupTerminal(){this.ptyOptions.name=l.createTermName(this.ptyOptions.name,null),this.ptyTerm=new c.PtyTerminal(this.ptyOptions),this.ptyTerm.terminal.show(),this.ptyTerm.on("close",(()=>{this.onTerminalClosed()})),this.ptyTerm.on("data",(e=>{this.sendToBackend(e)})),null===this.toBackend?(c.magentaWrite("Waiting for gdb server to start...",this.ptyTerm),this.ptyTerm.pause()):(c.magentaWrite("Resuming connection to gdb server...\n",this.ptyTerm),this.ptyTerm.resume())}onTerminalClosed(){this.ptyTerm=null,this.toBackend&&setTimeout((()=>{n.window.showInformationMessage("gdb-server terminal closed unexpectedly. Trying to reopen it"),this.setupTerminal()}),10)}sendToBackend(e){this.toBackend&&(this.toBackend.write(e.toString()),this.toBackend.uncork())}logData(e){p.logDataStatic(this.ptyTerm,e)}debugMsg(e){p.debugMsgStatic(this.ptyTerm,e)}static createTermName(e,t){let r=e,s=1;for(;n.window.terminals.findIndex((e=>e.name===r))>=0;){if(t===r)return t;r=`${e}-${s}`,s+=1}return r}}t.GDBServerConsoleInstance=l,l.allConsoles=[];class p{constructor(e,t=""){this.context=e,this.logFileName=t,this.toBackendServer=null,this.toBackend=null,this.toBackendPort=-1,this.logFName="",this.allConsoles=[],this.createLogFile(t)}createLogFile(e){this.logFName=e;const t=!!this.logFName;if(h>=0)try{i.closeSync(h)}finally{h=-1}try{if(this.logFName){const e=a.dirname(this.logFName);e&&i.mkdirSync(e,{recursive:!0}),this.logFName=this.logFName.replace("${PID}",process.pid.toString())}else{const e=o.tmpdir();this.logFName=`${e}/gdb-server-console-${process.pid}.log`}h=i.openSync(this.logFName,"w")}catch(e){t&&n.window.showErrorMessage(`Could not open log file: ${this.logFName}\n${e}`)}}isServerAlive(){return null!==this.toBackendServer}static debugMsgStatic(e,t){try{t=`[${(new Date).toISOString()}] SERVER CONSOLE DEBUG: `+t,console.log(t),e&&(t+=t.endsWith("\n")?"":"\n",c.magentaWrite(t,e)),p.logDataStatic(e,t)}finally{}}startServer(){return new Promise(((e,t)=>{u.getAnyFreePort(55878).then((r=>{this.toBackendPort=r;const n=s.createServer(this.onBackendConnect.bind(this));n.listen(this.toBackendPort,"127.0.0.1",(()=>{this.toBackendServer=n,p.BackendPort=this.toBackendPort,e()})),n.on("error",(e=>{console.error(e),t(e)})),n.on("close",(()=>{this.toBackendServer=null}))}))}))}onBackendConnect(e){l.newOrExistingConsole().newBackendConnection(e)}static logDataStatic(e,t){try{if(h>=0){if(!e||!e.isReady){const e=`[${(new Date).toISOString()}] SERVER CONSOLE DEBUG: ******* Terminal not yet ready, buffering... ******`;console.log(e)}i.writeFileSync(h,t.toString()),i.fdatasyncSync(h)}}catch(e){h=-1}}dispose(){l.disposeAll()}}t.GDBServerConsole=p,p.BackendPort=-1},7525:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SVDParser=t.AccessType=void 0;const s=r(2532),n=r(4051),i=r(9969),o=r(2942),a=r(3822),c=r(5055),u=r(7147);var h;!function(e){e[e.ReadOnly=1]="ReadOnly",e[e.ReadWrite=2]="ReadWrite",e[e.WriteOnly=3]="WriteOnly"}(h=t.AccessType||(t.AccessType={}));const l={"read-only":h.ReadOnly,"write-only":h.WriteOnly,"read-write":h.ReadWrite,writeOnce:h.WriteOnly,"read-writeOnce":h.ReadWrite};class p{static parseSVD(e,t,r){return p.gapThreshold=r,p.enumTypeValuesMap={},p.peripheralRegisterMap={},new Promise(((r,s)=>{u.readFile(t,"utf8",((t,n)=>{t?s(t):c.parseString(n,((t,n)=>{if(t)return void s(t);const a={},c={accessType:h.ReadWrite,size:32,resetValue:0};n.device.resetValue&&(c.resetValue=o.parseInteger(n.device.resetValue[0])),n.device.size&&(c.size=o.parseInteger(n.device.size[0])),n.device.access&&(c.accessType=l[n.device.access[0]]),n.device.peripherals[0].peripheral.forEach((e=>{const t=e.name[0];a[t]=e}));for(const e in a){const t=a[e];if(t.$&&t.$.derivedFrom){const r=a[t.$.derivedFrom];a[e]=Object.assign(Object.assign({},r),t)}}const u=[];for(const t in a)try{u.push(p.parsePeripheral(e,a[t],c))}catch(e){s(e)}u.sort(i.PeripheralNode.compare);for(const e of u)e.collectRanges([]);r(u)}))}))}))}static cleanupDescription(e){return e.replace("\r","").replace(/\n\s*/g," ")}static parseFields(e,t){const r=[];return null==e||e.map((e=>{let s,n;const i=this.cleanupDescription(e.description?e.description[0]:"");if(e.bitOffset&&e.bitWidth)s=o.parseInteger(e.bitOffset[0]),n=o.parseInteger(e.bitWidth[0]);else if(e.bitRange){let t=e.bitRange[0];t=t.substring(1,t.length-1),t=t.split(":");const r=o.parseInteger(t[0]),i=o.parseInteger(t[1]);n=r-i+1,s=i}else{if(!e.msb||!e.lsb)throw new Error(`Unable to parse SVD file: field ${e.name[0]} must have either bitOffset and bitWidth elements, bitRange Element, or msb and lsb elements.`);{const t=o.parseInteger(e.msb[0]),r=o.parseInteger(e.lsb[0]);n=t-r+1,s=r}}let c=null;if(e.enumeratedValues){c={};const r=e.enumeratedValues[0];if(r.$&&r.$.derivedFrom){const t=p.enumTypeValuesMap[r.$.derivedFrom];if(!t)throw new Error(`Invalid derivedFrom=${r.$.derivedFrom} for enumeratedValues of field ${e.name[0]}`);c=t}else if(r.enumeratedValue.map((e=>{if(e.value&&e.value.length>0){const t=e.name[0],r=this.cleanupDescription(e.description?e.description[0]:""),s=e.value[0].toLowerCase(),n=o.parseInteger(s);c[n]=new a.EnumeratedValue(t,r,n)}})),r.name&&r.name[0]){let s=r.name[0];for(const r of[null,e.name[0],t.name,t.parent.name])s=r?r+"."+s:s,p.enumTypeValuesMap[s]=c}}const u={name:e.name[0],description:i,offset:s,width:n,enumeration:c};if(e.access&&(u.accessType=l[e.access[0]]),e.dim){if(!e.dimIncrement)throw new Error(`Unable to parse SVD file: field ${e.name[0]} has dim element, with no dimIncrement element.`);const n=o.parseInteger(e.dim[0]),i=o.parseInteger(e.dimIncrement[0]);let c=[];if(e.dimIndex)c=o.parseDimIndex(e.dimIndex[0],n);else for(let e=0;e<n;e++)c.push(`${e}`);const h=e.name[0],l=s;for(let e=0;e<n;e++){const s=h.replace("%s",c[e]);r.push(new a.PeripheralFieldNode(t,Object.assign(Object.assign({},u),{name:s,offset:l+i*e})))}}else r.push(new a.PeripheralFieldNode(t,Object.assign({},u)))})),r}static parseRegisters(e,t){const r=[...e],n=[],i={};for(const e of r){const r=e.name[0];i[r]=e,p.peripheralRegisterMap[t.name+"."+r]=e}let a=0;for(const e of r){const s=e.$?e.$.derivedFrom:"";if(s){const n=e.name[0],o=i[s]||p.peripheralRegisterMap[s];if(!o)throw new Error(`SVD error: Invalid 'derivedFrom' "${s}" for register "${n}"`);const c=Object.assign(Object.assign({},o),e);delete c.$.derivedFrom,c.$._derivedFrom=s,i[n]=c,p.peripheralRegisterMap[t.name+"."+n]=c,r[a]=c}a++}for(const e of r){const r={};if(e.access&&(r.accessType=l[e.access[0]]),e.size&&(r.size=o.parseInteger(e.size[0])),e.resetValue&&(r.resetValue=o.parseInteger(e.resetValue[0])),e.dim){if(!e.dimIncrement)throw new Error(`Unable to parse SVD file: register ${e.name[0]} has dim element, with no dimIncrement element.`);const i=o.parseInteger(e.dim[0]),a=o.parseInteger(e.dimIncrement[0]);let c=[];if(e.dimIndex)c=o.parseDimIndex(e.dimIndex[0],i);else for(let e=0;e<i;e++)c.push(`${e}`);const u=e.name[0],h=this.cleanupDescription(e.description?e.description[0]:""),l=o.parseInteger(e.addressOffset[0]);for(let o=0;o<i;o++){const i=u.replace("%s",c[o]),d=h.replace("%s",c[o]),f=new s.PeripheralRegisterNode(t,Object.assign(Object.assign({},r),{name:i,description:d,addressOffset:l+a*o}));e.fields&&1===e.fields.length&&p.parseFields(e.fields[0].field,f),n.push(f)}}else{const i=this.cleanupDescription(e.description?e.description[0]:""),a=new s.PeripheralRegisterNode(t,Object.assign(Object.assign({},r),{name:e.name[0],description:i,addressOffset:o.parseInteger(e.addressOffset[0])}));e.fields&&1===e.fields.length&&p.parseFields(e.fields[0].field,a),n.push(a)}}return n.sort(((e,t)=>e.offset<t.offset?-1:e.offset>t.offset?1:0)),n}static parseClusters(e,t){const r=[];return e?(e.forEach((e=>{const s={};if(e.access&&(s.accessType=l[e.access[0]]),e.size&&(s.size=o.parseInteger(e.size[0])),e.resetValue&&(s.resetValue=o.parseInteger(e.resetValue)),e.dim){if(!e.dimIncrement)throw new Error(`Unable to parse SVD file: cluster ${e.name[0]} has dim element, with no dimIncrement element.`);const i=o.parseInteger(e.dim[0]),a=o.parseInteger(e.dimIncrement[0]);let c=[];if(e.dimIndex)c=o.parseDimIndex(e.dimIndex[0],i);else for(let e=0;e<i;e++)c.push(`${e}`);const u=e.name[0],h=this.cleanupDescription(e.description?e.description[0]:""),l=o.parseInteger(e.addressOffset[0]);for(let o=0;o<i;o++){const i=u.replace("%s",c[o]),d=h.replace("%s",c[o]),f=new n.PeripheralClusterNode(t,Object.assign(Object.assign({},s),{name:i,description:d,addressOffset:l+a*o}));e.register&&p.parseRegisters(e.register,f),r.push(f)}}else{const i=this.cleanupDescription(e.description?e.description[0]:""),a=new n.PeripheralClusterNode(t,Object.assign(Object.assign({},s),{name:e.name[0],description:i,addressOffset:o.parseInteger(e.addressOffset[0])}));e.register&&(p.parseRegisters(e.register,a),r.push(a))}})),r):[]}static parsePeripheral(e,t,r){let s=0;if(t.addressBlock)for(const e of t.addressBlock){const t=o.parseInteger(e.offset[0]),r=o.parseInteger(e.size[0]);s=Math.max(s,t+r)}const n={name:t.name[0],baseAddress:o.parseInteger(t.baseAddress?t.baseAddress[0]:0),description:this.cleanupDescription(t.description?t.description[0]:""),totalLength:s};t.access&&(n.accessType=l[t.access[0]]),t.size&&(n.size=o.parseInteger(t.size[0])),t.resetValue&&(n.resetValue=o.parseInteger(t.resetValue[0])),t.groupName&&(n.groupName=t.groupName[0]);const a=new i.PeripheralNode(e,p.gapThreshold,n);return t.registers&&(t.registers[0].register&&p.parseRegisters(t.registers[0].register,a),t.registers[0].cluster&&p.parseClusters(t.registers[0].cluster,a)),a}}t.SVDParser=p,p.enumTypeValuesMap={},p.peripheralRegisterMap={},p.gapThreshold=16},1619:(e,t)=>{"use strict";var r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.TimestampType=t.PacketType=void 0,(s=t.PacketType||(t.PacketType={}))[s.HARDWARE=1]="HARDWARE",s[s.SOFTWARE=2]="SOFTWARE",s[s.TIMESTAMP=3]="TIMESTAMP",(r=t.TimestampType||(t.TimestampType={}))[r.CURRENT=0]="CURRENT",r[r.DELAYED=1]="DELAYED",r[r.EVENT_DELAYED=2]="EVENT_DELAYED",r[r.EVENT_TIME_DELAYED=3]="EVENT_TIME_DELAYED"},8904:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RTTCore=t.SWOCore=t.SWORTTCoreBase=void 0;const s=r(6828),n=r(1017),i=r(7147),o=r(29),a=r(8376),c=r(1887),u=r(8125),h=r(2361),l=r(1619),p=r(4359),d=r(3200),f=r(473);var m;!function(e){e[e.IDLE=1]="IDLE",e[e.UNSYNCED=2]="UNSYNCED",e[e.TIMESTAMP=3]="TIMESTAMP",e[e.HARDWARE_EVENT=4]="HARDWARE_EVENT",e[e.SOFTWARE_EVENT=5]="SOFTWARE_EVENT",e[e.RESERVED=6]="RESERVED"}(m||(m={}));class g extends h.EventEmitter{constructor(){super(),this.syncBuffer=new f(6),this.status=m.IDLE,this.rxCount=0,this.timestamp=0,this.syncBuffer.enq(255),this.syncBuffer.enq(255),this.syncBuffer.enq(255),this.syncBuffer.enq(255),this.syncBuffer.enq(255),this.syncBuffer.enq(255)}resetRxPacket(e,t,r){this.rxBuffer=Buffer.alloc(t,0),this.rxTargetLength=t,this.rxPacketType=r,this.rxPort=e,this.rxCount=0}rxWriteByte(e){return this.rxBuffer.writeUInt8(e,this.rxCount),this.rxCount++,this.rxCount===this.rxTargetLength}getRxPacket(){return{type:this.rxPacketType,port:this.rxPort,size:this.rxCount,data:this.rxBuffer}}checkSync(e){this.syncBuffer.enq(e);const t=this.syncBuffer.peekN(6);return 128===t[5]&&0===t[4]&&0===t[3]&&0===t[2]&&0===t[1]&&0===t[0]}processByte(e){let t=this.status;if(this.checkSync(e))t=m.IDLE,this.emit("synchronized");else switch(this.status){case m.IDLE:if(0===e)break;if(112===e)this.emit("overflow");else if(0==(15&e))this.timestamp=0,this.resetRxPacket(-1,5,l.PacketType.TIMESTAMP),this.rxWriteByte(e),128&e?t=m.TIMESTAMP:this.emit("timestamp",this.getRxPacket());else if(0!=(3&e)){let r=3&e;3===r&&(r=4);const s=(248&e)>>>3;0!=(4&e)?(this.resetRxPacket(s,r,l.PacketType.HARDWARE),t=m.HARDWARE_EVENT):(this.resetRxPacket(s,r,l.PacketType.SOFTWARE),t=m.SOFTWARE_EVENT)}else t=m.RESERVED,this.emit("lost-synchronization");break;case m.TIMESTAMP:this.rxWriteByte(e),0==(128&e)&&(this.emit("timestamp",this.getRxPacket()),t=m.IDLE);break;case m.UNSYNCED:break;case m.SOFTWARE_EVENT:this.rxWriteByte(e)&&(this.emit("software-event",this.getRxPacket()),t=m.IDLE);break;case m.HARDWARE_EVENT:this.rxWriteByte(e)&&(this.emit("hardware-event",this.getRxPacket()),t=m.IDLE);break;case m.RESERVED:0==(128&e)&&(t=m.IDLE)}this.status=t}}class y{constructor(e,t){this.extensionPath=e,this.graphs=t,this.currentStatus="stopped",this.processors=[],this.lastId=0,this.now=new Date;const r=this.now.toTimeString(),i={preserveFocus:!0,viewColumn:s.ViewColumn.Beside},o={retainContextWhenHidden:!0,enableFindWidget:!1,enableCommandUris:!1,enableScripts:!0,localResourceRoots:[s.Uri.file(n.join(e,"dist"))]},a=`SWO/RTT Graphs [${r}]`;this.viewPanel=s.window.createWebviewPanel("cortex-debug.grapher",a,i,o),this.viewPanel.webview.onDidReceiveMessage((e=>{this.onMessage(e)})),this.viewPanel.webview.html=this.getHTML()}getHTML(){const e=s.Uri.file(n.join(this.extensionPath,"dist","grapher.bundle.js")).with({scheme:"vscode-resource"}),t=d.getNonce();let r=i.readFileSync(n.join(this.extensionPath,"resources","grapher.html"),{encoding:"utf8",flag:"r"});return r=r.replace(/\$\{nonce\}/g,t).replace(/\$\{scriptUri\}/g,e.toString()),r}registerProcessors(e){e.on("message",this.sendMessage.bind(this)),this.processors.push(e)}clearProcessors(){this.processors=[]}sendMessage(e){e.timestamp=(new Date).getTime(),this.viewPanel.webview.postMessage(e)}onMessage(e){if("init"===e.type){const e={type:"configure",graphs:this.graphs,status:this.currentStatus};this.viewPanel.webview.postMessage(e)}}}class b{constructor(){this.webview=null}debugSessionTerminated(){if(this.webview){const e={type:"status",status:"terminated"};this.webview.sendMessage(e)}}debugStopped(){if(this.webview){const e={type:"status",status:"stopped"};this.webview.sendMessage(e)}}debugContinued(){if(this.webview){const e={type:"status",status:"continued"};this.webview.sendMessage(e)}}}t.SWORTTCoreBase=b,t.SWOCore=class extends b{constructor(e,t,r,n){super(),this.session=e,this.source=t,this.processors=[],this.connected=!1,this.itmDecoder=new g,e.customRequest("load-function-symbols").then((e=>{this.functionSymbols=e.functionSymbols}),(e=>{this.functionSymbols=[]})),this.source.connected?this.connected=!0:this.source.on("connected",(()=>{this.connected=!0})),this.source.on("data",this.handleData.bind(this)),this.source.on("disconnected",this.handleDisconnected.bind(this)),r.graphConfig.length>=1&&(this.webview=new y(n,r.graphConfig)),r.swoConfig.decoders.forEach((e=>{let t;switch(e.type){case"console":this.processors.push(new o.SWOConsoleProcessor(e));break;case"binary":this.processors.push(new a.SWOBinaryProcessor(e));break;case"graph":t=new c.SWORTTGraphProcessor(e),this.webview&&this.webview.registerProcessors(t),this.processors.push(t);break;case"advanced":try{t=new u.SWORTTAdvancedProcessor(e),this.webview&&this.webview.registerProcessors(t),this.processors.push(t)}catch(e){s.window.showErrorMessage(`Error Initializing Advanced Decoder: ${e.toString()}`)}}})),this.itmDecoder.on("software-event",this.processPacket.bind(this)),this.itmDecoder.on("hardware-event",this.processPacket.bind(this)),this.itmDecoder.on("synchronized",this.synchronized.bind(this)),this.itmDecoder.on("lost-synchronization",this.lostSynchronization.bind(this)),this.itmDecoder.on("timestamp",this.processTimestampPacket.bind(this)),this.itmDecoder.on("overflow",this.overflow.bind(this))}handleDisconnected(e){for(const e of this.processors)e.close();this.processors=[],this.connected=!1}handleData(e){for(let t=0;t<e.length;t++){const r=e.readUInt8(t);this.itmDecoder.processByte(r)}}processPacket(e){if(e.type===l.PacketType.SOFTWARE)this.processors.forEach((t=>t.softwareEvent(e)));else if(e.type===l.PacketType.HARDWARE)if(this.processors.forEach((t=>t.hardwareEvent(e))),2===e.port){if(this.webview){const t=p.parseUnsigned(e.data),r=this.getFunctionAtAddress(t),s={type:"program-counter",counter:t,function:r?r.name:"**Unknown**"};this.webview.sendMessage(s)}}else console.log("Received Other Hardware Packet: ",e)}processTimestampPacket(e){let t=0;for(let r=1;r<e.size;r++)t<<=7,t|=127&e.data.readUInt8(r)}overflow(){}lostSynchronization(){this.processors.forEach((e=>e.lostSynchronization()))}synchronized(){this.processors.forEach((e=>e.synchronized()))}calculatePortMask(e){let t=0;return e.forEach((e=>{if("advanced"===e.type){const r=e;for(const e of r.ports)t=(t|1<<e)>>>0}else t=(t|1<<e.port)>>>0})),t}dispose(){this.processors.forEach((e=>e.dispose())),this.processors=null,this.webview&&this.webview.clearProcessors(),this.connected=!1}getFunctionAtAddress(e){const t=this.functionSymbols.filter((t=>t.address<=e&&t.address+t.length>e));if(t&&0!==t.length)return t[0]}};class v extends h.EventEmitter{constructor(e,t,r){super(),this.source=e,this.port=t,this.bytesNeeded=r,this.connected=!1,this.bytesRead=0,this.buffer=Buffer.alloc(r),this.source.connected?this.connected=!0:this.source.on("connected",(()=>{this.connected=!0})),this.source.on("data",this.onData.bind(this)),this.source.on("disconnected",(()=>{this.connected=!1}))}onData(e){const t="string"==typeof e?Buffer.from(e):e;for(const e of t)if(this.buffer[this.bytesRead]=e,this.bytesRead=this.bytesRead+1,this.bytesRead===this.bytesNeeded){const e={type:l.PacketType.SOFTWARE,port:this.port,size:this.bytesRead,data:Buffer.from(this.buffer)};this.emit("software-event",e),this.bytesRead=0}}dispose(){}}t.RTTCore=class extends b{constructor(e,t,r){super(),this.sources=e,this.processors=[],this.decoders=[],t.graphConfig.length>=1&&(this.webview=new y(r,t.graphConfig)),t.rttConfig.decoders.forEach((e=>{switch(e.type){case"graph":this.addRTTDecoder(this.sources[e.port]);const t=new c.SWORTTGraphProcessor(e);this.webview&&this.webview.registerProcessors(t),this.processors.push(t);break;case"advanced":try{for(const t of e.ports)this.addRTTDecoder(this.sources[t]);const t=new u.SWORTTAdvancedProcessor(e);this.webview&&this.webview.registerProcessors(t),this.processors.push(t);break}catch(e){s.window.showErrorMessage(`Error Initializing Advanced Decoder: ${e.toString()}`)}}}))}addRTTDecoder(e){if(e){const t=new v(e,e.channel,4);t.on("software-event",this.onPacket.bind(this)),this.decoders.push(t)}else console.error("Null source?")}onPacket(e){for(const t of this.processors)t.softwareEvent(e)}dispose(){this.processors.forEach((e=>e.dispose())),this.processors=null,this.webview&&this.webview.clearProcessors()}}},8125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWORTTAdvancedProcessor=void 0;const s=r(6828),n=r(2361),i=require;class o extends n.EventEmitter{constructor(e){super(),this.format="advanced",this.ports=[];const t=e.decoder,r=i.resolve(t);i.cache[r]&&delete i.cache[r];const n=i(t);if(!n||!n.default)throw new Error(`Unable to load decoder class from: ${e.decoder}`);{const t=n.default;try{this.decoder=new t,this.decoder.init(e,this.displayOutput.bind(this),this.graphData.bind(this))}catch(e){throw new Error(`Error instantiating decoder class: ${e.toString()}`)}this.ports=e.ports,this.output=s.window.createOutputChannel(`SWO: ${this.decoder.outputLabel()||""} [type: ${this.decoder.typeName()}]`)}}softwareEvent(e){-1!==this.ports.indexOf(e.port)&&this.decoder.softwareEvent(e.port,e.data)}hardwareEvent(e){}synchronized(){this.decoder.synchronized()}lostSynchronization(){this.decoder.lostSynchronization()}displayOutput(e,t=!0){this.output.append(e)}graphData(e,t){const r={type:"data",data:e,id:t};this.emit("data",r)}dispose(){this.output.dispose(),this.close()}close(){}}t.SWORTTAdvancedProcessor=o},8376:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWOBinaryProcessor=void 0;const s=r(6828),n=r(7147),i=r(4359),o=r(8477),a=r(3200);t.SWOBinaryProcessor=class{constructor(e){if(this.format="binary",this.useTerminal=!0,this.ptyTerm=null,this.hrTimer=new a.HrTimer,this.logFd=-1,this.port=e.port,this.scale=e.scale||1,this.encoding=(e.encoding||"unsigned").replace(".","_"),this.useTerminal=!("useTerminal"in e)||e.useTerminal,this.useTerminal?this.createVSCodeTerminal(e):this.createVSCodeChannel(e),e.logfile){this.logfile=e.logfile;try{this.logFd=n.openSync(e.logfile,"w")}catch(t){const r=`Could not open file ${e.logfile} for writing. ${t.toString()}`;s.window.showErrorMessage(r)}}}createVSCodeTerminal(e){const t={name:this.createName(e),prompt:"",inputMode:a.TerminalInputMode.DISABLED};this.ptyTerm=o.PtyTerminal.findExisting(t.name),this.ptyTerm?this.ptyTerm.clearTerminalBuffer():(this.ptyTerm=new o.PtyTerminal(t),this.ptyTerm.terminal.show())}createVSCodeChannel(e){const t=this.createName(e);this.output=s.window.createOutputChannel(t)}createName(e){return`SWO:${e.label||""}[port:${this.port}, enc:${this.encoding}]`}softwareEvent(e){if(e.port!==this.port)return;new Date;const t=e.data.toString("hex"),r=(o=e.data,a=this.encoding,i.decoders[a]?i.decoders[a](o):i.decoders.unsigned(o));var o,a;const c=r*this.scale,u=`${this.hrTimer.createDateTimestamp()} ${t} - ${r} - ${c}`;if(this.useTerminal?this.ptyTerm.write(u+"\n"):this.output.appendLine(u),this.logFd>=0)try{n.writeSync(this.logFd,e.data)}catch(e){const t=`Could not write to file ${this.logfile} for writing. ${e.toString()}`;s.window.showErrorMessage(t);try{n.closeSync(this.logFd)}catch(e){}this.logFd=-1}}hardwareEvent(e){}synchronized(){}lostSynchronization(){}dispose(){this.output&&(this.output.dispose(),this.output=null),this.ptyTerm&&(this.ptyTerm.dispose(),this.ptyTerm=null),this.close()}close(){this.logFd>=0&&(n.closeSync(this.logFd),this.logFd=-1)}}},29:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWOConsoleProcessor=void 0;const s=r(6828),n=r(7147),i=r(8477),o=r(3200);t.SWOConsoleProcessor=class{constructor(e){if(this.position=0,this.timeout=null,this.format="console",this.showOutputTimer=null,this.useTerminal=!0,this.ptyTerm=null,this.timestamp=!1,this.hrTimer=new o.HrTimer,this.logFd=-1,this.port=e.port,this.encoding=e.encoding||"utf8",this.timestamp=!!e.timestamp,this.useTerminal=!("useTerminal"in e)||e.useTerminal,this.useTerminal?this.createVSCodeTerminal(e):this.createVSCodeChanne(e),e.logfile){this.logfile=e.logfile;try{this.logFd=n.openSync(e.logfile,"w")}catch(t){const r=`Could not open file ${e.logfile} for writing. ${t.toString()}`;s.window.showErrorMessage(r)}}}createName(e){const t=`SWO:${e.label||""}[port:${this.port}`;return this.useTerminal?t+"] console":t+", type: console]"}createVSCodeTerminal(e){const t={name:this.createName(e),prompt:"",inputMode:o.TerminalInputMode.DISABLED};this.ptyTerm=i.PtyTerminal.findExisting(t.name),this.ptyTerm?this.ptyTerm.clearTerminalBuffer():(this.ptyTerm=new i.PtyTerminal(t),this.ptyTerm.on("close",(()=>{this.ptyTerm=null})),e.showOnStartup&&this.ptyTerm.terminal.show())}createVSCodeChanne(e){this.output=s.window.createOutputChannel(this.createName(e)),e.showOnStartup&&(this.showOutputTimer=setTimeout((()=>{this.output.show(!0),this.showOutputTimer=null}),1))}pushOutput(e){e&&(this.useTerminal?this.ptyTerm&&this.ptyTerm.write(e):this.output.append(e))}createDateHeaderUs(){return this.timestamp?this.hrTimer.createDateTimestamp()+" ":""}softwareEvent(e){if(e.port!==this.port)return;const t=e.data.toString(this.encoding);if(this.logFd>=0)try{n.writeSync(this.logFd,t)}catch(e){const t=`Could not write to file ${this.logfile} for writing. ${e.toString()}`;s.window.showErrorMessage(t);try{n.closeSync(this.logFd)}catch(e){}this.logFd=-1}for(const e of t)this.timeout&&(clearTimeout(this.timeout),this.timeout=null),"\n"!==e?(0===this.position&&this.pushOutput(this.createDateHeaderUs()),this.pushOutput(e),this.position+=1,this.timestamp&&this.position>0&&(this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((()=>{this.pushOutput("\n"),this.position=0,this.timeout=null}),5e3))):(this.pushOutput("\n"),this.position=0)}hardwareEvent(e){}synchronized(){}lostSynchronization(){}dispose(){this.output&&(this.output.dispose(),this.output=null),this.ptyTerm&&(this.ptyTerm.dispose(),this.ptyTerm=null),this.close()}close(){this.logFd>=0&&(n.closeSync(this.logFd),this.logFd=-1)}}},1887:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SWORTTGraphProcessor=void 0;const s=r(6828),n=r(7147),i=r(4359),o=r(2361);class a extends o.EventEmitter{constructor(e){if(super(),this.format="graph",this.logFd=-1,this.port=e.port,this.encoding=e.encoding||"unsigned",this.scale=e.scale||1,this.graphId=e.graphId,e.logfile){this.logfile=e.logfile;try{this.logFd=n.openSync(e.logfile,"w")}catch(t){const r=`Could not open file ${e.logfile} for writing. ${t.toString()}`;s.window.showErrorMessage(r)}}}softwareEvent(e){if(e.port!==this.port)return;var t,r;e.data.toString("hex");const o={type:"data",data:(t=e.data,r=this.encoding,(i.decoders[r]?i.decoders[r](t):i.decoders.unsigned(t))*this.scale),id:this.graphId};if(this.emit("message",o),this.logFd>=0)try{n.writeSync(this.logFd,e.data)}catch(e){const t=`Could not write to file ${this.logfile} for writing. ${e.toString()}`;s.window.showErrorMessage(t);try{n.closeSync(this.logFd)}catch(e){}this.logFd=-1}}hardwareEvent(e){}synchronized(){}lostSynchronization(){}dispose(){this.close()}close(){this.logFd>=0&&(n.closeSync(this.logFd),this.logFd=-1)}}t.SWORTTGraphProcessor=a},4359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decoders=t.parseUQ=t.parseQ=t.parseUnsigned=t.parseSigned=t.parseFloat=void 0;const s=r(291),n=(new s.Parser).endianess("little").int32("value"),i=(new s.Parser).endianess("little").uint32("value"),o=(new s.Parser).endianess("little").floatle("value");function a(e){if(e.length<4){const t=Buffer.alloc(4);e.copy(t),e=t}return o.parse(e).value}function c(e){if(e.length<4){const t=Buffer.alloc(4);e.copy(t),e=t}return n.parse(e).value}function u(e){if(e.length<4){const t=Buffer.alloc(4);e.copy(t),e=t}return i.parse(e).value}function h(e,t,r){const s=c(e);return(s>>r)+(s&t)/t}function l(e,t,r){const s=u(e);return(s>>>r)+(s&t)/t}t.parseFloat=a,t.parseSigned=c,t.parseUnsigned=u,t.parseQ=h,t.parseUQ=l,t.decoders={signed:c,float:a,Q8_24:e=>h(e,16777215,24),Q16_16:e=>h(e,65535,16),Q24_8:e=>h(e,255,8),UQ8_24:e=>l(e,16777215,24),UQ16_16:e=>l(e,65535,16),UQ24_8:e=>l(e,255,8),unsigned:u}},1339:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FifoSWOSource=void 0;const s=r(7147),n=r(2361);class i extends n.EventEmitter{constructor(e){super(),this.SWOPath=e,this.connected=!1,this.stream=s.createReadStream(this.SWOPath,{highWaterMark:128,encoding:null,autoClose:!1}),this.stream.on("data",(e=>{this.emit("data",e)})),this.stream.on("close",(e=>{this.emit("disconnected")})),this.connected=!0}dispose(){this.stream.close()}}t.FifoSWOSource=i},3624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileSWOSource=void 0;const s=r(7147),n=r(6828),i=r(2361);class o extends i.EventEmitter{constructor(e,t=500){super(),this.SWOPath=e,this.timeout=t,this.connected=!1,this.fd=null,this.interval=null;const r=Date.now();!function i(o=1){t<=0||s.existsSync(e)?s.open(e,"r",((t,r)=>{t?n.window.showWarningMessage(`Unable to open path: ${e} - Unable to read SWO data.`):(this.fd=r,this.interval=setInterval(this.read.bind(this),2),this.connected=!0,this.emit("connected"))})):t>0&&(Date.now()-r>=t?n.window.showWarningMessage(`SWO File ${e} does not exist even after timeout of ${t}ms.`):setTimeout(i,Math.min(10,o+1)))}(1)}read(){const e=Buffer.alloc(64);s.read(this.fd,e,0,64,null,((e,t,r)=>{t>0&&this.emit("data",r.slice(0,t))}))}dispose(){this.emit("disconnected"),clearInterval(this.interval),s.closeSync(this.fd)}}t.FileSWOSource=o},1325:(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SerialSWOSource=void 0;const events_1=__webpack_require__(2361),os=__webpack_require__(2037),vscode=__webpack_require__(6828),path=__webpack_require__(1017);class SerialSWOSource extends events_1.EventEmitter{constructor(device,baudRate,extensionPath){super(),this.device=device,this.baudRate=baudRate,this.serialPort=null,this.connected=!1;const mainModule=eval("require.main"),binarypath=path.normalize(path.join(extensionPath,"binary_modules",process.version,os.platform(),process.arch,"node_modules"));let SerialPort;-1===mainModule.paths.indexOf(binarypath)&&mainModule.paths.splice(0,0,binarypath);try{SerialPort=mainModule.require("serialport")}catch(e){return void vscode.window.showErrorMessage("Unable to load Serial Port Module. A recent Visual Studio Code update has likely broken compatibility with the serial module. Please visit https://github.com/Marus/cortex-debug for more information.")}this.serialPort=new SerialPort(device,{baudRate,autoOpen:!1}),this.serialPort.on("data",(e=>{this.emit("data",e)})),this.serialPort.on("error",(e=>{vscode.window.showErrorMessage(`Unable to open serial port: ${device} - ${e.toString()}`)})),this.serialPort.on("open",(()=>{this.connected=!0,this.emit("connected")})),this.serialPort.open()}dispose(){this.serialPort&&(this.serialPort.close(),this.emit("disconnected"))}}exports.SerialSWOSource=SerialSWOSource},1337:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SocketRTTSource=t.SocketSWOSource=void 0;const s=r(2361),n=r(1808),i=r(3200);class o extends s.EventEmitter{constructor(e){super(),this.tcpPort=e,this.client=null,this.connected=!1,this.connError=null,this.nTries=1}start(e=1200){const t=i.parseHostPort(this.tcpPort);return new Promise(((r,s)=>{this.timer=setInterval((()=>{this.client=n.createConnection(t,(()=>{clearInterval(this.timer),this.timer=void 0,this.connected=!0,this.emit("connected"),console.log(`Connected SWO/RTT port ${this.tcpPort}, nTries = ${this.nTries}\n`),r()})),this.client.on("data",(e=>{this.emit("data",e)})),this.client.on("end",(()=>{this.dispose()})),this.client.on("close",(()=>{this.disposeClient()})),this.client.on("error",(t=>{const r=t.code;"ECONNRESET"===r&&this.connected?this.dispose():"ECONNREFUSED"===r?this.nTries>e?(t.message=`Error: Failed to connect to port ${this.tcpPort} ${r}`,console.log(`Failed ECONNREFUSED SWO/RTT port ${this.tcpPort}, nTries = ${this.nTries}`),this.connError=t,this.emit("error",t),s(t),this.dispose()):(this.nTries%10==0&&console.log(`Trying SWO/RTT port ${this.tcpPort}, nTries = ${this.nTries}`),this.nTries++,this.disposeClient()):(t.message=`Error: Ignored unknown error on port ${this.tcpPort} ${r}`,this.emit("error",t),this.connected||(this.connError=t,s(t)),this.dispose())}))}),250)}))}disposeClient(){try{if(this.connected&&(this.connected=!1,this.emit("disconnected")),this.client){const e=this.client;this.client=null,e.destroy()}}catch(e){console.log(`Socked destroy error ${e}`)}}dispose(){this.timer&&(clearInterval(this.timer),this.timer=void 0),this.disposeClient()}}t.SocketSWOSource=o,t.SocketRTTSource=class extends o{constructor(e,t){super(e),this.channel=t}write(e){try{this.client.write(e)}catch(e){throw e}}}},2942:(e,t)=>{"use strict";function r(e,t){let r=0;const s=e+t-1;for(let t=e;t<=s;t++)r=(r|1<<t)>>>0;return r}function s(e){return/^0b([01]+)$/i.test(e)?parseInt(e.substring(2),2):/^0x([0-9a-f]+)$/i.test(e)?parseInt(e.substring(2),16):/^[0-9]+/i.test(e)?parseInt(e,10):/^#[0-1]+/i.test(e)?parseInt(e.substring(1),2):void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.parseDimIndex=t.parseInteger=t.extractBits=t.createMask=t.binaryFormat=t.hexFormat=void 0,t.hexFormat=function(e,t=8,r=!0){let s=(e>>>0).toString(16);return s=s.padStart(t,"0"),r?"0x"+s:s},t.binaryFormat=function(e,t=0,r=!0,s=!1){let n=(e>>>0).toString(2);for(;n.length<t;)n="0"+n;if(s){const e=4-n.length%4;for(let t=0;t<e;t++)n="0"+n;const t=n.match(/[01]{4}/g);n=t.join(" "),n=n.substring(e)}return r?"0b"+n:n},t.createMask=r,t.extractBits=function(e,t,s){return(e&r(t,s))>>>t>>>0},t.parseInteger=s,t.parseDimIndex=function(e,t){if(-1!==e.indexOf(",")){const r=e.split(",").map((e=>e.trim()));if(r.length!==t)throw new Error("dimIndex Element has invalid specification.");return r}if(/^([0-9]+)\-([0-9]+)$/i.test(e)){const r=e.split("-").map((e=>s(e))),n=r[0];if(r[1]-n+1<t)throw new Error("dimIndex Element has invalid specification.");const i=[];for(let e=0;e<t;e++)i.push(`${n+e}`);return i}if(/^[a-zA-Z]\-[a-zA-Z]$/.test(e)){const r=e.charCodeAt(0);if(e.charCodeAt(2)-r+1<t)throw new Error("dimIndex Element has invalid specification.");const s=[];for(let e=0;e<t;e++)s.push(String.fromCharCode(r+e));return s}return[]}},9493:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralBaseNode=t.BaseNode=void 0;const s=r(3200);class n{constructor(e){this.parent=e,this.expanded=!1}getParent(){return this.parent}getCommand(){}}t.BaseNode=n,t.PeripheralBaseNode=class extends n{constructor(e){super(e),this.parent=e,this.format=s.NumberFormat.Auto,this.pinned=!1}selected(){return Promise.resolve(!1)}}},6350:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldNode=void 0;const s=r(9493),n=r(6828),i=r(3200);class o extends s.BaseNode{constructor(e,t,r,s){super(s),this.name=e,this.offset=t,this.size=r,this.register=s,this.prevValue="",this.value=""}getChildren(){return[]}getTreeItem(){const e=this.register.extractBits(this.offset,this.size);this.value=e.toString();const t={label:this.name+" "+this.value};this.prevValue&&this.prevValue!==this.value&&(t.highlights=[[this.name.length+1,t.label.length]]),this.prevValue=this.value;const r=new n.TreeItem(t,n.TreeItemCollapsibleState.None);return r.contextValue="field",r.tooltip="$"+this.register.name+"."+this.name+"\n"+i.toStringDecHexOctBin(e),r}getCopyValue(){return this.register.extractBits(this.offset,this.size).toString()}}t.FieldNode=o},2370:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageNode=void 0;const s=r(9493),n=r(6828);class i extends s.PeripheralBaseNode{constructor(e,t){super(null),this.message=e,this.tooltip=t}getChildren(){return[]}getTreeItem(){const e=new n.TreeItem(this.message,n.TreeItemCollapsibleState.None);return this.tooltip&&(e.tooltip=this.tooltip),e}getCopyValue(){return null}performUpdate(){return Promise.resolve(!1)}updateData(){return Promise.resolve(!1)}getPeripheral(){return null}collectRanges(e){}saveState(e){return[]}findByPath(e){return null}}t.MessageNode=i},4051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralClusterNode=void 0;const s=r(6828),n=r(9493),i=r(7525),o=r(3200),a=r(2942);class c extends n.PeripheralBaseNode{constructor(e,t){super(e),this.parent=e,this.name=t.name,this.description=t.description,this.offset=t.addressOffset,this.accessType=t.accessType||i.AccessType.ReadWrite,this.size=t.size||e.size,this.resetValue=t.resetValue||e.resetValue,this.children=[],this.parent.addChild(this)}getTreeItem(){const e=`${this.name} [${a.hexFormat(this.offset,0)}]`,t=new s.TreeItem(e,this.expanded?s.TreeItemCollapsibleState.Expanded:s.TreeItemCollapsibleState.Collapsed);return t.contextValue="cluster",t.tooltip=this.description||void 0,t}getChildren(){return this.children}setChildren(e){this.children=e.slice(0,e.length),this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}addChild(e){this.children.push(e),this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}getBytes(e,t){return this.parent.getBytes(this.offset+e,t)}getAddress(e){return this.parent.getAddress(this.offset+e)}getOffset(e){return this.parent.getOffset(this.offset+e)}getFormat(){return this.format!==o.NumberFormat.Auto?this.format:this.parent.getFormat()}updateData(){return new Promise(((e,t)=>{const r=this.children.map((e=>e.updateData()));Promise.all(r).then((t=>{e(!0)})).catch((e=>{t("Failed")}))}))}saveState(e){const t=[];return(this.format!==o.NumberFormat.Auto||this.expanded)&&t.push({node:`${e}.${this.name}`,expanded:this.expanded,format:this.format}),this.children.forEach((r=>{t.push(...r.saveState(`${e}.${this.name}`))})),t}findByPath(e){if(0===e.length)return this;{const t=this.children.find((t=>t.name===e[0]));return t?t.findByPath(e.slice(1)):null}}collectRanges(e){this.children.map((t=>{t.collectRanges(e)}))}getPeripheral(){return this.parent.getPeripheral()}getCopyValue(){throw new Error("Method not implemented.")}performUpdate(){throw new Error("Method not implemented.")}}t.PeripheralClusterNode=c},3822:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralFieldNode=t.EnumeratedValue=void 0;const s=r(6828),n=r(9493),i=r(7525),o=r(3200),a=r(2942);t.EnumeratedValue=class{constructor(e,t,r){this.name=e,this.description=t,this.value=r}};class c extends n.PeripheralBaseNode{constructor(e,t){if(super(e),this.parent=e,this.prevValue="",this.name=t.name,this.description=t.description,this.offset=t.offset,this.width=t.width,t.accessType?e.accessType===i.AccessType.ReadOnly&&t.accessType!==i.AccessType.ReadOnly?this.accessType=i.AccessType.ReadOnly:e.accessType===i.AccessType.WriteOnly&&t.accessType!==i.AccessType.WriteOnly?this.accessType=i.AccessType.WriteOnly:this.accessType=t.accessType:this.accessType=e.accessType,t.enumeration){this.enumeration=t.enumeration,this.enumerationMap={},this.enumerationValues=[];for(const e in t.enumeration){const r=t.enumeration[e].name;this.enumerationValues.push(r),this.enumerationMap[r]=e}}this.parent.addChild(this)}getTreeItem(){const e="reserved"===this.name.toLowerCase(),t=e?"field-res":this.parent.accessType===i.AccessType.ReadOnly?"field-ro":"field",r=this.offset,n=this.offset+this.width-1,o=`${this.name} [${n}:${r}]`,a=this.getFormattedValue(this.getFormat()),c={label:o+" "+a};a!==this.prevValue&&(c.highlights=[[o.length+1,c.label.length]],this.prevValue=a);const u=new s.TreeItem(c,s.TreeItemCollapsibleState.None);return u.contextValue=t,u.tooltip=this.generateTooltipMarkdown(e),u}generateTooltipMarkdown(e){const t=new s.MarkdownString("",!0);t.isTrusted=!0;const r=`${a.hexFormat(this.parent.getAddress())}${this.getFormattedRange()}`;if(e)return t.appendMarkdown(`| ${this.name}@${r} | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | *Reserved* |\n`),t.appendMarkdown("|:---|:---:|---:|"),t;const n=this.getFormattedValue(this.getFormat(),!0),o=this.accessType===i.AccessType.ReadOnly?"(Read Only)":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";if(t.appendMarkdown(`| ${this.name}@${r} | ${o} | *${n}* |\n`),t.appendMarkdown("|:---|:---:|---:|\n\n"),this.accessType!==i.AccessType.WriteOnly&&t.appendMarkdown(`**Reset Value:** ${this.formatValue(this.getResetValue(),this.getFormat())}\n`),t.appendMarkdown("\n____\n\n"),t.appendMarkdown(this.description),t.appendMarkdown("\n_____\n\n"),this.accessType===i.AccessType.WriteOnly)return t;const c=this.parent.extractBits(this.offset,this.width),u=a.hexFormat(c,Math.ceil(this.width/4),!0),h=c.toString(),l=a.binaryFormat(c,this.width);if(this.enumeration){t.appendMarkdown("| Enumeration Value &nbsp;&nbsp; | Hex &nbsp;&nbsp; | Decimal &nbsp;&nbsp; | Binary &nbsp;&nbsp; |\n"),t.appendMarkdown("|:---|:---|:---|:---|\n");let e="Unknown";this.enumeration[c]&&(e=this.enumeration[c].name),t.appendMarkdown(`| ${e} &nbsp;&nbsp; | ${u} &nbsp;&nbsp; | ${h} &nbsp;&nbsp; | ${l} &nbsp;&nbsp; |\n\n`),this.enumeration[c]&&this.enumeration[c].description&&t.appendMarkdown(this.enumeration[c].description)}else t.appendMarkdown("| Hex &nbsp;&nbsp; | Decimal &nbsp;&nbsp; | Binary &nbsp;&nbsp; |\n"),t.appendMarkdown("|:---|:---|:---|\n"),t.appendMarkdown(`| ${u} &nbsp;&nbsp; | ${h} &nbsp;&nbsp; | ${l} &nbsp;&nbsp; |\n`);return t}getFormattedRange(){const e=this.offset;return`[${this.offset+this.width-1}:${e}]`}getCurrentValue(){return this.parent.extractBits(this.offset,this.width)}getResetValue(){return this.parent.extractBitsFromReset(this.offset,this.width)}getFormattedValue(e,t=!0){return this.formatValue(this.getCurrentValue(),e,t)}formatValue(e,t,r=!0){if(this.accessType===i.AccessType.WriteOnly)return"(Write Only)";let s="";switch(t){case o.NumberFormat.Decimal:s=e.toString();break;case o.NumberFormat.Binary:s=a.binaryFormat(e,this.width);break;case o.NumberFormat.Hexadecimal:s=a.hexFormat(e,Math.ceil(this.width/4),!0);break;default:s=this.width>=4?a.hexFormat(e,Math.ceil(this.width/4),!0):a.binaryFormat(e,this.width)}return r&&this.enumeration&&(s=this.enumeration[e]?`${this.enumeration[e].name} (${s})`:`Unkown Enumeration Value (${s})`),s}getEnumerationValue(e){return this.enumeration?this.enumeration[e]?this.enumeration[e].name:void 0:null}getChildren(){return[]}performUpdate(){return new Promise(((e,t)=>{this.enumeration?s.window.showQuickPick(this.enumerationValues).then((r=>{if(void 0===r)return t("Input not selected");const s=this.enumerationMap[r];this.parent.updateBits(this.offset,this.width,s).then(e,t)})):s.window.showInputBox({prompt:"Enter new value: (prefix hex with 0x, binary with 0b)",value:this.getCopyValue()}).then((r=>{const s=a.parseInteger(r);if(void 0===s)return t("Unable to parse input value.");this.parent.updateBits(this.offset,this.width,s).then(e,t)}))}))}getCopyValue(){const e=this.parent.extractBits(this.offset,this.width);switch(this.getFormat()){case o.NumberFormat.Decimal:return e.toString();case o.NumberFormat.Binary:return a.binaryFormat(e,this.width);case o.NumberFormat.Hexadecimal:return a.hexFormat(e,Math.ceil(this.width/4),!0);default:return this.width>=4?a.hexFormat(e,Math.ceil(this.width/4),!0):a.binaryFormat(e,this.width)}}updateData(){return Promise.resolve(!0)}getFormat(){return this.format!==o.NumberFormat.Auto?this.format:this.parent.getFormat()}saveState(e){return this.format!==o.NumberFormat.Auto?[{node:`${e}.${this.name}`,format:this.format}]:[]}findByPath(e){return 0===e.length?this:null}getPeripheral(){return this.parent.getPeripheral()}collectRanges(e){throw new Error("Method not implemented.")}}t.PeripheralFieldNode=c},9969:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralNode=void 0;const s=r(6828),n=r(9493),i=r(1644),o=r(3200),a=r(4751),c=r(2942),u=r(6828);class h extends n.PeripheralBaseNode{constructor(e,t,r){super(null),this.session=e,this.gapThreshold=t,this.name=r.name,this.baseAddress=r.baseAddress,this.totalLength=r.totalLength,this.description=r.description,this.groupName=r.groupName||"",this.resetValue=r.resetValue||0,this.size=r.size||32,this.children=[],this.addrRanges=[]}getPeripheral(){return this}getTreeItem(){const e=`${this.name} @ ${c.hexFormat(this.baseAddress)}`,t=new s.TreeItem(e,this.expanded?s.TreeItemCollapsibleState.Expanded:s.TreeItemCollapsibleState.Collapsed);return t.contextValue=this.pinned?"peripheral.pinned":"peripheral",t.tooltip=this.description||void 0,this.pinned&&(t.iconPath=new s.ThemeIcon("pinned")),t}getCopyValue(){throw new Error("Method not implemented.")}getChildren(){return this.children}setChildren(e){this.children=e,this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}addChild(e){this.children.push(e),this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}getBytes(e,t){try{return new Uint8Array(this.currentValue.slice(e,e+t))}catch(e){return new Uint8Array(0)}}getAddress(e){return this.baseAddress+e}getOffset(e){return e}getFormat(){return this.format}updateData(){return new Promise(((e,t)=>{this.expanded?this.readMemory().then((r=>{this.updateChildData(e,t,null)}),(e=>{const r=e.message||"unknown error",s=`Failed to update peripheral ${this.name}: ${r}`;u.debug.activeDebugConsole&&u.debug.activeDebugConsole.appendLine(s),this.updateChildData(null,t,new Error(s))})):e(!1)}))}updateChildData(e,t,r){const s=this.children.map((e=>e.updateData()));Promise.all(s).then((s=>{r?t(r):e(!0)})).catch((e=>{const s=e.message||"unknown error",n=`Failed to update peripheral ${this.name}: ${s}`;u.debug.activeDebugConsole&&u.debug.activeDebugConsole.appendLine(n),t(r||new Error(n))}))}readMemory(){return this.currentValue||(this.currentValue=new Array(this.totalLength)),a.MemReadUtils.readMemoryChunks(this.session,this.baseAddress,this.addrRanges,this.currentValue)}collectRanges(){const e=[];this.children.map((t=>t.collectRanges(e))),e.sort(((e,t)=>e.base<t.base?-1:e.base>t.base?1:0)),e.map((e=>e.base+=this.baseAddress));const t=this.gapThreshold;let r=[];if(t>=0){let s=null;for(const n of e)if(s&&s.nxtAddr()+t>=n.base){const e=Math.max(s.nxtAddr(),n.nxtAddr());s.length=e-s.base}else r.push(n),s=n}else r=e;this.addrRanges=i.AddressRangesUtils.splitIntoChunks(r,4096,this.name,this.totalLength)}getPeripheralNode(){return this}selected(){return this.performUpdate()}saveState(e){const t=[];return(this.format!==o.NumberFormat.Auto||this.expanded||this.pinned)&&t.push({node:`${this.name}`,expanded:this.expanded,format:this.format,pinned:this.pinned}),this.children.forEach((e=>{t.push(...e.saveState(`${this.name}`))})),t}findByPath(e){if(0===e.length)return this;{const t=this.children.find((t=>t.name===e[0]));return t?t.findByPath(e.slice(1)):null}}performUpdate(){throw new Error("Method not implemented.")}static compare(e,t){return e.pinned&&t.pinned||!e.pinned&&!t.pinned?e.groupName!==t.groupName?e.groupName>t.groupName?1:-1:e.name!==t.name?e.name>t.name?1:-1:0:e.pinned?-1:1}}t.PeripheralNode=h},2532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralRegisterNode=void 0;const s=r(6828),n=r(9493),i=r(7525),o=r(2942),a=r(3200),c=r(1644);class u extends n.PeripheralBaseNode{constructor(e,t){super(e),this.parent=e,this.prevValue="",this.name=t.name,this.description=t.description,this.offset=t.addressOffset,this.accessType=t.accessType||e.accessType,this.size=t.size||e.size,this.resetValue=void 0!==t.resetValue?t.resetValue:e.resetValue,this.currentValue=this.resetValue,this.hexLength=Math.ceil(this.size/4),this.maxValue=Math.pow(2,this.size),this.binaryRegex=new RegExp(`^0b[01]{1,${this.size}}$`,"i"),this.hexRegex=new RegExp(`^0x[0-9a-f]{1,${this.hexLength}}$`,"i"),this.children=[],this.parent.addChild(this)}reset(){this.currentValue=this.resetValue}extractBits(e,t){return o.extractBits(this.currentValue,e,t)}updateBits(e,t,r){return new Promise(((s,n)=>{const i=Math.pow(2,t);if(r>i)return n(`Value entered is invalid. Maximum value for this field is ${i-1} (${o.hexFormat(i-1,0)})`);{const i=o.createMask(e,t),a=r<<e,c=this.currentValue&~i|a;this.updateValueInternal(c).then(s,n)}}))}getTreeItem(){const e=`${this.name} @ ${o.hexFormat(this.offset,0)}`,t=this.children&&this.children.length>0?this.expanded?s.TreeItemCollapsibleState.Expanded:s.TreeItemCollapsibleState.Collapsed:s.TreeItemCollapsibleState.None,r=this.getFormattedValue(this.getFormat()),n={label:e+" "+r};r!==this.prevValue&&(n.highlights=[[e.length+1,n.label.length]],this.prevValue=r);const a=new s.TreeItem(n,t);return a.contextValue=this.accessType===i.AccessType.ReadWrite?"registerRW":this.accessType===i.AccessType.ReadOnly?"registerRO":"registerWO",a.tooltip=this.generateTooltipMarkdown(),a}generateTooltipMarkdown(){const e=new s.MarkdownString("",!0);e.isTrusted=!0;const t=`${o.hexFormat(this.getAddress())}`,r=this.getFormattedValue(this.getFormat()),n=this.accessType===i.AccessType.ReadOnly?"(Read Only)":"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";if(e.appendMarkdown(`| ${this.name}@${t} | ${n} | *${r}* |\n`),e.appendMarkdown("|:---|:---:|---:|\n\n"),this.accessType!==i.AccessType.WriteOnly&&e.appendMarkdown(`**Reset Value:** ${this.getFormattedResetValue(this.getFormat())}\n`),e.appendMarkdown("\n____\n\n"),e.appendMarkdown(this.description),e.appendMarkdown("\n_____\n\n"),this.accessType===i.AccessType.WriteOnly)return e;const c=this.getFormattedValue(a.NumberFormat.Hexadecimal),u=this.getFormattedValue(a.NumberFormat.Decimal),h=this.getFormattedValue(a.NumberFormat.Binary);e.appendMarkdown("| Hex &nbsp;&nbsp; | Decimal &nbsp;&nbsp; | Binary &nbsp;&nbsp; |\n"),e.appendMarkdown("|:---|:---|:---|\n"),e.appendMarkdown(`| ${c} &nbsp;&nbsp; | ${u} &nbsp;&nbsp; | ${h} &nbsp;&nbsp; |\n\n`);const l=this.getChildren();return 0===l.length||(e.appendMarkdown("**Fields**\n\n"),e.appendMarkdown("| Field | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | Bit-Range | Value |\n"),e.appendMarkdown("|:---|:---:|:---|:---|\n"),l.forEach((t=>{e.appendMarkdown(`| ${t.name} | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; | ${t.getFormattedRange()} | ${t.getFormattedValue(t.getFormat(),!0)} |\n`)}))),e}getFormattedValue(e){return this.formatValue(this.currentValue,e)}getFormattedResetValue(e){return this.formatValue(this.resetValue,e)}formatValue(e,t){if(this.accessType===i.AccessType.WriteOnly)return"(Write Only)";switch(t){case a.NumberFormat.Decimal:return e.toString();case a.NumberFormat.Binary:return o.binaryFormat(e,4*this.hexLength);default:return o.hexFormat(e,this.hexLength,!0)}}extractBitsFromReset(e,t){return o.extractBits(this.resetValue,e,t)}getChildren(){return this.children||[]}setChildren(e){this.children=e.slice(0,e.length),this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}addChild(e){this.children.push(e),this.children.sort(((e,t)=>e.offset>t.offset?1:-1))}getFormat(){return this.format!==a.NumberFormat.Auto?this.format:this.parent.getFormat()}getCopyValue(){switch(this.getFormat()){case a.NumberFormat.Decimal:return this.currentValue.toString();case a.NumberFormat.Binary:return o.binaryFormat(this.currentValue,4*this.hexLength);default:return o.hexFormat(this.currentValue,this.hexLength)}}performUpdate(){return new Promise(((e,t)=>{s.window.showInputBox({prompt:"Enter new value: (prefix hex with 0x, binary with 0b)",value:this.getCopyValue()}).then((r=>{let s;if(r.match(this.hexRegex))s=parseInt(r.substr(2),16);else if(r.match(this.binaryRegex))s=parseInt(r.substr(2),2);else{if(!r.match(/^[0-9]+/))return t("Value entered is not a valid format.");if(s=parseInt(r,10),s>=this.maxValue)return t(`Value entered (${s}) is greater than the maximum value of ${this.maxValue}`)}this.updateValueInternal(s).then(e,t)}))}))}getAddress(){return this.parent.getAddress(this.offset)}updateValueInternal(e){const t=this.parent.getAddress(this.offset),r=[],n=this.size/8;for(let t=0;t<n;t++){const s=255&e;e>>>=8;let n=s.toString(16);1===n.length&&(n="0"+n),r[t]=n}return new Promise(((e,n)=>{s.debug.activeDebugSession.customRequest("write-memory",{address:t,data:r.join("")}).then((t=>{this.parent.updateData().then((()=>{}),(()=>{})),e(!0)}),n)}))}updateData(){const e=this.size/8,t=this.parent.getBytes(this.offset,e),r=Buffer.from(t);switch(e){case 1:this.currentValue=r.readUInt8(0);break;case 2:this.currentValue=r.readUInt16LE(0);break;case 4:this.currentValue=r.readUInt32LE(0);break;default:s.window.showErrorMessage(`Register ${this.name} has invalid size: ${this.size}. Should be 8, 16 or 32.`)}return this.children.forEach((e=>e.updateData())),Promise.resolve(!0)}saveState(e){const t=[];return(this.format!==a.NumberFormat.Auto||this.expanded)&&t.push({node:`${e}.${this.name}`,expanded:this.expanded,format:this.format}),this.children.forEach((r=>{t.push(...r.saveState(`${e}.${this.name}`))})),t}findByPath(e){return 0===e.length?this:1===e.length?this.children.find((t=>t.name===e[0])):null}getPeripheral(){return this.parent.getPeripheral()}collectRanges(e){const t=this.parent.getOffset(this.offset);e.push(new c.AddrRange(t,this.size/8))}}t.PeripheralRegisterNode=u},9797:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterNode=void 0;const s=r(6828),n=r(9493),i=r(6350),o=r(3200),a=r(2942);class c extends n.BaseNode{constructor(e,t){super(null),this.name=e,this.index=t,this.name=this.name,"XPSR"===e.toUpperCase()||"CPSR"===e.toUpperCase()?this.fields=[new i.FieldNode("Negative Flag (N)",31,1,this),new i.FieldNode("Zero Flag (Z)",30,1,this),new i.FieldNode("Carry or borrow flag (C)",29,1,this),new i.FieldNode("Overflow Flag (V)",28,1,this),new i.FieldNode("Saturation Flag (Q)",27,1,this),new i.FieldNode("GE",16,4,this),new i.FieldNode("Interrupt Number",0,8,this),new i.FieldNode("ICI/IT",25,2,this),new i.FieldNode("ICI/IT",10,6,this),new i.FieldNode("Thumb State (T)",24,1,this)]:"CONTROL"===e.toUpperCase()&&(this.fields=[new i.FieldNode("FPCA",2,1,this),new i.FieldNode("SPSEL",1,1,this),new i.FieldNode("nPRIV",0,1,this)]),this.currentValue=0,this.currentNaturalValue="0x00000000",this.prevNaturalValue=""}extractBits(e,t){return a.extractBits(this.currentValue,e,t)}getTreeItem(){const e=this.fields&&this.fields.length>0?this.expanded?s.TreeItemCollapsibleState.Expanded:s.TreeItemCollapsibleState.Collapsed:s.TreeItemCollapsibleState.None,t={label:this.name+" "+this.currentNaturalValue};this.prevNaturalValue&&this.prevNaturalValue!==this.currentNaturalValue&&(t.highlights=[[this.name.length+1,t.label.length]]),this.prevNaturalValue=this.currentNaturalValue;const r=new s.TreeItem(t,e);return r.contextValue="register",/^[sd][0-9]/.test(this.name)||(r.tooltip="$"+this.name+"\n"+o.toStringDecHexOctBin(parseInt(this.currentNaturalValue))),r}getChildren(){return this.fields}setValue(e){if(this.currentNaturalValue=e,"CONTROL"===this.name.toUpperCase()||"XPSR"===this.name.toUpperCase()||"CPSR"===this.name.toUpperCase())if(this.currentNaturalValue.startsWith("0x"))this.currentValue=parseInt(this.currentNaturalValue,16);else{if(this.currentValue=parseInt(this.currentNaturalValue,10),this.currentValue<0){const e=(4294967295&this.currentValue)>>>0;this.currentValue=e}let e=this.currentValue.toString(16);for(;e.length<8;)e="0"+e;this.currentNaturalValue="0x"+e}}getCopyValue(){return this.currentNaturalValue}_saveState(){const e=[];return this.fields&&this.fields.length>0&&this.expanded&&e.push({node:this.name,expanded:this.expanded}),e}}t.RegisterNode=c},2028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PeripheralTreeProvider=t.PeripheralTreeForSession=void 0;const s=r(6828),n=r(7147),i=r(1017),o=r(6828),a=r(4942),c=r(9493),u=r(9969),h=r(7525),l=r(2370),p=r(6292);class d extends c.PeripheralBaseNode{constructor(e,t,r){super(),this.session=e,this.state=t,this.fireCb=r,this.peripherials=[],this.loaded=!1,this.gapThreshold=16,this.errMessage="No SVD file loaded";try{this.wsFolderPath=this.session.workspaceFolder.uri.fsPath}catch(e){}this.myTreeItem=new o.TreeItem(this.session.name,this.state)}saveState(e){const t=[];this.peripherials.forEach((e=>{t.push(...e.saveState())}));try{e&&(n.mkdirSync(i.dirname(e),{recursive:!0}),n.writeFileSync(e,JSON.stringify(t),{encoding:"utf8",flag:"w"}))}catch(e){s.window.showWarningMessage(`Unable to save periperal preferences ${e}`)}return t}loadSVD(){return new Promise(((e,t)=>{try{this.errMessage=`Loading ${this.svdFileName}`,h.SVDParser.parseSVD(this.session,this.svdFileName,this.gapThreshold).then((t=>{this.peripherials=t,this.loaded=!0,this.errMessage="",e(!0)})).catch((e=>{this.peripherials=[],this.loaded=!1,t(e)}))}catch(e){t(e)}}))}performUpdate(){throw new Error("Method not implemented.")}updateData(){if(this.loaded){const e=this.peripherials.map((e=>e.updateData()));Promise.all(e).then((e=>{this.fireCb()}),(e=>{this.fireCb()}))}return Promise.resolve(!0)}getPeripheral(){throw new Error("Method not implemented.")}collectRanges(e){throw new Error("Method not implemented.")}findByPath(e){throw new Error("Method not implemented.")}findNodeByPath(e){const t=e.split("."),r=this.peripherials.find((e=>e.name===t[0]));return r?r.findByPath(t.slice(1)):null}refresh(){this.fireCb()}getTreeItem(e){return e?e.getTreeItem():this.myTreeItem}getChildren(e){return this.loaded?e?e.getChildren():this.peripherials:this.loaded?this.peripherials:[new l.MessageNode(this.errMessage)]}getCopyValue(){}sessionStarted(e,t){if(this.svdFileName=e,!i.isAbsolute(this.svdFileName)&&this.wsFolderPath){const e=i.normalize(i.join(this.wsFolderPath,this.svdFileName));this.svdFileName=e}return this.gapThreshold="number"==typeof t&&t<0?-1:("number"==typeof t?Math.max(0,Math.min(t,32)):16)+7&-8,new Promise(((e,t)=>{this.peripherials=[],this.fireCb(),this.loadSVD().then((()=>{const t=this.stateFileName();if(t&&n.existsSync(t)){const e=n.readFileSync(t,"utf8");JSON.parse(e).forEach((e=>{const t=this.findNodeByPath(e.node);t&&(t.expanded=e.expanded||!1,t.pinned=e.pinned||!1,t.format=e.format)}))}this.peripherials.sort(u.PeripheralNode.compare),this.fireCb(),e(void 0),a.default.sendEvent("Peripheral View","Used",this.svdFileName)}),(t=>{this.errMessage=`Unable to parse SVD file ${this.svdFileName}: ${t.toString()}`,s.window.showErrorMessage(this.errMessage),s.debug.activeDebugConsole&&s.debug.activeDebugConsole.appendLine(this.errMessage),this.fireCb(),e(void 0),a.default.sendEvent("Peripheral View","Error",t.toString())}))}))}stateFileName(){return this.wsFolderPath?i.join(this.wsFolderPath,".vscode",".cortex-debug.peripherals.state.json"):void 0}sessionTerminated(){this.saveState(this.stateFileName())}togglePinPeripheral(e){e.pinned=!e.pinned,this.peripherials.sort(u.PeripheralNode.compare)}}t.PeripheralTreeForSession=d,t.PeripheralTreeProvider=class{constructor(){this._onDidChangeTreeData=new s.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.sessionPeripheralsMap=new Map,this.oldState=new Map}refresh(){this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return null==e?void 0:e.getTreeItem()}getChildren(e){const t=Array.from(this.sessionPeripheralsMap.values());return e?e.getChildren():0===t.length?[new l.MessageNode("SVD: No active debug sessions or no SVD files specified")]:1===t.length?t[0].getChildren():t}debugSessionStarted(e,t,r){return new Promise(((n,i)=>{if(t)if(this.sessionPeripheralsMap.get(e.id))this._onDidChangeTreeData.fire(void 0);else{let n=this.oldState.get(e.name);void 0===n&&(n=0===this.sessionPeripheralsMap.size?s.TreeItemCollapsibleState.Expanded:s.TreeItemCollapsibleState.Collapsed);const i=new d(e,n,(()=>{this._onDidChangeTreeData.fire(void 0)}));this.sessionPeripheralsMap.set(e.id,i),i.sessionStarted(t,r).then((()=>{this._onDidChangeTreeData.fire(void 0)}),(e=>{this._onDidChangeTreeData.fire(void 0)}))}else n(void 0)}))}debugSessionTerminated(e){const t=this.sessionPeripheralsMap.get(e.id);return t&&(this.oldState.set(e.name,t.myTreeItem.collapsibleState),this.sessionPeripheralsMap.delete(e.id),t.sessionTerminated(),this._onDidChangeTreeData.fire(void 0)),Promise.resolve(!0)}debugStopped(e){const t=this.sessionPeripheralsMap.get(e.id);t&&t.updateData()}debugContinued(){}togglePinPeripheral(e){const t=p.CortexDebugExtension.getActiveCDSession(),r=this.sessionPeripheralsMap.get(t.id);r&&(r.togglePinPeripheral(e),this._onDidChangeTreeData.fire(void 0))}}},3213:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterTreeProvider=t.RegisterTreeForSession=void 0;const s=r(6828),n=r(7147),i=r(1017),o=r(6828),a=r(3200),c=r(9797),u=r(2370),h=r(9493),l='Due to a VSCode limitation, this Panel cannot track current thread/frame so it can be inaccurate. You can find proper Registers in the VARIABLES panel where it is also possible to also SET registers. We may bring this Panel back when VSCode provides an API to track the "CALL STACK" Panel';class p extends h.BaseNode{constructor(e,t,r){super(),this.session=e,this.state=t,this.fireCb=r,this.registers=[],this.registerMap={},this.loaded=!1;try{this.wsFolderPath=this.session.workspaceFolder.uri.fsPath}catch(e){}this.myTreeItem=new s.TreeItem(this.session.name,this.state),this.myTreeItem.tooltip=l}getChildren(e){return this.loaded&&this.registers.length>0?e?e.getChildren():this.registers:this.loaded?this.registers:[new u.MessageNode("Session not in active/available.")]}getTreeItem(e){return e?e.getTreeItem():this.myTreeItem}getCopyValue(){}refresh(){this.loaded?this._refreshRegisterValues():this.session.customRequest("read-register-list").then((e=>{this.createRegisters(e),this._refreshRegisterValues()}),(e=>{}))}_refreshRegisterValues(){const e={hex:!o.workspace.getConfiguration("cortex-debug").get(a.CortexDebugKeys.REGISTER_DISPLAY_MODE)};this.session.customRequest("read-registers",e).then((e=>{e.forEach((e=>{const t=parseInt(e.number,10),r=this.registerMap[t];r&&r.setValue(e.value)})),this.fireCb()}),(e=>{}))}getStateFilename(){if(this.wsFolderPath)return i.join(this.wsFolderPath,".vscode",".cortex-debug.registers.state.json")}createRegisters(e){this.registerMap={},this.registers=[],e.forEach(((e,t)=>{if(e){const r=new c.RegisterNode(e,t);this.registers.push(r),this.registerMap[t]=r}})),this.loaded=!0;try{const e=this.getStateFilename();if(e&&n.existsSync(e)){const t=n.readFileSync(e,"utf8");JSON.parse(t).forEach((e=>{if(-1===e.node.indexOf(".")){const t=this.registers.find((t=>t.name===e.node));t&&e.expanded&&(t.expanded=e.expanded)}else{const[t,r]=e.node.split("."),s=this.registers.find((e=>e.name===t));s&&s.getChildren().find((e=>e.name===r))}}))}}catch(e){}this.fireCb()}sessionTerminated(){try{const e=this.getStateFilename();if(e){const t=[];this.registers.forEach((e=>{t.push(...e._saveState())})),n.mkdirSync(i.dirname(e),{recursive:!0}),n.writeFileSync(e,JSON.stringify(t),{encoding:"utf8",flag:"w"})}}catch(e){o.window.showWarningMessage(`Unable to save register preferences ${e}`)}}updateRegisterValues(e){e.forEach((e=>{this.registerMap[e.number].setValue(e.value)})),this.fireCb()}}t.RegisterTreeForSession=p,t.RegisterTreeProvider=class{constructor(){this._onDidChangeTreeData=new s.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.sessionRegistersMap=new Map,this.oldState=new Map}refresh(e){const t=this.sessionRegistersMap.get(e.id);t&&t.refresh()}getTreeItem(e){return null==e?void 0:e.getTreeItem()}getChildren(e){const t=Array.from(this.sessionRegistersMap.values());return e?e.getChildren():0===t.length?[new u.MessageNode("DEPRECATION NOTICE: Hover for more info.",l)]:1===t.length?t[0].getChildren():t}debugSessionTerminated(e){const t=this.sessionRegistersMap.get(e.id);t&&(this.oldState.set(e.name,t.myTreeItem.collapsibleState),this.sessionRegistersMap.delete(e.id),t.sessionTerminated(),this._onDidChangeTreeData.fire(void 0))}debugSessionStarted(e){if(!this.sessionRegistersMap.get(e.id)){let t=this.oldState.get(e.name);void 0===t&&(t=0===this.sessionRegistersMap.size?o.TreeItemCollapsibleState.Expanded:o.TreeItemCollapsibleState.Collapsed);const r=new p(e,t,(()=>{this._onDidChangeTreeData.fire(void 0)}));this.sessionRegistersMap.set(e.id,r),this._onDidChangeTreeData.fire(void 0)}}debugStopped(e){const t=this.sessionRegistersMap.get(e.id);t?t.refresh():this.debugSessionStarted(e)}debugContinued(){}}},4942:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(6828),n=r(2037),i=r(1017),o=r(7147),a=r(387),c=r(3021),u=s.extensions.getExtension("marus25.cortex-debug"),h=u.id,l=u.packageJSON.version;let p,d=null;const f={};function m(){const e=s.workspace.getConfiguration("telemetry"),t=s.workspace.getConfiguration("cortex-debug");return e.enableTelemetry&&t.enableTelemetry}t.default={beginSession:function(e,t){m()&&(t.rtos&&p.set("cd4",t.rtos),t.device&&p.set("cd3",t.device),p.set("cd5",t.servertype),p.screenview("Debug Session","Cortex-Debug",l,h),p.event("Session","Started","",0,{sessionControl:"start"}),t.swoConfig.enabled&&p.event("SWO","Used"),t.rttConfig.enabled&&p.event("RTT","Used"),t.graphConfig.length>0&&p.event("Graphing","Used"),f[e]=new Date,p.send())},endSession:function(e){if(!m())return;const t=f[e];if(t){const r=((new Date).getTime()-t.getTime())/1e3;delete f[e],setTimeout((()=>{p.event("Session","Completed","",Math.round(r),{sessionControl:"end"}).send()}),500)}},activate:function(e){m()&&(p=a("UA-113901869-1",function(){if(!d){const e=i.join(n.homedir(),".cortex-debug");if(o.existsSync(e)){const t=o.readFileSync(e,"utf8"),r=JSON.parse(t);d=r.uuid}else{d=c.v4();const t={uuid:d};o.writeFileSync(e,JSON.stringify(t),"utf8")}}return d}()),p.set("cd2",l),p.set("cd1",s.version),p.set("cd6",n.platform()),p.set("cd7",n.release()),p.set("cd8",process.versions.node))},deactivate:function(){m()},sendEvent:function(e,t,r,s,n={}){m()&&p.event(e,t,r,Math.round(s),n).send()}}},2057:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STLinkServerController=void 0;const s=r(3200),n=r(2037),i=r(1017),o=r(7147),a=r(2361),c=function(){switch(n.platform()){case"win32":return"C:\\ST";case"darwin":return"/Applications/STM32CubeIDE.app/Contents/Eclipse";default:const e=(process.env.HOME||n.homedir())+"/st";return o.existsSync(e)?e:"/opt/st"}}(),u="win32"===n.platform()?"ST-LINK_gdbserver.exe":"ST-LINK_gdbserver",h=/^STM32CubeIDE_(.+)$/i,l=/com\.st\.stm32cube\.ide\.mcu\.externaltools\.stlink-gdb-server\.(.+)/,p=/com\.st\.stm32cube\.ide\.mcu\.externaltools\.cubeprogrammer\.(.+)/,d=/com\.st\.stm32cube\.ide\.mcu\.externaltools\.gnu-tools-for-stm32\.(.+)/;function f(e,t,r,s=""){const n=i.join(...e);let a;try{for(const e of o.readdirSync(n).sort()){const c=i.join(n,e);if(!o.statSync(c).isDirectory())continue;const u=e.match(t);if(u){const e=i.join(n,u[0],r,s);o.existsSync(e)&&(!a||a.localeCompare(e,void 0,{sensitivity:"base",numeric:!0})<0)&&(a=e)}}}catch(e){}return a||s}class m extends a.EventEmitter{constructor(){super(),this.name="ST-LINK",this.portsNeeded=["gdbPort"]}static getSTMCubeIdeDir(){switch(n.platform()){case"darwin":return c;case"linux":return f([c],h,"");default:return f([c],h,"STM32CubeIDE")}}static getArmToolchainPath(){return f([this.getSTMCubeIdeDir(),"plugins"],d,"tools/bin")}setPorts(e){this.ports=e}setArguments(e){this.args=e}customRequest(e,t,r){return!1}initCommands(){return[`target-select extended-remote localhost:${this.ports[s.createPortName(this.args.targetProcessor)]}`]}launchCommands(){return[...s.genDownloadCommands(this.args,['interpreter-exec console "monitor reset"']),'interpreter-exec console "monitor reset"','interpreter-exec console "monitor halt"',"enable-pretty-printing"]}attachCommands(){return["enable-pretty-printing"]}restartCommands(){return['interpreter-exec console "monitor reset"']}swoAndRTTCommands(){return[]}serverExecutable(){return this.args.serverpath?this.args.serverpath:f([m.getSTMCubeIdeDir(),"plugins"],l,"tools/bin",u)}allocateRTTPorts(){return Promise.resolve()}serverArguments(){let e=["-p",this.ports.gdbPort.toString()],t=this.args.stm32cubeprogrammer;return t||(t=f([m.getSTMCubeIdeDir(),"plugins"],p,"tools/bin"),t||(t="win32"===n.platform()?process.env.ProgramFiles+"\\STMicroelectronics\\STM32Cube\\STM32CubeProgrammer\\bin":"darwin"===n.platform()?"/Applications/STMicroelectronics/STM32Cube/STM32CubeProgrammer/STM32CubeProgrammer.app/Contents/MacOs/bin":"/usr/local/STMicroelectronics/STM32Cube/STM32CubeProgrammer/bin")),e.push("-cp",t),"jtag"!==this.args.interface&&"cjtag"!==this.args.interface&&e.push("--swd"),this.args.serialNumber&&e.push("--serial-number",this.args.serialNumber),"attach"===this.args.request&&e.push("--attach"),e.push("--halt"),this.args.serverArgs&&(e=e.concat(this.args.serverArgs)),e}initMatch(){return/(Waiting for debugger connection|Listening at).*/gi}serverLaunchStarted(){}serverLaunchCompleted(){}debuggerLaunchStarted(){}debuggerLaunchCompleted(){}}t.STLinkServerController=m},565:(e,t)=>{"use strict";var r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.SymbolScope=t.SymbolType=void 0,(s=t.SymbolType||(t.SymbolType={}))[s.Function=0]="Function",s[s.File=1]="File",s[s.Object=2]="Object",s[s.Normal=3]="Normal",(r=t.SymbolScope||(t.SymbolScope={}))[r.Local=0]="Local",r[r.Global=1]="Global",r[r.Neither=2]="Neither",r[r.Both=3]="Both"},3725:function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,i){function o(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PortStatusArgs=t.TcpPortScanner=void 0;const n=r(2037),i=r(1808),o=r(2081),a=r(5497),c=r(2361);let u=!1;function h(...e){u&&console.log(...e)}class l{static EmitAllocated(e){if(e&&e.length){for(const t of e)l.AvoidPorts.add(t);l.PortAllocated.emit("allocated",e)}}static isPortInUse(e,t,r=9999){return h(`isPortInUse: testing port ${t}:${e}`),new Promise(((s,n)=>{const o=i.createServer((e=>{}));o.once("error",(i=>{const a=i.code;a&&"EADDRINUSE"===a||"EACCES"===a?("EACCES"===a&&h(`isPortInUse: port ${t}:${e} returned code EACCES?, ${r}`),h(`isPortInUse: port ${t}:${e} is busy, ${r}`),s(!0)):(h(`isPortInUse: port ${t}:${e} unexpected error , ${r}`,i),n(i)),o.close()})),o.once("close",(()=>{h(`isPortInUse: port ${t}:${e} is free, ${r}`),s(!1)})),o.listen(e,t,(()=>{o.close()}))}))}static isPortInUseEx(e,t,r){const n=l.SeqNumber++,i=l.getLocalHostAliases();return new Promise((t=>s(this,void 0,void 0,(function*(){if(r&&r.has(e))t(!0);else{for(const r of i)try{if(yield l.isPortInUse(e,r,n))return void t(!0)}catch(e){return void t(!0)}t(!1)}}))))}static findFreePorts({min:e,max:t,retrieve:r=1,consecutive:s=!1,doLog:n=!1},i=l.DefaultHost){u=u||n;let o=[];const a=[],c=r;return new Promise(((r,n)=>{const p=e=>{l.EmitAllocated(e),r(e)};c<=0?p(o):function e(r,i){h(`findFreePorts: ******** Next ${r}`);const d=process.hrtime();l.isPortInUseEx(r,i,l.AvoidPorts).then((l=>{const f=process.hrtime(d);if(l?(a.push(r),h(`Busy ports = ${a}`)):(s&&o.length>0&&r!==1+o[o.length-1]&&(h("TcpPortHelper.findFreePorts: Oops, reset for consecutive ports requirement"),o=[]),o.push(r),h(`Free ports = ${o}`)),u){const e=(f[1]/1e6).toFixed(2),t=`${f[0]}s ${e}ms`;h(`TcpPortHelper.findFreePorts Port ${i}:${r} `+(l?"busy":"free")+`, Found: ${o.length} of ${c} needed ${t}`)}o.length===c?p(o):r<t?e(r+1,i):n(new Error(`Only found ${o.length} of ${c} ports`))})).catch((e=>{n(e)}))}(e,i)}))}static getOsNetProbeCmd(){if(""===l.OSNetProbeCmd){const e=a.sync,t=n.platform(),r="win32"===t,s="darwin"===t;r||s||!e("ss")?e("netstat")?(l.OSNetProbeCmd=r?"netstat -nap tcp":"netstat -nap tcp -f inet",l.OSNetProbeCmdRegexpStr="[tT][cC][pP][^\\n]*[:\\.]XYZZY\\s+[^\\s]+\\s+LISTEN[^\\n]*\\n"):s&&e("lsof")?(l.OSNetProbeCmd="lsof -n -iTCP:XYZZY -sTCP:LISTEN",l.OSNetProbeCmdRegexpStr="IPv4[^\\n]+:XYZZY\\s[^\\n]*\\(LISTEN\\)[^\\n]*\\n"):l.OSNetProbeCmd="?":(l.OSNetProbeCmd="ss -nlt",l.OSNetProbeCmdRegexpStr="LISTEN\\s+[^\\n]*:XYZZY\\s+[^\\s]+[^\\n]*\\n")}return l.OSNetProbeCmd}static waitForPortOpenOSUtl(e,t=100,r=5e3,s=!0,n=!0){const i=l.getOsNetProbeCmd().replace("XYZZY",e.toString());if(u=u||n,h(i),s&&"?"===i)return l.waitForPortOpen(e,l.DefaultHost,!0,t,r);const a=l.OSNetProbeCmdRegexpStr.replace("XYZZY",e.toString());h(a);const c=new RegExp(a),p=Date.now();let d=!0;return t=Math.max(t,1),new Promise((function e(s,n){if("?"===i)return n(new Error("failed"));o.exec(i,((o,a)=>{if(o&&!i.startsWith("lsof"))return n(o);if(c.test(a))return h(a.match(c).join("\n")),s();{d&&(d=!1);const i=Date.now()-p;if(!(i<r))return n(new Error("timeout"));h(`waitForPortOpenOSUtl: Setting timeout for ${t}ms, curTime = ${i}ms`),setTimeout((()=>{e(s,n)}),t)}}))}))}static waitForPortStatusEx(e){e.startTimeMs=Date.now();const t=e.checkLocalHostAliases?l.isPortInUseEx:l.isPortInUse;return new Promise((function r(s,n){t(e.port,e.host,null).then((t=>{if(t===e.desiredStatus)return s();throw new Error("tryagain")})).catch((t=>"tryagain"!==t.message?n(t):Date.now()-e.startTimeMs<e.timeOutMs?void setTimeout((()=>{r(s,n)}),e.retryTimeMs):n(new Error("timeout"))))}))}static waitForPortStatus(e,t=l.DefaultHost,r=!0,s=!0,n=100,i=5e3){n=Math.max(n,1);const o=new p(r,e,t,s,n,i);return l.waitForPortStatusEx(o)}static waitForPortOpen(e,t=l.DefaultHost,r=!0,s=100,n=5e3){s=Math.max(s,1);const i=new p(!0,e,t,r,s,n);return l.waitForPortStatusEx(i)}static waitForPortClosed(e,t=l.DefaultHost,r=!0,s=100,n=5e3){s=Math.max(s,1);const i=new p(!1,e,t,r,s,n);return l.waitForPortStatusEx(i)}static getLocalHostAliases(){if(0===l.localHostAliases.length){l.localHostAliases=["127.0.0.1","0.0.0.0"];const e=n.networkInterfaces();Object.keys(e).forEach((t=>{e[t].forEach((e=>{e.internal&&"ipv4"===e.family.toLowerCase()&&-1===l.localHostAliases.indexOf(e.address)&&l.localHostAliases.push(e.address)}))}))}return l.localHostAliases}static shouldUseServerMethod(e){return!l.ForceClientMethod&&(!e||"localhost"===e.toLowerCase()||l.getLocalHostAliases().indexOf(e)>=0)}}t.TcpPortScanner=l,l.ForceClientMethod=!1,l.DefaultHost="0.0.0.0",l.PortAllocated=new c.EventEmitter,l.AvoidPorts=new Set,l.SeqNumber=0,l.OSNetProbeCmd="",l.OSNetProbeCmdRegexpStr="",l.localHostAliases=[];class p{constructor(e,t,r=l.DefaultHost,s=!0,n=100,i=5e3){this.desiredStatus=e,this.port=t,this.host=r,this.checkLocalHostAliases=s,this.retryTimeMs=n,this.timeOutMs=i,this.startTimeMs=0,this.retryTimeMs=Math.max(this.retryTimeMs,1)}}t.PortStatusArgs=p},387:(e,t,r)=>{e.exports=r(5327)},5858:e=>{e.exports={protocolVersion:"1",hostname:"https://www.google-analytics.com",path:"/collect",batchPath:"/batch",batching:!0,batchSize:10,acceptedParameters:["v","tid","aip","ds","qt","z","cid","uid","sc","uip","ua","geoid","dr","cn","cs","cm","ck","cc","ci","gclid","dclid","sr","vp","de","sd","ul","je","fl","t","ni","dl","dh","dp","dt","cd","linkid","an","aid","av","aiid","ec","ea","el","ev","ti","ta","tr","ts","tt","in","ip","iq","ic","iv","cu","pa","tcc","pal","cos","col","promoa","sn","sa","st","utc","utv","utt","utl","plt","dns","pdt","rrt","tcp","srt","dit","clt","exd","exf","xid","xvar"],acceptedParametersRegex:[/^cm[0-9]+$/,/^cd[0-9]+$/,/^cg(10|[0-9])$/,/pr[0-9]{1,3}id/,/pr[0-9]{1,3}nm/,/pr[0-9]{1,3}br/,/pr[0-9]{1,3}ca/,/pr[0-9]{1,3}va/,/pr[0-9]{1,3}pr/,/pr[0-9]{1,3}qt/,/pr[0-9]{1,3}cc/,/pr[0-9]{1,3}ps/,/pr[0-9]{1,3}cd[0-9]{1,3}/,/pr[0-9]{1,3}cm[0-9]{1,3}/,/il[0-9]{1,3}nm/,/il[0-9]{1,3}pi[0-9]{1,3}id/,/il[0-9]{1,3}pi[0-9]{1,3}nm/,/il[0-9]{1,3}pi[0-9]{1,3}br/,/il[0-9]{1,3}pi[0-9]{1,3}ca/,/il[0-9]{1,3}pi[0-9]{1,3}va/,/il[0-9]{1,3}pi[0-9]{1,3}ps/,/il[0-9]{1,3}pi[0-9]{1,3}pr/,/il[0-9]{1,3}pi[0-9]{1,3}cd[0-9]{1,3}/,/il[0-9]{1,3}pi[0-9]{1,3}cm[0-9]{1,3}/,/promo[0-9]{1,3}id/,/promo[0-9]{1,3}nm/,/promo[0-9]{1,3}cr/,/promo[0-9]{1,3}ps/],parametersMap:{protocolVersion:"v",trackingId:"tid",webPropertyId:"tid",anonymizeIp:"aip",dataSource:"ds",queueTime:"qt",cacheBuster:"z",clientId:"cid",userId:"uid",sessionControl:"sc",ipOverride:"uip",userAgentOverride:"ua",documentReferrer:"dr",campaignName:"cn",campaignSource:"cs",campaignMedium:"cm",campaignKeyword:"ck",campaignContent:"cc",campaignId:"ci",googleAdwordsId:"gclid",googleDisplayAdsId:"dclid",screenResolution:"sr",viewportSize:"vp",documentEncoding:"de",screenColors:"sd",userLanguage:"ul",javaEnabled:"je",flashVersion:"fl",hitType:"t","non-interactionHit":"ni",documentLocationUrl:"dl",documentHostName:"dh",documentPath:"dp",documentTitle:"dt",screenName:"cd",linkId:"linkid",applicationName:"an",applicationId:"aid",applicationVersion:"av",applicationInstallerId:"aiid",eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",transactionId:"ti",transactionAffiliation:"ta",transactionRevenue:"tr",transactionShipping:"ts",transactionTax:"tt",itemName:"in",itemPrice:"ip",itemQuantity:"iq",itemCode:"ic",itemCategory:"iv",currencyCode:"cu",socialNetwork:"sn",socialAction:"sa",socialActionTarget:"st",userTimingCategory:"utc",userTimingVariableName:"utv",userTimingTime:"utt",userTimingLabel:"utl",pageLoadTime:"plt",dnsTime:"dns",pageDownloadTime:"pdt",redirectResponseTime:"rrt",tcpConnectTime:"tcp",serverResponseTime:"srt",domInteractiveTime:"dit",contentLoadTime:"clt",exceptionDescription:"exd",isExceptionFatal:"exf","isExceptionFatal?":"exf",experimentId:"xid",experimentVariant:"xvar"}}},5327:(e,t,r)=>{var s=r(3021),n=r(3477),i=r(7310),o=r(5119),a=r(5858),c=r(8092),u=r(5158)("universal-analytics");function h(e,t,r){return new l(e,t,r)}e.exports=h;var l=e.exports.Visitor=function(e,t,r,s,n){if("object"==typeof e?(r=e,e=t=null):"object"==typeof t&&(r=t,t=null),this._queue=[],this.options=r||{},this.options.hostname&&(a.hostname=this.options.hostname),this.options.path&&(a.path=this.options.path),this.options.http){var o=i.parse(a.hostname);a.hostname="http://"+o.host}void 0!==this.options.enableBatching&&(a.batching=r.enableBatching),this.options.batchSize&&(a.batchSize=this.options.batchSize),this._context=s||{},this._persistentParams=n||{},this.tid=e||this.options.tid,this.cid=this._determineCid(t,this.options.cid,!1!==this.options.strictCidFormat),this.options.uid&&(this.uid=this.options.uid)};e.exports.middleware=function(t,r){this.tid=t,this.options=r||{};var s=this.options.cookieName||"_ga",n=this.options.instanceName||"visitor";return delete this.options.instanceName,function(i,o,a){if(i[n]=e.exports.createFromSession(i.session),i[n])return a();var c;if(i.cookies&&i.cookies[s]){var u=i.cookies[s].split(".");c=u[2]+"."+u[3]}i[n]=h(t,c,r),i.session&&(i.session.cid=i[n].cid),a()}},e.exports.createFromSession=function(e){if(e&&e.cid)return h(this.tid,e.cid,this.options)},l.prototype={debug:function(e){return u.enabled=0===arguments.length||e,u("visitor.debug() is deprecated: set DEBUG=universal-analytics to enable logging"),this},reset:function(){return this._context=null,this},set:function(e,t){this._persistentParams=this._persistentParams||{},this._persistentParams[e]=t},pageview:function(e,t,r,s,n){return"object"==typeof e&&null!=e?(s=e,"function"==typeof t&&(n=t),e=t=r=null):"function"==typeof t?(n=t,t=r=null):"function"==typeof r?(n=r,r=null):"function"==typeof s&&(n=s,s=null),s=this._translateParams(s),(s=Object.assign({},this._persistentParams||{},s)).dp=e||s.dp||this._context.dp,s.dh=t||s.dh||this._context.dh,s.dt=r||s.dt||this._context.dt,this._tidyParameters(s),s.dp||s.dl?this._withContext(s)._enqueue("pageview",s,n):this._handleError("Please provide either a page path (dp) or a document location (dl)",n)},screenview:function(e,t,r,s,n,i,o){return"object"==typeof e&&null!=e?(i=e,"function"==typeof t&&(o=t),e=t=r=s=n=null):"function"==typeof t?(o=t,t=r=s=n=null):"function"==typeof r?(o=r,r=s=n=null):"function"==typeof s?(o=s,s=n=null):"function"==typeof n?(o=n,n=null):"function"==typeof i&&(o=i,i=null),i=this._translateParams(i),(i=Object.assign({},this._persistentParams||{},i)).cd=e||i.cd||this._context.cd,i.an=t||i.an||this._context.an,i.av=r||i.av||this._context.av,i.aid=s||i.aid||this._context.aid,i.aiid=n||i.aiid||this._context.aiid,this._tidyParameters(i),i.cd&&i.an?this._withContext(i)._enqueue("screenview",i,o):this._handleError("Please provide at least a screen name (cd) and an app name (an)",o)},event:function(e,t,r,s,n,i){return"object"==typeof e&&null!=e?(n=e,"function"==typeof t&&(i=t),e=t=r=s=null):"function"==typeof r?(i=r,r=s=null):"function"==typeof s?(i=s,s=null):"function"==typeof n&&(i=n,n=null),n=this._translateParams(n),(n=Object.assign({},this._persistentParams||{},n)).ec=e||n.ec||this._context.ec,n.ea=t||n.ea||this._context.ea,n.el=r||n.el||this._context.el,n.ev=s||n.ev||this._context.ev,n.p=n.p||n.dp||this._context.p||this._context.dp,delete n.dp,this._tidyParameters(n),n.ec&&n.ea?this._withContext(n)._enqueue("event",n,i):this._handleError("Please provide at least an event category (ec) and an event action (ea)",i)},transaction:function(e,t,r,s,n,i,o){return"object"==typeof e?(i=e,"function"==typeof t&&(o=t),e=t=r=s=n=null):"function"==typeof t?(o=t,t=r=s=n=null):"function"==typeof r?(o=r,r=s=n=null):"function"==typeof s?(o=s,s=n=null):"function"==typeof n?(o=n,n=null):"function"==typeof i&&(o=i,i=null),i=this._translateParams(i),(i=Object.assign({},this._persistentParams||{},i)).ti=e||i.ti||this._context.ti,i.tr=t||i.tr||this._context.tr,i.ts=r||i.ts||this._context.ts,i.tt=s||i.tt||this._context.tt,i.ta=n||i.ta||this._context.ta,i.p=i.p||this._context.p||this._context.dp,this._tidyParameters(i),i.ti?this._withContext(i)._enqueue("transaction",i,o):this._handleError("Please provide at least a transaction ID (ti)",o)},item:function(e,t,r,s,n,i,o){return"object"==typeof e?(i=e,"function"==typeof t&&(o=t),e=t=r=s=n=null):"function"==typeof t?(o=t,t=r=s=n=null):"function"==typeof r?(o=r,r=s=n=null):"function"==typeof s?(o=s,s=n=null):"function"==typeof n?(o=n,n=null):"function"==typeof i&&(o=i,i=null),i=this._translateParams(i),(i=Object.assign({},this._persistentParams||{},i)).ip=e||i.ip||this._context.ip,i.iq=t||i.iq||this._context.iq,i.ic=r||i.ic||this._context.ic,i.in=s||i.in||this._context.in,i.iv=n||i.iv||this._context.iv,i.p=i.p||this._context.p||this._context.dp,i.ti=i.ti||this._context.ti,this._tidyParameters(i),i.ti?this._withContext(i)._enqueue("item",i,o):this._handleError("Please provide at least an item transaction ID (ti)",o)},exception:function(e,t,r,s){return"object"==typeof e?(r=e,"function"==typeof t&&(s=t),e=t=null):"function"==typeof t?(s=t,t=0):"function"==typeof r&&(s=r,r=null),r=this._translateParams(r),(r=Object.assign({},this._persistentParams||{},r)).exd=e||r.exd||this._context.exd,r.exf=+!!(t||r.exf||this._context.exf),0===r.exf&&delete r.exf,this._tidyParameters(r),this._withContext(r)._enqueue("exception",r,s)},timing:function(e,t,r,s,n,i){return"object"==typeof e?(n=e,"function"==typeof t&&(i=t),e=t=r=s=null):"function"==typeof t?(i=t,t=r=s=null):"function"==typeof r?(i=r,r=s=null):"function"==typeof s?(i=s,s=null):"function"==typeof n&&(i=n,n=null),n=this._translateParams(n),(n=Object.assign({},this._persistentParams||{},n)).utc=e||n.utc||this._context.utc,n.utv=t||n.utv||this._context.utv,n.utt=r||n.utt||this._context.utt,n.utl=s||n.utl||this._context.utl,this._tidyParameters(n),this._withContext(n)._enqueue("timing",n,i)},send:function(e){var t=this,r=1;e=e||function(){},u("Sending %d tracking call(s)",t._queue.length);var s=function(s){u("Finished sending tracking calls"),e.call(t,s||null,r-1)},i=function(){if(!t._queue.length)return s(null);var e=[];a.batching?e=t._queue.splice(0,Math.min(t._queue.length,a.batchSize)):e.push(t._queue.shift());var i=e.length>1,h=a.hostname+(i?a.batchPath:a.path);u("%d: %o",r++,e);var l=function(e){return e.map((function(e){return n.stringify(e)})).join("\n")}(e);c.post(h,l,t.options.headers,o)};function o(e){if(e)return s(e);i()}i()},_enqueue:function(e,t,r){return"function"==typeof t&&(r=t,t={}),t=this._translateParams(t)||{},Object.assign(t,{v:a.protocolVersion,tid:this.tid,cid:this.cid,t:e}),this.uid&&(t.uid=this.uid),this._queue.push(t),u.enabled&&this._checkParameters(t),u("Enqueued %s (%o)",e,t),r&&this.send(r),this},_handleError:function(e,t){return u("Error: %s",e),t&&t.call(this,new Error(e)),this},_determineCid:function(){var e,t=Array.prototype.splice.call(arguments,0),r=t.length-1,n=t[r];if(n)for(var i=0;i<r;i++){if(!1!==(e=o.ensureValidCid(t[i])))return e;null!=e&&u("Warning! Invalid UUID format '%s'",t[i])}else for(i=0;i<r;i++)if(t[i])return t[i];return s.v4()},_checkParameters:function(e){for(var t in e)-1!==a.acceptedParameters.indexOf(t)||a.acceptedParametersRegex.filter((function(e){return e.test(t)})).length||u("Warning! Unsupported tracking parameter %s (%s)",t,e[t])},_translateParams:function(e){var t={};for(var r in e)a.parametersMap.hasOwnProperty(r)?t[a.parametersMap[r]]=e[r]:t[r]=e[r];return t},_tidyParameters:function(e){for(var t in e)null!==e[t]&&void 0!==e[t]||delete e[t];return e},_withContext:function(e){var t=new l(this.tid,this.cid,this.options,e,this._persistentParams);return t._queue=this._queue,t}},l.prototype.pv=l.prototype.pageview,l.prototype.e=l.prototype.event,l.prototype.t=l.prototype.transaction,l.prototype.i=l.prototype.item},8092:(e,t,r)=>{const s=r(3685),n=r(5687),i=r(7310),o=r(5158)("universal-analytics");e.exports={post:function(e,t,r,a){!function(e,t,r,a={},c){const{hostname:u,port:h,pathname:l}=i.parse(e),p={hostname:u,port:h,path:l,method:t,headers:a},d=function(e){return"http:"===i.parse(e).protocol?s:n}(e).request(p,(function(e){!function(e,t){let r="";const{headers:s,statusCode:n}=e,i=n>=300;e.setEncoding("utf8"),e.on("data",(function(e){r+=e})),e.on("end",(function(){t(i?r:null,i?null:r,n,s)}))}(e,c)}));d.on("error",(function(e){c(e),o("Request error",e)})),d.write(r),d.end()}(e,"POST",t,r,a)}}},5119:e=>{e.exports.isUuid=function(e){return!!e&&(e=e.toString().toLowerCase(),/[0-9a-f]{8}\-?[0-9a-f]{4}\-?4[0-9a-f]{3}\-?[89ab][0-9a-f]{3}\-?[0-9a-f]{12}/.test(e))},e.exports.isCookieCid=function(e){return/^[0-9]+\.[0-9]+$/.test(e)},e.exports.ensureValidCid=function(e){return this.isUuid(e)?(e=e.replace(/\-/g,"")).substring(0,8)+"-"+e.substring(8,12)+"-"+e.substring(12,16)+"-"+e.substring(16,20)+"-"+e.substring(20):!!this.isCookieCid(e)&&e}},3021:(e,t,r)=>{"use strict";r.r(t),r.d(t,{NIL:()=>C,parse:()=>y,stringify:()=>l,v1:()=>g,v3:()=>v,v4:()=>w,v5:()=>T,validate:()=>u,version:()=>E});const s=require("crypto");var n=r.n(s);const i=new Uint8Array(256);let o=i.length;function a(){return o>i.length-16&&(n().randomFillSync(i),o=0),i.slice(o,o+=16)}const c=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,u=function(e){return"string"==typeof e&&c.test(e)},h=[];for(let e=0;e<256;++e)h.push((e+256).toString(16).substr(1));const l=function(e,t=0){const r=(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase();if(!u(r))throw TypeError("Stringified UUID is invalid");return r};let p,d,f=0,m=0;const g=function(e,t,r){let s=t&&r||0;const n=t||new Array(16);let i=(e=e||{}).node||p,o=void 0!==e.clockseq?e.clockseq:d;if(null==i||null==o){const t=e.random||(e.rng||a)();null==i&&(i=p=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==o&&(o=d=16383&(t[6]<<8|t[7]))}let c=void 0!==e.msecs?e.msecs:Date.now(),u=void 0!==e.nsecs?e.nsecs:m+1;const h=c-f+(u-m)/1e4;if(h<0&&void 0===e.clockseq&&(o=o+1&16383),(h<0||c>f)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=c,m=u,d=o,c+=122192928e5;const g=(1e4*(268435455&c)+u)%4294967296;n[s++]=g>>>24&255,n[s++]=g>>>16&255,n[s++]=g>>>8&255,n[s++]=255&g;const y=c/4294967296*1e4&268435455;n[s++]=y>>>8&255,n[s++]=255&y,n[s++]=y>>>24&15|16,n[s++]=y>>>16&255,n[s++]=o>>>8|128,n[s++]=255&o;for(let e=0;e<6;++e)n[s+e]=i[e];return t||l(n)},y=function(e){if(!u(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};function b(e,t,r){function s(e,s,n,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof s&&(s=y(s)),16!==s.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(s),o.set(e,s.length),o=r(o),o[6]=15&o[6]|t,o[8]=63&o[8]|128,n){i=i||0;for(let e=0;e<16;++e)n[i+e]=o[e];return n}return l(o)}try{s.name=e}catch(e){}return s.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",s.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",s}const v=b("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),n().createHash("md5").update(e).digest()})),w=function(e,t,r){const s=(e=e||{}).random||(e.rng||a)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return l(s)},T=b("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),n().createHash("sha1").update(e).digest()})),C="00000000-0000-0000-0000-000000000000",E=function(e){if(!u(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},306:function(e,t){(function(){"use strict";t.stripBOM=function(e){return"\ufeff"===e[0]?e.substring(1):e}}).call(this)},4096:function(e,t,r){(function(){"use strict";var e,s,n,i,o,a={}.hasOwnProperty;e=r(5532),s=r(8381).defaults,i=function(e){return"string"==typeof e&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},o=function(e){return"<![CDATA["+n(e)+"]]>"},n=function(e){return e.replace("]]>","]]]]><![CDATA[>")},t.Builder=function(){function t(e){var t,r,n;for(t in this.options={},r=s[.2])a.call(r,t)&&(n=r[t],this.options[t]=n);for(t in e)a.call(e,t)&&(n=e[t],this.options[t]=n)}return t.prototype.buildObject=function(t){var r,n,c,u,h,l;return r=this.options.attrkey,n=this.options.charkey,1===Object.keys(t).length&&this.options.rootName===s[.2].rootName?t=t[h=Object.keys(t)[0]]:h=this.options.rootName,l=this,c=function(e,t){var s,u,h,p,d,f;if("object"!=typeof t)l.options.cdata&&i(t)?e.raw(o(t)):e.txt(t);else if(Array.isArray(t)){for(p in t)if(a.call(t,p))for(d in u=t[p])h=u[d],e=c(e.ele(d),h).up()}else for(d in t)if(a.call(t,d))if(u=t[d],d===r){if("object"==typeof u)for(s in u)f=u[s],e=e.att(s,f)}else if(d===n)e=l.options.cdata&&i(u)?e.raw(o(u)):e.txt(u);else if(Array.isArray(u))for(p in u)a.call(u,p)&&(e="string"==typeof(h=u[p])?l.options.cdata&&i(h)?e.ele(d).raw(o(h)).up():e.ele(d,h).up():c(e.ele(d),h).up());else"object"==typeof u?e=c(e.ele(d),u).up():"string"==typeof u&&l.options.cdata&&i(u)?e=e.ele(d).raw(o(u)).up():(null==u&&(u=""),e=e.ele(d,u.toString()).up());return e},u=e.create(h,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),c(u,t).end(this.options.renderOpts)},t}()}).call(this)},8381:function(e,t){(function(){t.defaults={.1:{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},.2:{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},9082:function(e,t,r){(function(){"use strict";var e,s,n,i,o,a,c,u,h=function(e,t){return function(){return e.apply(t,arguments)}},l={}.hasOwnProperty;c=r(6099),n=r(2361),e=r(306),a=r(7526),u=r(9512).setImmediate,s=r(8381).defaults,i=function(e){return"object"==typeof e&&null!=e&&0===Object.keys(e).length},o=function(e,t,r){var s,n;for(s=0,n=e.length;s<n;s++)t=(0,e[s])(t,r);return t},t.Parser=function(r){function n(e){var r,n,i;if(this.parseStringPromise=h(this.parseStringPromise,this),this.parseString=h(this.parseString,this),this.reset=h(this.reset,this),this.assignOrPush=h(this.assignOrPush,this),this.processAsync=h(this.processAsync,this),!(this instanceof t.Parser))return new t.Parser(e);for(r in this.options={},n=s[.2])l.call(n,r)&&(i=n[r],this.options[r]=i);for(r in e)l.call(e,r)&&(i=e[r],this.options[r]=i);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(a.normalize)),this.reset()}return function(e,t){for(var r in t)l.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(n,r),n.prototype.processAsync=function(){var e,t;try{return this.remaining.length<=this.options.chunkSize?(e=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(e),this.saxParser.close()):(e=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(e),u(this.processAsync))}catch(e){if(t=e,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},n.prototype.assignOrPush=function(e,t,r){return t in e?(e[t]instanceof Array||(e[t]=[e[t]]),e[t].push(r)):this.options.explicitArray?e[t]=[r]:e[t]=r},n.prototype.reset=function(){var e,t,r,s,n;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(n=this,function(e){if(n.saxParser.resume(),!n.saxParser.errThrown)return n.saxParser.errThrown=!0,n.emit("error",e)}),this.saxParser.onend=function(e){return function(){if(!e.saxParser.ended)return e.saxParser.ended=!0,e.emit("end",e.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,s=[],e=this.options.attrkey,t=this.options.charkey,this.saxParser.onopentag=function(r){return function(n){var i,a,c,u,h;if((c={})[t]="",!r.options.ignoreAttrs)for(i in h=n.attributes)l.call(h,i)&&(e in c||r.options.mergeAttrs||(c[e]={}),a=r.options.attrValueProcessors?o(r.options.attrValueProcessors,n.attributes[i],i):n.attributes[i],u=r.options.attrNameProcessors?o(r.options.attrNameProcessors,i):i,r.options.mergeAttrs?r.assignOrPush(c,u,a):c[e][u]=a);return c["#name"]=r.options.tagNameProcessors?o(r.options.tagNameProcessors,n.name):n.name,r.options.xmlns&&(c[r.options.xmlnskey]={uri:n.uri,local:n.local}),s.push(c)}}(this),this.saxParser.onclosetag=function(e){return function(){var r,n,a,c,u,h,p,d,f,m;if(h=s.pop(),u=h["#name"],e.options.explicitChildren&&e.options.preserveChildrenOrder||delete h["#name"],!0===h.cdata&&(r=h.cdata,delete h.cdata),f=s[s.length-1],h[t].match(/^\s*$/)&&!r?(n=h[t],delete h[t]):(e.options.trim&&(h[t]=h[t].trim()),e.options.normalize&&(h[t]=h[t].replace(/\s{2,}/g," ").trim()),h[t]=e.options.valueProcessors?o(e.options.valueProcessors,h[t],u):h[t],1===Object.keys(h).length&&t in h&&!e.EXPLICIT_CHARKEY&&(h=h[t])),i(h)&&(h=""!==e.options.emptyTag?e.options.emptyTag:n),null!=e.options.validator&&(m="/"+function(){var e,t,r;for(r=[],e=0,t=s.length;e<t;e++)c=s[e],r.push(c["#name"]);return r}().concat(u).join("/"),function(){var t;try{h=e.options.validator(m,f&&f[u],h)}catch(r){return t=r,e.emit("error",t)}}()),e.options.explicitChildren&&!e.options.mergeAttrs&&"object"==typeof h)if(e.options.preserveChildrenOrder){if(f){for(a in f[e.options.childkey]=f[e.options.childkey]||[],p={},h)l.call(h,a)&&(p[a]=h[a]);f[e.options.childkey].push(p),delete h["#name"],1===Object.keys(h).length&&t in h&&!e.EXPLICIT_CHARKEY&&(h=h[t])}}else c={},e.options.attrkey in h&&(c[e.options.attrkey]=h[e.options.attrkey],delete h[e.options.attrkey]),!e.options.charsAsChildren&&e.options.charkey in h&&(c[e.options.charkey]=h[e.options.charkey],delete h[e.options.charkey]),Object.getOwnPropertyNames(h).length>0&&(c[e.options.childkey]=h),h=c;return s.length>0?e.assignOrPush(f,u,h):(e.options.explicitRoot&&(d=h,(h={})[u]=d),e.resultObject=h,e.saxParser.ended=!0,e.emit("end",e.resultObject))}}(this),r=function(e){return function(r){var n,i;if(i=s[s.length-1])return i[t]+=r,e.options.explicitChildren&&e.options.preserveChildrenOrder&&e.options.charsAsChildren&&(e.options.includeWhiteChars||""!==r.replace(/\\n/g,"").trim())&&(i[e.options.childkey]=i[e.options.childkey]||[],(n={"#name":"__text__"})[t]=r,e.options.normalize&&(n[t]=n[t].replace(/\s{2,}/g," ").trim()),i[e.options.childkey].push(n)),i}}(this),this.saxParser.ontext=r,this.saxParser.oncdata=function(e){var t;if(t=r(e))return t.cdata=!0}},n.prototype.parseString=function(t,r){var s;null!=r&&"function"==typeof r&&(this.on("end",(function(e){return this.reset(),r(null,e)})),this.on("error",(function(e){return this.reset(),r(e)})));try{return""===(t=t.toString()).trim()?(this.emit("end",null),!0):(t=e.stripBOM(t),this.options.async?(this.remaining=t,u(this.processAsync),this.saxParser):this.saxParser.write(t).close())}catch(e){if(s=e,!this.saxParser.errThrown&&!this.saxParser.ended)return this.emit("error",s),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw s}},n.prototype.parseStringPromise=function(e){return new Promise((t=this,function(r,s){return t.parseString(e,(function(e,t){return e?s(e):r(t)}))}));var t},n}(n),t.parseString=function(e,r,s){var n,i;return null!=s?("function"==typeof s&&(n=s),"object"==typeof r&&(i=r)):("function"==typeof r&&(n=r),i={}),new t.Parser(i).parseString(e,n)},t.parseStringPromise=function(e,r){var s;return"object"==typeof r&&(s=r),new t.Parser(s).parseStringPromise(e)}}).call(this)},7526:function(e,t){(function(){"use strict";var e;e=new RegExp(/(?!xmlns)^.*:/),t.normalize=function(e){return e.toLowerCase()},t.firstCharLowerCase=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.stripPrefix=function(t){return t.replace(e,"")},t.parseNumbers=function(e){return isNaN(e)||(e=e%1==0?parseInt(e,10):parseFloat(e)),e},t.parseBooleans=function(e){return/^(?:true|false)$/i.test(e)&&(e="true"===e.toLowerCase()),e}}).call(this)},5055:function(e,t,r){(function(){"use strict";var e,s,n,i,o={}.hasOwnProperty;s=r(8381),e=r(4096),n=r(9082),i=r(7526),t.defaults=s.defaults,t.processors=i,t.ValidationError=function(e){function t(e){this.message=e}return function(e,t){for(var r in t)o.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(t,Error),t}(),t.Builder=e.Builder,t.Parser=n.Parser,t.parseString=n.parseString,t.parseStringPromise=n.parseStringPromise}).call(this)},7557:function(e){(function(){e.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},9335:function(e){(function(){e.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},8369:function(e){(function(){var t,r,s,n,i,o,a,c=[].slice,u={}.hasOwnProperty;t=function(){var e,t,r,s,n,o;if(o=arguments[0],n=2<=arguments.length?c.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(e=0,r=n.length;e<r;e++)if(null!=(s=n[e]))for(t in s)u.call(s,t)&&(o[t]=s[t]);return o},i=function(e){return!!e&&"[object Function]"===Object.prototype.toString.call(e)},o=function(e){var t;return!!e&&("function"==(t=typeof e)||"object"===t)},s=function(e){return i(Array.isArray)?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},n=function(e){var t;if(s(e))return!e.length;for(t in e)if(u.call(e,t))return!1;return!0},a=function(e){var t,r;return o(e)&&(r=Object.getPrototypeOf(e))&&(t=r.constructor)&&"function"==typeof t&&t instanceof t&&Function.prototype.toString.call(t)===Function.prototype.toString.call(Object)},r=function(e){return i(e.valueOf)?e.valueOf():e},e.exports.assign=t,e.exports.isFunction=i,e.exports.isObject=o,e.exports.isArray=s,e.exports.isEmpty=n,e.exports.isPlainObject=a,e.exports.getValue=r}).call(this)},594:function(e){(function(){e.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},2750:function(e,t,r){(function(){var t;t=r(9335),r(2026),e.exports=function(){function e(e,r,s){if(this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==r)throw new Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(s),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(e.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(e.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(e.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"specified",{get:function(){return!0}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.toString=function(e){return this.options.writer.attribute(this,this.options.writer.filterOptions(e))},e.prototype.debugInfo=function(e){return null==(e=e||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+e+"}, parent: <"+this.parent.name+">"},e.prototype.isEqualNode=function(e){return e.namespaceURI===this.namespaceURI&&e.prefix===this.prefix&&e.localName===this.localName&&e.value===this.value},e}()}).call(this)},6170:function(e,t,r){(function(){var t,s,n={}.hasOwnProperty;t=r(9335),s=r(6488),e.exports=function(e){function r(e,s){if(r.__super__.constructor.call(this,e),null==s)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(s)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},r}(s)}).call(this)},6488:function(e,t,r){(function(){var t,s={}.hasOwnProperty;t=r(2026),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e),this.value=""}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.value},set:function(e){return this.value=e||""}}),Object.defineProperty(t.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(e){return this.value=e||""}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.substringData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.insertData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.deleteData=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.replaceData=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(e){return!!t.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.data===this.data},t}(t)}).call(this)},2096:function(e,t,r){(function(){var t,s,n={}.hasOwnProperty;t=r(9335),s=r(6488),e.exports=function(e){function r(e,s){if(r.__super__.constructor.call(this,e),null==s)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(s)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},r}(s)}).call(this)},383:function(e,t,r){(function(){var t,s;t=r(3933),s=r(6210),e.exports=function(){function e(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(e.prototype,"parameterNames",{get:function(){return new s(Object.keys(this.defaultParams))}}),e.prototype.getParameter=function(e){return this.params.hasOwnProperty(e)?this.params[e]:null},e.prototype.canSetParameter=function(e,t){return!0},e.prototype.setParameter=function(e,t){return null!=t?this.params[e]=t:delete this.params[e]},e}()}).call(this)},3933:function(e){(function(){e.exports=function(){function e(){}return e.prototype.handleError=function(e){throw new Error(e)},e}()}).call(this)},1770:function(e){(function(){e.exports=function(){function e(){}return e.prototype.hasFeature=function(e,t){return!0},e.prototype.createDocumentType=function(e,t,r){throw new Error("This DOM method is not implemented.")},e.prototype.createDocument=function(e,t,r){throw new Error("This DOM method is not implemented.")},e.prototype.createHTMLDocument=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},6210:function(e){(function(){e.exports=function(){function e(e){this.arr=e||[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this.arr.length}}),e.prototype.item=function(e){return this.arr[e]||null},e.prototype.contains=function(e){return-1!==this.arr.indexOf(e)},e}()}).call(this)},1179:function(e,t,r){(function(){var t,s,n={}.hasOwnProperty;s=r(2026),t=r(9335),e.exports=function(e){function r(e,s,n,i,o,a){if(r.__super__.constructor.call(this,e),null==s)throw new Error("Missing DTD element name. "+this.debugInfo());if(null==n)throw new Error("Missing DTD attribute name. "+this.debugInfo(s));if(!i)throw new Error("Missing DTD attribute type. "+this.debugInfo(s));if(!o)throw new Error("Missing DTD attribute default. "+this.debugInfo(s));if(0!==o.indexOf("#")&&(o="#"+o),!o.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(s));if(a&&!o.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(s));this.elementName=this.stringify.name(s),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(n),this.attributeType=this.stringify.dtdAttType(i),a&&(this.defaultValue=this.stringify.dtdAttDefault(a)),this.defaultValueType=o}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),r.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},r}(s)}).call(this)},6347:function(e,t,r){(function(){var t,s,n={}.hasOwnProperty;s=r(2026),t=r(9335),e.exports=function(e){function r(e,s,n){if(r.__super__.constructor.call(this,e),null==s)throw new Error("Missing DTD element name. "+this.debugInfo());n||(n="(#PCDATA)"),Array.isArray(n)&&(n="("+n.join(",")+")"),this.name=this.stringify.name(s),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(n)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),r.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},r}(s)}).call(this)},9078:function(e,t,r){(function(){var t,s,n,i={}.hasOwnProperty;n=r(8369).isObject,s=r(2026),t=r(9335),e.exports=function(e){function r(e,s,i,o){if(r.__super__.constructor.call(this,e),null==i)throw new Error("Missing DTD entity name. "+this.debugInfo(i));if(null==o)throw new Error("Missing DTD entity value. "+this.debugInfo(i));if(this.pe=!!s,this.name=this.stringify.name(i),this.type=t.EntityDeclaration,n(o)){if(!o.pubID&&!o.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(i));if(o.pubID&&!o.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(i));if(this.internal=!1,null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID)),null!=o.nData&&(this.nData=this.stringify.dtdNData(o.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(i))}else this.value=this.stringify.dtdEntityValue(o),this.internal=!0}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return null}}),r.prototype.toString=function(e){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(e))},r}(s)}).call(this)},4777:function(e,t,r){(function(){var t,s,n={}.hasOwnProperty;s=r(2026),t=r(9335),e.exports=function(e){function r(e,s,n){if(r.__super__.constructor.call(this,e),null==s)throw new Error("Missing DTD notation name. "+this.debugInfo(s));if(!n.pubID&&!n.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(s));this.name=this.stringify.name(s),this.type=t.NotationDeclaration,null!=n.pubID&&(this.pubID=this.stringify.dtdPubID(n.pubID)),null!=n.sysID&&(this.sysID=this.stringify.dtdSysID(n.sysID))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),r.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},r}(s)}).call(this)},9077:function(e,t,r){(function(){var t,s,n,i={}.hasOwnProperty;n=r(8369).isObject,s=r(2026),t=r(9335),e.exports=function(e){function r(e,s,i,o){var a;r.__super__.constructor.call(this,e),n(s)&&(s=(a=s).version,i=a.encoding,o=a.standalone),s||(s="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(s),null!=i&&(this.encoding=this.stringify.xmlEncoding(i)),null!=o&&(this.standalone=this.stringify.xmlStandalone(o))}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),r.prototype.toString=function(e){return this.options.writer.declaration(this,this.options.writer.filterOptions(e))},r}(s)}).call(this)},6544:function(e,t,r){(function(){var t,s,n,i,o,a,c,u,h={}.hasOwnProperty;u=r(8369).isObject,c=r(2026),t=r(9335),s=r(1179),i=r(9078),n=r(6347),o=r(4777),a=r(663),e.exports=function(e){function r(e,s,n){var i,o,a,c,h,l;if(r.__super__.constructor.call(this,e),this.type=t.DocType,e.children)for(o=0,a=(c=e.children).length;o<a;o++)if((i=c[o]).type===t.Element){this.name=i.name;break}this.documentObject=e,u(s)&&(s=(h=s).pubID,n=h.sysID),null==n&&(n=(l=[s,n])[0],s=l[1]),null!=s&&(this.pubID=this.stringify.dtdPubID(s)),null!=n&&(this.sysID=this.stringify.dtdSysID(n))}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"entities",{get:function(){var e,r,s,n,i;for(n={},r=0,s=(i=this.children).length;r<s;r++)(e=i[r]).type!==t.EntityDeclaration||e.pe||(n[e.name]=e);return new a(n)}}),Object.defineProperty(r.prototype,"notations",{get:function(){var e,r,s,n,i;for(n={},r=0,s=(i=this.children).length;r<s;r++)(e=i[r]).type===t.NotationDeclaration&&(n[e.name]=e);return new a(n)}}),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),r.prototype.element=function(e,t){var r;return r=new n(this,e,t),this.children.push(r),this},r.prototype.attList=function(e,t,r,n,i){var o;return o=new s(this,e,t,r,n,i),this.children.push(o),this},r.prototype.entity=function(e,t){var r;return r=new i(this,!1,e,t),this.children.push(r),this},r.prototype.pEntity=function(e,t){var r;return r=new i(this,!0,e,t),this.children.push(r),this},r.prototype.notation=function(e,t){var r;return r=new o(this,e,t),this.children.push(r),this},r.prototype.toString=function(e){return this.options.writer.docType(this,this.options.writer.filterOptions(e))},r.prototype.ele=function(e,t){return this.element(e,t)},r.prototype.att=function(e,t,r,s,n){return this.attList(e,t,r,s,n)},r.prototype.ent=function(e,t){return this.entity(e,t)},r.prototype.pent=function(e,t){return this.pEntity(e,t)},r.prototype.not=function(e,t){return this.notation(e,t)},r.prototype.up=function(){return this.root()||this.documentObject},r.prototype.isEqualNode=function(e){return!!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.name===this.name&&e.publicId===this.publicId&&e.systemId===this.systemId},r}(c)}).call(this)},6934:function(e,t,r){(function(){var t,s,n,i,o,a,c,u={}.hasOwnProperty;c=r(8369).isPlainObject,n=r(1770),s=r(383),i=r(2026),t=r(9335),a=r(5549),o=r(6434),e.exports=function(e){function r(e){r.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new s,e||(e={}),e.writer||(e.writer=new o),this.options=e,this.stringify=new a(e)}return function(e,t){for(var r in t)u.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"implementation",{value:new n}),Object.defineProperty(r.prototype,"doctype",{get:function(){var e,r,s,n;for(r=0,s=(n=this.children).length;r<s;r++)if((e=n[r]).type===t.DocType)return e;return null}}),Object.defineProperty(r.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(r.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(r.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(r.prototype,"origin",{get:function(){return null}}),Object.defineProperty(r.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(r.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(r.prototype,"contentType",{get:function(){return null}}),r.prototype.end=function(e){var t;return t={},e?c(e)&&(t=e,e=this.options.writer):e=this.options.writer,e.document(this,e.filterOptions(t))},r.prototype.toString=function(e){return this.options.writer.document(this,this.options.writer.filterOptions(e))},r.prototype.createElement=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createTextNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createComment=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createCDATASection=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createProcessingInstruction=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createAttribute=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createEntityReference=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.importNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createElementNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementById=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.adoptNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.renameNode=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createEvent=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createNodeIterator=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createTreeWalker=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r}(i)}).call(this)},9227:function(e,t,r){(function(){var t,s,n,i,o,a,c,u,h,l,p,d,f,m,g,y,b,v,w,T,C,E,S,P={}.hasOwnProperty;S=r(8369),C=S.isObject,T=S.isFunction,E=S.isPlainObject,w=S.getValue,t=r(9335),d=r(6934),f=r(2161),i=r(6170),o=r(2096),g=r(9406),v=r(3595),m=r(9181),l=r(9077),p=r(6544),a=r(1179),u=r(9078),c=r(6347),h=r(4777),n=r(2750),b=r(5549),y=r(6434),s=r(594),e.exports=function(){function e(e,r,s){var n;this.name="?xml",this.type=t.Document,e||(e={}),n={},e.writer?E(e.writer)&&(n=e.writer,e.writer=new y):e.writer=new y,this.options=e,this.writer=e.writer,this.writerOptions=this.writer.filterOptions(n),this.stringify=new b(e),this.onDataCallback=r||function(){},this.onEndCallback=s||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return e.prototype.createChildNode=function(e){var r,s,n,i,o,a,c,u;switch(e.type){case t.CData:this.cdata(e.value);break;case t.Comment:this.comment(e.value);break;case t.Element:for(s in n={},c=e.attribs)P.call(c,s)&&(r=c[s],n[s]=r.value);this.node(e.name,n);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(e.value);break;case t.Text:this.text(e.value);break;case t.ProcessingInstruction:this.instruction(e.target,e.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+e.constructor.name)}for(o=0,a=(u=e.children).length;o<a;o++)i=u[o],this.createChildNode(i),i.type===t.Element&&this.up();return this},e.prototype.dummy=function(){return this},e.prototype.node=function(e,t,r){var s;if(null==e)throw new Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw new Error("Document can only have one root node. "+this.debugInfo(e));return this.openCurrent(),e=w(e),null==t&&(t={}),t=w(t),C(t)||(r=(s=[t,r])[0],t=s[1]),this.currentNode=new f(this,e,t),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this},e.prototype.element=function(e,r,s){var n,i,o,a,c,u;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(e)||C(e)||T(e))for(a=this.options.noValidation,this.options.noValidation=!0,(u=new d(this.options).element("TEMP_ROOT")).element(e),this.options.noValidation=a,i=0,o=(c=u.children).length;i<o;i++)n=c[i],this.createChildNode(n),n.type===t.Element&&this.up();else this.node(e,r,s);return this},e.prototype.attribute=function(e,t){var r,s;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(e));if(null!=e&&(e=w(e)),C(e))for(r in e)P.call(e,r)&&(s=e[r],this.attribute(r,s));else T(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.currentNode.attribs[e]=new n(this,e,""):null!=t&&(this.currentNode.attribs[e]=new n(this,e,t));return this},e.prototype.text=function(e){var t;return this.openCurrent(),t=new v(this,e),this.onData(this.writer.text(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.cdata=function(e){var t;return this.openCurrent(),t=new i(this,e),this.onData(this.writer.cdata(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.comment=function(e){var t;return this.openCurrent(),t=new o(this,e),this.onData(this.writer.comment(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.raw=function(e){var t;return this.openCurrent(),t=new g(this,e),this.onData(this.writer.raw(t,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.instruction=function(e,t){var r,s,n,i,o;if(this.openCurrent(),null!=e&&(e=w(e)),null!=t&&(t=w(t)),Array.isArray(e))for(r=0,i=e.length;r<i;r++)s=e[r],this.instruction(s);else if(C(e))for(s in e)P.call(e,s)&&(n=e[s],this.instruction(s,n));else T(t)&&(t=t.apply()),o=new m(this,e,t),this.onData(this.writer.processingInstruction(o,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},e.prototype.declaration=function(e,t,r){var s;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return s=new l(this,e,t,r),this.onData(this.writer.declaration(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.doctype=function(e,t,r){if(this.openCurrent(),null==e)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new p(this,t,r),this.currentNode.rootNodeName=e,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},e.prototype.dtdElement=function(e,t){var r;return this.openCurrent(),r=new c(this,e,t),this.onData(this.writer.dtdElement(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.attList=function(e,t,r,s,n){var i;return this.openCurrent(),i=new a(this,e,t,r,s,n),this.onData(this.writer.dtdAttList(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.entity=function(e,t){var r;return this.openCurrent(),r=new u(this,!1,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.pEntity=function(e,t){var r;return this.openCurrent(),r=new u(this,!0,e,t),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.notation=function(e,t){var r;return this.openCurrent(),r=new h(this,e,t),this.onData(this.writer.dtdNotation(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},e.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},e.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},e.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},e.prototype.openNode=function(e){var r,n,i,o;if(!e.isOpen){if(this.root||0!==this.currentLevel||e.type!==t.Element||(this.root=e),n="",e.type===t.Element){for(i in this.writerOptions.state=s.OpenTag,n=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<"+e.name,o=e.attribs)P.call(o,i)&&(r=o[i],n+=this.writer.attribute(r,this.writerOptions,this.currentLevel));n+=(e.children?">":"/>")+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=s.InsideTag}else this.writerOptions.state=s.OpenTag,n=this.writer.indent(e,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+e.rootNodeName,e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),e.children?(n+=" [",this.writerOptions.state=s.InsideTag):(this.writerOptions.state=s.CloseTag,n+=">"),n+=this.writer.endline(e,this.writerOptions,this.currentLevel);return this.onData(n,this.currentLevel),e.isOpen=!0}},e.prototype.closeNode=function(e){var r;if(!e.isClosed)return"",this.writerOptions.state=s.CloseTag,r=e.type===t.Element?this.writer.indent(e,this.writerOptions,this.currentLevel)+"</"+e.name+">"+this.writer.endline(e,this.writerOptions,this.currentLevel):this.writer.indent(e,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(e,this.writerOptions,this.currentLevel),this.writerOptions.state=s.None,this.onData(r,this.currentLevel),e.isClosed=!0},e.prototype.onData=function(e,t){return this.documentStarted=!0,this.onDataCallback(e,t+1)},e.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},e.prototype.debugInfo=function(e){return null==e?"":"node: <"+e+">"},e.prototype.ele=function(){return this.element.apply(this,arguments)},e.prototype.nod=function(e,t,r){return this.node(e,t,r)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.dec=function(e,t,r){return this.declaration(e,t,r)},e.prototype.dtd=function(e,t,r){return this.doctype(e,t,r)},e.prototype.e=function(e,t,r){return this.element(e,t,r)},e.prototype.n=function(e,t,r){return this.node(e,t,r)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},e.prototype.ent=function(e,t){return this.entity(e,t)},e.prototype.pent=function(e,t){return this.pEntity(e,t)},e.prototype.not=function(e,t){return this.notation(e,t)},e}()}).call(this)},8833:function(e,t,r){(function(){var t,s,n={}.hasOwnProperty;s=r(2026),t=r(9335),e.exports=function(e){function r(e){r.__super__.constructor.call(this,e),this.type=t.Dummy}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return""},r}(s)}).call(this)},2161:function(e,t,r){(function(){var t,s,n,i,o,a,c,u,h={}.hasOwnProperty;u=r(8369),c=u.isObject,a=u.isFunction,o=u.getValue,i=r(2026),t=r(9335),s=r(2750),n=r(663),e.exports=function(e){function r(e,s,n){var i,o,a,c;if(r.__super__.constructor.call(this,e),null==s)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(s),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,null!=n&&this.attribute(n),e.type===t.Document&&(this.isRoot=!0,this.documentObject=e,e.rootObject=this,e.children))for(o=0,a=(c=e.children).length;o<a;o++)if((i=c[o]).type===t.DocType){i.name=this.name;break}}return function(e,t){for(var r in t)h.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new n(this.attribs)),this.attributeMap}}),r.prototype.clone=function(){var e,t,r,s;for(t in(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attribs={},s=this.attribs)h.call(s,t)&&(e=s[t],r.attribs[t]=e.clone());return r.children=[],this.children.forEach((function(e){var t;return(t=e.clone()).parent=r,r.children.push(t)})),r},r.prototype.attribute=function(e,t){var r,n;if(null!=e&&(e=o(e)),c(e))for(r in e)h.call(e,r)&&(n=e[r],this.attribute(r,n));else a(t)&&(t=t.apply()),this.options.keepNullAttributes&&null==t?this.attribs[e]=new s(this,e,""):null!=t&&(this.attribs[e]=new s(this,e,t));return this},r.prototype.removeAttribute=function(e){var t,r,s;if(null==e)throw new Error("Missing attribute name. "+this.debugInfo());if(e=o(e),Array.isArray(e))for(r=0,s=e.length;r<s;r++)t=e[r],delete this.attribs[t];else delete this.attribs[e];return this},r.prototype.toString=function(e){return this.options.writer.element(this,this.options.writer.filterOptions(e))},r.prototype.att=function(e,t){return this.attribute(e,t)},r.prototype.a=function(e,t){return this.attribute(e,t)},r.prototype.getAttribute=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e].value:null},r.prototype.setAttribute=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNode=function(e){return this.attribs.hasOwnProperty(e)?this.attribs[e]:null},r.prototype.setAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.removeAttributeNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setAttributeNS=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.removeAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNodeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setAttributeNodeNS=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.hasAttribute=function(e){return this.attribs.hasOwnProperty(e)},r.prototype.hasAttributeNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setIdAttribute=function(e,t){return this.attribs.hasOwnProperty(e)?this.attribs[e].isId:t},r.prototype.setIdAttributeNS=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setIdAttributeNode=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByClassName=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.isEqualNode=function(e){var t,s,n;if(!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(e))return!1;if(e.namespaceURI!==this.namespaceURI)return!1;if(e.prefix!==this.prefix)return!1;if(e.localName!==this.localName)return!1;if(e.attribs.length!==this.attribs.length)return!1;for(t=s=0,n=this.attribs.length-1;0<=n?s<=n:s>=n;t=0<=n?++s:--s)if(!this.attribs[t].isEqualNode(e.attribs[t]))return!1;return!0},r}(i)}).call(this)},663:function(e){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.getNamedItem=function(e){return this.nodes[e]},e.prototype.setNamedItem=function(e){var t;return t=this.nodes[e.nodeName],this.nodes[e.nodeName]=e,t||null},e.prototype.removeNamedItem=function(e){var t;return t=this.nodes[e],delete this.nodes[e],t||null},e.prototype.item=function(e){return this.nodes[Object.keys(this.nodes)[e]]||null},e.prototype.getNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e.prototype.setNamedItemNS=function(e){throw new Error("This DOM method is not implemented.")},e.prototype.removeNamedItemNS=function(e,t){throw new Error("This DOM method is not implemented.")},e}()}).call(this)},2026:function(e,t,r){(function(){var t,s,n,i,o,a,c,u,h,l,p,d,f,m,g,y,b,v={}.hasOwnProperty;b=r(8369),y=b.isObject,g=b.isFunction,m=b.isEmpty,f=b.getValue,u=null,n=null,i=null,o=null,a=null,p=null,d=null,l=null,c=null,s=null,h=null,t=null,e.exports=function(){function e(e){this.parent=e,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,u||(u=r(2161),n=r(6170),i=r(2096),o=r(9077),a=r(6544),p=r(9406),d=r(3595),l=r(9181),c=r(8833),s=r(9335),h=r(2390),r(663),t=r(7557))}return Object.defineProperty(e.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(e.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(e.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(e.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new h(this.children)),this.childNodeList}}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e-1]||null}}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){var e;return e=this.parent.children.indexOf(this),this.parent.children[e+1]||null}}),Object.defineProperty(e.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(e.prototype,"textContent",{get:function(){var e,t,r,n,i;if(this.nodeType===s.Element||this.nodeType===s.DocumentFragment){for(i="",t=0,r=(n=this.children).length;t<r;t++)(e=n[t]).textContent&&(i+=e.textContent);return i}return null},set:function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),e.prototype.setParent=function(e){var t,r,s,n,i;for(this.parent=e,e&&(this.options=e.options,this.stringify=e.stringify),i=[],r=0,s=(n=this.children).length;r<s;r++)t=n[r],i.push(t.setParent(this));return i},e.prototype.element=function(e,t,r){var s,n,i,o,a,c,u,h,l,p,d;if(c=null,null===t&&null==r&&(t=(l=[{},null])[0],r=l[1]),null==t&&(t={}),t=f(t),y(t)||(r=(p=[t,r])[0],t=p[1]),null!=e&&(e=f(e)),Array.isArray(e))for(i=0,u=e.length;i<u;i++)n=e[i],c=this.element(n);else if(g(e))c=this.element(e.apply());else if(y(e)){for(a in e)if(v.call(e,a))if(d=e[a],g(d)&&(d=d.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))c=this.attribute(a.substr(this.stringify.convertAttKey.length),d);else if(!this.options.separateArrayItems&&Array.isArray(d)&&m(d))c=this.dummy();else if(y(d)&&m(d))c=this.element(a);else if(this.options.keepNullNodes||null!=d)if(!this.options.separateArrayItems&&Array.isArray(d))for(o=0,h=d.length;o<h;o++)n=d[o],(s={})[a]=n,c=this.element(s);else y(d)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===a.indexOf(this.stringify.convertTextKey)?c=this.element(d):(c=this.element(a)).element(d):c=this.element(a,d);else c=this.dummy()}else c=this.options.keepNullNodes||null!==r?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===e.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===e.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===e.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===e.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===e.indexOf(this.stringify.convertPIKey)?this.instruction(e.substr(this.stringify.convertPIKey.length),r):this.node(e,t,r):this.dummy();if(null==c)throw new Error("Could not create any elements with: "+e+". "+this.debugInfo());return c},e.prototype.insertBefore=function(e,t,r){var s,n,i,o,a;if(null!=e?e.type:void 0)return o=t,(i=e).setParent(this),o?(n=children.indexOf(o),a=children.splice(n),children.push(i),Array.prototype.push.apply(children,a)):children.push(i),i;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return n=this.parent.children.indexOf(this),a=this.parent.children.splice(n),s=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,a),s},e.prototype.insertAfter=function(e,t,r){var s,n,i;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(e));return n=this.parent.children.indexOf(this),i=this.parent.children.splice(n+1),s=this.parent.element(e,t,r),Array.prototype.push.apply(this.parent.children,i),s},e.prototype.remove=function(){var e;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return e=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[e,e-e+1].concat([])),this.parent},e.prototype.node=function(e,t,r){var s,n;return null!=e&&(e=f(e)),t||(t={}),t=f(t),y(t)||(r=(n=[t,r])[0],t=n[1]),s=new u(this,e,t),null!=r&&s.text(r),this.children.push(s),s},e.prototype.text=function(e){var t;return y(e)&&this.element(e),t=new d(this,e),this.children.push(t),this},e.prototype.cdata=function(e){var t;return t=new n(this,e),this.children.push(t),this},e.prototype.comment=function(e){var t;return t=new i(this,e),this.children.push(t),this},e.prototype.commentBefore=function(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.commentAfter=function(e){var t,r;return t=this.parent.children.indexOf(this),r=this.parent.children.splice(t+1),this.parent.comment(e),Array.prototype.push.apply(this.parent.children,r),this},e.prototype.raw=function(e){var t;return t=new p(this,e),this.children.push(t),this},e.prototype.dummy=function(){return new c(this)},e.prototype.instruction=function(e,t){var r,s,n,i,o;if(null!=e&&(e=f(e)),null!=t&&(t=f(t)),Array.isArray(e))for(i=0,o=e.length;i<o;i++)r=e[i],this.instruction(r);else if(y(e))for(r in e)v.call(e,r)&&(s=e[r],this.instruction(r,s));else g(t)&&(t=t.apply()),n=new l(this,e,t),this.children.push(n);return this},e.prototype.instructionBefore=function(e,t){var r,s;return r=this.parent.children.indexOf(this),s=this.parent.children.splice(r),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,s),this},e.prototype.instructionAfter=function(e,t){var r,s;return r=this.parent.children.indexOf(this),s=this.parent.children.splice(r+1),this.parent.instruction(e,t),Array.prototype.push.apply(this.parent.children,s),this},e.prototype.declaration=function(e,t,r){var n,i;return n=this.document(),i=new o(n,e,t,r),0===n.children.length?n.children.unshift(i):n.children[0].type===s.Declaration?n.children[0]=i:n.children.unshift(i),n.root()||n},e.prototype.dtd=function(e,t){var r,n,i,o,c,u,h,l,p;for(r=this.document(),n=new a(r,e,t),i=o=0,u=(l=r.children).length;o<u;i=++o)if(l[i].type===s.DocType)return r.children[i]=n,n;for(i=c=0,h=(p=r.children).length;c<h;i=++c)if(p[i].isRoot)return r.children.splice(i,0,n),n;return r.children.push(n),n},e.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},e.prototype.root=function(){var e;for(e=this;e;){if(e.type===s.Document)return e.rootObject;if(e.isRoot)return e;e=e.parent}},e.prototype.document=function(){var e;for(e=this;e;){if(e.type===s.Document)return e;e=e.parent}},e.prototype.end=function(e){return this.document().end(e)},e.prototype.prev=function(){var e;if((e=this.parent.children.indexOf(this))<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[e-1]},e.prototype.next=function(){var e;if(-1===(e=this.parent.children.indexOf(this))||e===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[e+1]},e.prototype.importDocument=function(e){var t;return(t=e.root().clone()).parent=this,t.isRoot=!1,this.children.push(t),this},e.prototype.debugInfo=function(e){var t,r;return null!=(e=e||this.name)||(null!=(t=this.parent)?t.name:void 0)?null==e?"parent: <"+this.parent.name+">":(null!=(r=this.parent)?r.name:void 0)?"node: <"+e+">, parent: <"+this.parent.name+">":"node: <"+e+">":""},e.prototype.ele=function(e,t,r){return this.element(e,t,r)},e.prototype.nod=function(e,t,r){return this.node(e,t,r)},e.prototype.txt=function(e){return this.text(e)},e.prototype.dat=function(e){return this.cdata(e)},e.prototype.com=function(e){return this.comment(e)},e.prototype.ins=function(e,t){return this.instruction(e,t)},e.prototype.doc=function(){return this.document()},e.prototype.dec=function(e,t,r){return this.declaration(e,t,r)},e.prototype.e=function(e,t,r){return this.element(e,t,r)},e.prototype.n=function(e,t,r){return this.node(e,t,r)},e.prototype.t=function(e){return this.text(e)},e.prototype.d=function(e){return this.cdata(e)},e.prototype.c=function(e){return this.comment(e)},e.prototype.r=function(e){return this.raw(e)},e.prototype.i=function(e,t){return this.instruction(e,t)},e.prototype.u=function(){return this.up()},e.prototype.importXMLBuilder=function(e){return this.importDocument(e)},e.prototype.replaceChild=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.removeChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendChild=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.hasChildNodes=function(){return 0!==this.children.length},e.prototype.cloneNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isSupported=function(e,t){return!0},e.prototype.hasAttributes=function(){return 0!==this.attribs.length},e.prototype.compareDocumentPosition=function(e){var r,s;return(r=this)===e?0:this.document()!==e.document()?(s=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?s|=t.Preceding:s|=t.Following,s):r.isAncestor(e)?t.Contains|t.Preceding:r.isDescendant(e)?t.Contains|t.Following:r.isPreceding(e)?t.Preceding:t.Following},e.prototype.isSameNode=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupPrefix=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isDefaultNamespace=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.lookupNamespaceURI=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(e){var t,r,s;if(e.nodeType!==this.nodeType)return!1;if(e.children.length!==this.children.length)return!1;for(t=r=0,s=this.children.length-1;0<=s?r<=s:r>=s;t=0<=s?++r:--r)if(!this.children[t].isEqualNode(e.children[t]))return!1;return!0},e.prototype.getFeature=function(e,t){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.setUserData=function(e,t,r){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.getUserData=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.contains=function(e){return!!e&&(e===this||this.isDescendant(e))},e.prototype.isDescendant=function(e){var t,r,s,n;for(r=0,s=(n=this.children).length;r<s;r++){if(e===(t=n[r]))return!0;if(t.isDescendant(e))return!0}return!1},e.prototype.isAncestor=function(e){return e.isDescendant(this)},e.prototype.isPreceding=function(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&t<r},e.prototype.isFollowing=function(e){var t,r;return t=this.treePosition(e),r=this.treePosition(this),-1!==t&&-1!==r&&t>r},e.prototype.treePosition=function(e){var t,r;return r=0,t=!1,this.foreachTreeNode(this.document(),(function(s){if(r++,!t&&s===e)return t=!0})),t?r:-1},e.prototype.foreachTreeNode=function(e,t){var r,s,n,i,o;for(e||(e=this.document()),s=0,n=(i=e.children).length;s<n;s++){if(o=t(r=i[s]))return o;if(o=this.foreachTreeNode(r,t))return o}},e}()}).call(this)},2390:function(e){(function(){e.exports=function(){function e(e){this.nodes=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.nodes.length||0}}),e.prototype.clone=function(){return this.nodes=null},e.prototype.item=function(e){return this.nodes[e]||null},e}()}).call(this)},9181:function(e,t,r){(function(){var t,s,n={}.hasOwnProperty;t=r(9335),s=r(6488),e.exports=function(e){function r(e,s,n){if(r.__super__.constructor.call(this,e),null==s)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(s),this.name=this.target,n&&(this.value=this.stringify.insValue(n))}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},r.prototype.isEqualNode=function(e){return!!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)&&e.target===this.target},r}(s)}).call(this)},9406:function(e,t,r){(function(){var t,s,n={}.hasOwnProperty;t=r(9335),s=r(2026),e.exports=function(e){function r(e,s){if(r.__super__.constructor.call(this,e),null==s)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(s)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},r}(s)}).call(this)},1996:function(e,t,r){(function(){var t,s,n,i={}.hasOwnProperty;t=r(9335),n=r(751),s=r(594),e.exports=function(e){function r(e,t){this.stream=e,r.__super__.constructor.call(this,t)}return function(e,t){for(var r in t)i.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),r.prototype.endline=function(e,t,n){return e.isLastRootNode&&t.state===s.CloseTag?"":r.__super__.endline.call(this,e,t,n)},r.prototype.document=function(e,t){var r,s,n,i,o,a,c,u,h;for(s=n=0,o=(c=e.children).length;n<o;s=++n)(r=c[s]).isLastRootNode=s===e.children.length-1;for(t=this.filterOptions(t),h=[],i=0,a=(u=e.children).length;i<a;i++)r=u[i],h.push(this.writeChildNode(r,t,0));return h},r.prototype.attribute=function(e,t,s){return this.stream.write(r.__super__.attribute.call(this,e,t,s))},r.prototype.cdata=function(e,t,s){return this.stream.write(r.__super__.cdata.call(this,e,t,s))},r.prototype.comment=function(e,t,s){return this.stream.write(r.__super__.comment.call(this,e,t,s))},r.prototype.declaration=function(e,t,s){return this.stream.write(r.__super__.declaration.call(this,e,t,s))},r.prototype.docType=function(e,t,r){var n,i,o,a;if(r||(r=0),this.openNode(e,t,r),t.state=s.OpenTag,this.stream.write(this.indent(e,t,r)),this.stream.write("<!DOCTYPE "+e.root().name),e.pubID&&e.sysID?this.stream.write(' PUBLIC "'+e.pubID+'" "'+e.sysID+'"'):e.sysID&&this.stream.write(' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(e,t,r)),t.state=s.InsideTag,i=0,o=(a=e.children).length;i<o;i++)n=a[i],this.writeChildNode(n,t,r+1);t.state=s.CloseTag,this.stream.write("]")}return t.state=s.CloseTag,this.stream.write(t.spaceBeforeSlash+">"),this.stream.write(this.endline(e,t,r)),t.state=s.None,this.closeNode(e,t,r)},r.prototype.element=function(e,r,n){var o,a,c,u,h,l,p,d,f;for(p in n||(n=0),this.openNode(e,r,n),r.state=s.OpenTag,this.stream.write(this.indent(e,r,n)+"<"+e.name),d=e.attribs)i.call(d,p)&&(o=d[p],this.attribute(o,r,n));if(u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))r.allowEmpty?(this.stream.write(">"),r.state=s.CloseTag,this.stream.write("</"+e.name+">")):(r.state=s.CloseTag,this.stream.write(r.spaceBeforeSlash+"/>"));else if(!r.pretty||1!==c||u.type!==t.Text&&u.type!==t.Raw||null==u.value){for(this.stream.write(">"+this.endline(e,r,n)),r.state=s.InsideTag,h=0,l=(f=e.children).length;h<l;h++)a=f[h],this.writeChildNode(a,r,n+1);r.state=s.CloseTag,this.stream.write(this.indent(e,r,n)+"</"+e.name+">")}else this.stream.write(">"),r.state=s.InsideTag,r.suppressPrettyCount++,this.writeChildNode(u,r,n+1),r.suppressPrettyCount--,r.state=s.CloseTag,this.stream.write("</"+e.name+">");return this.stream.write(this.endline(e,r,n)),r.state=s.None,this.closeNode(e,r,n)},r.prototype.processingInstruction=function(e,t,s){return this.stream.write(r.__super__.processingInstruction.call(this,e,t,s))},r.prototype.raw=function(e,t,s){return this.stream.write(r.__super__.raw.call(this,e,t,s))},r.prototype.text=function(e,t,s){return this.stream.write(r.__super__.text.call(this,e,t,s))},r.prototype.dtdAttList=function(e,t,s){return this.stream.write(r.__super__.dtdAttList.call(this,e,t,s))},r.prototype.dtdElement=function(e,t,s){return this.stream.write(r.__super__.dtdElement.call(this,e,t,s))},r.prototype.dtdEntity=function(e,t,s){return this.stream.write(r.__super__.dtdEntity.call(this,e,t,s))},r.prototype.dtdNotation=function(e,t,s){return this.stream.write(r.__super__.dtdNotation.call(this,e,t,s))},r}(n)}).call(this)},6434:function(e,t,r){(function(){var t,s={}.hasOwnProperty;t=r(751),e.exports=function(e){function t(e){t.__super__.constructor.call(this,e)}return function(e,t){for(var r in t)s.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(t,e),t.prototype.document=function(e,t){var r,s,n,i,o;for(t=this.filterOptions(t),i="",s=0,n=(o=e.children).length;s<n;s++)r=o[s],i+=this.writeChildNode(r,t,0);return t.pretty&&i.slice(-t.newline.length)===t.newline&&(i=i.slice(0,-t.newline.length)),i},t}(t)}).call(this)},5549:function(e){(function(){var t=function(e,t){return function(){return e.apply(t,arguments)}},r={}.hasOwnProperty;e.exports=function(){function e(e){var s,n,i;for(s in this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this),e||(e={}),this.options=e,this.options.version||(this.options.version="1.0"),n=e.stringify||{})r.call(n,s)&&(i=n[s],this[s]=i)}return e.prototype.name=function(e){return this.options.noValidation?e:this.assertLegalName(""+e||"")},e.prototype.text=function(e){return this.options.noValidation?e:this.assertLegalChar(this.textEscape(""+e||""))},e.prototype.cdata=function(e){return this.options.noValidation?e:(e=(e=""+e||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(e))},e.prototype.comment=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/--/))throw new Error("Comment text cannot contain double-hypen: "+e);return this.assertLegalChar(e)},e.prototype.raw=function(e){return this.options.noValidation?e:""+e||""},e.prototype.attValue=function(e){return this.options.noValidation?e:this.assertLegalChar(this.attEscape(e=""+e||""))},e.prototype.insTarget=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.insValue=function(e){if(this.options.noValidation)return e;if((e=""+e||"").match(/\?>/))throw new Error("Invalid processing instruction value: "+e);return this.assertLegalChar(e)},e.prototype.xmlVersion=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/1\.[0-9]+/))throw new Error("Invalid version number: "+e);return e},e.prototype.xmlEncoding=function(e){if(this.options.noValidation)return e;if(!(e=""+e||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+e);return this.assertLegalChar(e)},e.prototype.xmlStandalone=function(e){return this.options.noValidation?e:e?"yes":"no"},e.prototype.dtdPubID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdSysID=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdElementValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttType=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdAttDefault=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdEntityValue=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.dtdNData=function(e){return this.options.noValidation?e:this.assertLegalChar(""+e||"")},e.prototype.convertAttKey="@",e.prototype.convertPIKey="?",e.prototype.convertTextKey="#text",e.prototype.convertCDataKey="#cdata",e.prototype.convertCommentKey="#comment",e.prototype.convertRawKey="#raw",e.prototype.assertLegalChar=function(e){var t,r;if(this.options.noValidation)return e;if(t="","1.0"===this.options.version){if(t=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=e.match(t))throw new Error("Invalid character in string: "+e+" at index "+r.index)}else if("1.1"===this.options.version&&(t=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=e.match(t)))throw new Error("Invalid character in string: "+e+" at index "+r.index);return e},e.prototype.assertLegalName=function(e){var t;if(this.options.noValidation)return e;if(this.assertLegalChar(e),t=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!e.match(t))throw new Error("Invalid character in name");return e},e.prototype.textEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},e.prototype.attEscape=function(e){var t;return this.options.noValidation?e:(t=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,e.replace(t,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},e}()}).call(this)},3595:function(e,t,r){(function(){var t,s,n={}.hasOwnProperty;t=r(9335),s=r(6488),e.exports=function(e){function r(e,s){if(r.__super__.constructor.call(this,e),null==s)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(s)}return function(e,t){for(var r in t)n.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype}(r,e),Object.defineProperty(r.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"wholeText",{get:function(){var e,t,r;for(r="",t=this.previousSibling;t;)r=t.data+r,t=t.previousSibling;for(r+=this.data,e=this.nextSibling;e;)r+=e.data,e=e.nextSibling;return r}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},r.prototype.splitText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.replaceWholeText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},r}(s)}).call(this)},751:function(e,t,r){(function(){var t,s,n,i={}.hasOwnProperty;n=r(8369).assign,t=r(9335),r(9077),r(6544),r(6170),r(2096),r(2161),r(9406),r(3595),r(9181),r(8833),r(1179),r(6347),r(9078),r(4777),s=r(594),e.exports=function(){function e(e){var t,r,s;for(t in e||(e={}),this.options=e,r=e.writer||{})i.call(r,t)&&(s=r[t],this["_"+t]=this[t],this[t]=s)}return e.prototype.filterOptions=function(e){var t,r,i,o,a,c,u,h;return e||(e={}),e=n({},this.options,e),(t={writer:this}).pretty=e.pretty||!1,t.allowEmpty=e.allowEmpty||!1,t.indent=null!=(r=e.indent)?r:"  ",t.newline=null!=(i=e.newline)?i:"\n",t.offset=null!=(o=e.offset)?o:0,t.dontPrettyTextNodes=null!=(a=null!=(c=e.dontPrettyTextNodes)?c:e.dontprettytextnodes)?a:0,t.spaceBeforeSlash=null!=(u=null!=(h=e.spaceBeforeSlash)?h:e.spacebeforeslash)?u:"",!0===t.spaceBeforeSlash&&(t.spaceBeforeSlash=" "),t.suppressPrettyCount=0,t.user={},t.state=s.None,t},e.prototype.indent=function(e,t,r){var s;return!t.pretty||t.suppressPrettyCount?"":t.pretty&&(s=(r||0)+t.offset+1)>0?new Array(s).join(t.indent):""},e.prototype.endline=function(e,t,r){return!t.pretty||t.suppressPrettyCount?"":t.newline},e.prototype.attribute=function(e,t,r){var s;return this.openAttribute(e,t,r),s=" "+e.name+'="'+e.value+'"',this.closeAttribute(e,t,r),s},e.prototype.cdata=function(e,t,r){var n;return this.openNode(e,t,r),t.state=s.OpenTag,n=this.indent(e,t,r)+"<![CDATA[",t.state=s.InsideTag,n+=e.value,t.state=s.CloseTag,n+="]]>"+this.endline(e,t,r),t.state=s.None,this.closeNode(e,t,r),n},e.prototype.comment=function(e,t,r){var n;return this.openNode(e,t,r),t.state=s.OpenTag,n=this.indent(e,t,r)+"\x3c!-- ",t.state=s.InsideTag,n+=e.value,t.state=s.CloseTag,n+=" --\x3e"+this.endline(e,t,r),t.state=s.None,this.closeNode(e,t,r),n},e.prototype.declaration=function(e,t,r){var n;return this.openNode(e,t,r),t.state=s.OpenTag,n=this.indent(e,t,r)+"<?xml",t.state=s.InsideTag,n+=' version="'+e.version+'"',null!=e.encoding&&(n+=' encoding="'+e.encoding+'"'),null!=e.standalone&&(n+=' standalone="'+e.standalone+'"'),t.state=s.CloseTag,n+=t.spaceBeforeSlash+"?>",n+=this.endline(e,t,r),t.state=s.None,this.closeNode(e,t,r),n},e.prototype.docType=function(e,t,r){var n,i,o,a,c;if(r||(r=0),this.openNode(e,t,r),t.state=s.OpenTag,a=this.indent(e,t,r),a+="<!DOCTYPE "+e.root().name,e.pubID&&e.sysID?a+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(a+=' SYSTEM "'+e.sysID+'"'),e.children.length>0){for(a+=" [",a+=this.endline(e,t,r),t.state=s.InsideTag,i=0,o=(c=e.children).length;i<o;i++)n=c[i],a+=this.writeChildNode(n,t,r+1);t.state=s.CloseTag,a+="]"}return t.state=s.CloseTag,a+=t.spaceBeforeSlash+">",a+=this.endline(e,t,r),t.state=s.None,this.closeNode(e,t,r),a},e.prototype.element=function(e,r,n){var o,a,c,u,h,l,p,d,f,m,g,y,b,v;for(f in n||(n=0),m=!1,g="",this.openNode(e,r,n),r.state=s.OpenTag,g+=this.indent(e,r,n)+"<"+e.name,y=e.attribs)i.call(y,f)&&(o=y[f],g+=this.attribute(o,r,n));if(u=0===(c=e.children.length)?null:e.children[0],0===c||e.children.every((function(e){return(e.type===t.Text||e.type===t.Raw)&&""===e.value})))r.allowEmpty?(g+=">",r.state=s.CloseTag,g+="</"+e.name+">"+this.endline(e,r,n)):(r.state=s.CloseTag,g+=r.spaceBeforeSlash+"/>"+this.endline(e,r,n));else if(!r.pretty||1!==c||u.type!==t.Text&&u.type!==t.Raw||null==u.value){if(r.dontPrettyTextNodes)for(h=0,p=(b=e.children).length;h<p;h++)if(((a=b[h]).type===t.Text||a.type===t.Raw)&&null!=a.value){r.suppressPrettyCount++,m=!0;break}for(g+=">"+this.endline(e,r,n),r.state=s.InsideTag,l=0,d=(v=e.children).length;l<d;l++)a=v[l],g+=this.writeChildNode(a,r,n+1);r.state=s.CloseTag,g+=this.indent(e,r,n)+"</"+e.name+">",m&&r.suppressPrettyCount--,g+=this.endline(e,r,n),r.state=s.None}else g+=">",r.state=s.InsideTag,r.suppressPrettyCount++,m=!0,g+=this.writeChildNode(u,r,n+1),r.suppressPrettyCount--,m=!1,r.state=s.CloseTag,g+="</"+e.name+">"+this.endline(e,r,n);return this.closeNode(e,r,n),g},e.prototype.writeChildNode=function(e,r,s){switch(e.type){case t.CData:return this.cdata(e,r,s);case t.Comment:return this.comment(e,r,s);case t.Element:return this.element(e,r,s);case t.Raw:return this.raw(e,r,s);case t.Text:return this.text(e,r,s);case t.ProcessingInstruction:return this.processingInstruction(e,r,s);case t.Dummy:return"";case t.Declaration:return this.declaration(e,r,s);case t.DocType:return this.docType(e,r,s);case t.AttributeDeclaration:return this.dtdAttList(e,r,s);case t.ElementDeclaration:return this.dtdElement(e,r,s);case t.EntityDeclaration:return this.dtdEntity(e,r,s);case t.NotationDeclaration:return this.dtdNotation(e,r,s);default:throw new Error("Unknown XML node type: "+e.constructor.name)}},e.prototype.processingInstruction=function(e,t,r){var n;return this.openNode(e,t,r),t.state=s.OpenTag,n=this.indent(e,t,r)+"<?",t.state=s.InsideTag,n+=e.target,e.value&&(n+=" "+e.value),t.state=s.CloseTag,n+=t.spaceBeforeSlash+"?>",n+=this.endline(e,t,r),t.state=s.None,this.closeNode(e,t,r),n},e.prototype.raw=function(e,t,r){var n;return this.openNode(e,t,r),t.state=s.OpenTag,n=this.indent(e,t,r),t.state=s.InsideTag,n+=e.value,t.state=s.CloseTag,n+=this.endline(e,t,r),t.state=s.None,this.closeNode(e,t,r),n},e.prototype.text=function(e,t,r){var n;return this.openNode(e,t,r),t.state=s.OpenTag,n=this.indent(e,t,r),t.state=s.InsideTag,n+=e.value,t.state=s.CloseTag,n+=this.endline(e,t,r),t.state=s.None,this.closeNode(e,t,r),n},e.prototype.dtdAttList=function(e,t,r){var n;return this.openNode(e,t,r),t.state=s.OpenTag,n=this.indent(e,t,r)+"<!ATTLIST",t.state=s.InsideTag,n+=" "+e.elementName+" "+e.attributeName+" "+e.attributeType,"#DEFAULT"!==e.defaultValueType&&(n+=" "+e.defaultValueType),e.defaultValue&&(n+=' "'+e.defaultValue+'"'),t.state=s.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=s.None,this.closeNode(e,t,r),n},e.prototype.dtdElement=function(e,t,r){var n;return this.openNode(e,t,r),t.state=s.OpenTag,n=this.indent(e,t,r)+"<!ELEMENT",t.state=s.InsideTag,n+=" "+e.name+" "+e.value,t.state=s.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=s.None,this.closeNode(e,t,r),n},e.prototype.dtdEntity=function(e,t,r){var n;return this.openNode(e,t,r),t.state=s.OpenTag,n=this.indent(e,t,r)+"<!ENTITY",t.state=s.InsideTag,e.pe&&(n+=" %"),n+=" "+e.name,e.value?n+=' "'+e.value+'"':(e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),e.nData&&(n+=" NDATA "+e.nData)),t.state=s.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=s.None,this.closeNode(e,t,r),n},e.prototype.dtdNotation=function(e,t,r){var n;return this.openNode(e,t,r),t.state=s.OpenTag,n=this.indent(e,t,r)+"<!NOTATION",t.state=s.InsideTag,n+=" "+e.name,e.pubID&&e.sysID?n+=' PUBLIC "'+e.pubID+'" "'+e.sysID+'"':e.pubID?n+=' PUBLIC "'+e.pubID+'"':e.sysID&&(n+=' SYSTEM "'+e.sysID+'"'),t.state=s.CloseTag,n+=t.spaceBeforeSlash+">"+this.endline(e,t,r),t.state=s.None,this.closeNode(e,t,r),n},e.prototype.openNode=function(e,t,r){},e.prototype.closeNode=function(e,t,r){},e.prototype.openAttribute=function(e,t,r){},e.prototype.closeAttribute=function(e,t,r){},e}()}).call(this)},5532:function(e,t,r){(function(){var t,s,n,i,o,a,c,u,h,l;l=r(8369),u=l.assign,h=l.isFunction,n=r(1770),i=r(6934),o=r(9227),c=r(6434),a=r(1996),t=r(9335),s=r(594),e.exports.create=function(e,t,r,s){var n,o;if(null==e)throw new Error("Root element needs a name.");return s=u({},t,r,s),o=(n=new i(s)).element(e),s.headless||(n.declaration(s),null==s.pubID&&null==s.sysID||n.dtd(s)),o},e.exports.begin=function(e,t,r){var s;return h(e)&&(t=(s=[e,t])[0],r=s[1],e={}),t?new o(e,t,r):new i(e)},e.exports.stringWriter=function(e){return new c(e)},e.exports.streamWriter=function(e,t){return new a(e,t)},e.exports.implementation=new n,e.exports.nodeType=t,e.exports.writerState=s}).call(this)},6828:e=>{"use strict";e.exports=require("vscode")},2081:e=>{"use strict";e.exports=require("child_process")},6206:e=>{"use strict";e.exports=require("console")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},3477:e=>{"use strict";e.exports=require("querystring")},4521:e=>{"use strict";e.exports=require("readline")},2781:e=>{"use strict";e.exports=require("stream")},1576:e=>{"use strict";e.exports=require("string_decoder")},9512:e=>{"use strict";e.exports=require("timers")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6292);module.exports=__webpack_exports__})();
//# sourceMappingURL=extension.js.map