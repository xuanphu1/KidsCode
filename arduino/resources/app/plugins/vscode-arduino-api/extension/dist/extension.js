(()=>{"use strict";var t={668:(t,e)=>{const{hasOwnProperty:n}=Object.prototype,r=g();r.configure=g,r.stringify=r,r.default=r,e.stringify=r,e.configure=g,t.exports=r;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function o(t){return t.length<5e3&&!i.test(t)?`"${t}"`:JSON.stringify(t)}function u(t){if(t.length>200)return t.sort();for(let e=1;e<t.length;e++){const n=t[e];let r=e;for(;0!==r&&t[r-1]>n;)t[r]=t[r-1],r--;t[r]=n}return t}const l=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function s(t){return void 0!==l.call(t)&&0!==t.length}function f(t,e,n){t.length<n&&(n=t.length);const r=","===e?"":" ";let i=`"0":${r}${t[0]}`;for(let o=1;o<n;o++)i+=`${e}"${o}":${r}${t[o]}`;return i}function a(t,e){let r;if(n.call(t,e)&&(r=t[e],"boolean"!=typeof r))throw new TypeError(`The "${e}" argument must be of type boolean`);return void 0===r||r}function c(t,e){let r;if(n.call(t,e)){if(r=t[e],"number"!=typeof r)throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return void 0===r?1/0:r}function d(t){return 1===t?"1 item":`${t} items`}function g(t){const e=function(t){if(n.call(t,"strict")){const e=t.strict;if("boolean"!=typeof e)throw new TypeError('The "strict" argument must be of type boolean');if(e)return t=>{let e="Object can not safely be stringified. Received type "+typeof t;throw"function"!=typeof t&&(e+=` (${t.toString()})`),new Error(e)}}}(t={...t});e&&(void 0===t.bigint&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));const r=function(t){if(n.call(t,"circularValue")){const e=t.circularValue;if("string"==typeof e)return`"${e}"`;if(null==e)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}(t),i=a(t,"bigint"),l=a(t,"deterministic"),g=c(t,"maximumDepth"),p=c(t,"maximumBreadth");function h(t,n,f,a,c,y){let $=n[t];switch("object"==typeof $&&null!==$&&"function"==typeof $.toJSON&&($=$.toJSON(t)),$=a.call(n,t,$),typeof $){case"string":return o($);case"object":{if(null===$)return"null";if(-1!==f.indexOf($))return r;let t="",e=",";const n=y;if(Array.isArray($)){if(0===$.length)return"[]";if(g<f.length+1)return'"[Array]"';f.push($),""!==c&&(t+=`\n${y+=c}`,e=`,\n${y}`);const r=Math.min($.length,p);let i=0;for(;i<r-1;i++){const n=h(String(i),$,f,a,c,y);t+=void 0!==n?n:"null",t+=e}const o=h(String(i),$,f,a,c,y);return t+=void 0!==o?o:"null",$.length-1>p&&(t+=`${e}"... ${d($.length-p-1)} not stringified"`),""!==c&&(t+=`\n${n}`),f.pop(),`[${t}]`}let i=Object.keys($);const b=i.length;if(0===b)return"{}";if(g<f.length+1)return'"[Object]"';let m="",v="";""!==c&&(e=`,\n${y+=c}`,m=" ");const S=Math.min(b,p);l&&!s($)&&(i=u(i)),f.push($);for(let n=0;n<S;n++){const r=i[n],u=h(r,$,f,a,c,y);void 0!==u&&(t+=`${v}${o(r)}:${m}${u}`,v=e)}return b>p&&(t+=`${v}"...":${m}"${d(b-p)} not stringified"`,v=e),""!==c&&v.length>1&&(t=`\n${y}${t}\n${n}`),f.pop(),`{${t}}`}case"number":return isFinite($)?String($):e?e($):"null";case"boolean":return!0===$?"true":"false";case"undefined":return;case"bigint":if(i)return String($);default:return e?e($):void 0}}function y(t,n,u,l,s,f){switch("object"==typeof n&&null!==n&&"function"==typeof n.toJSON&&(n=n.toJSON(t)),typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if(-1!==u.indexOf(n))return r;const t=f;let e="",i=",";if(Array.isArray(n)){if(0===n.length)return"[]";if(g<u.length+1)return'"[Array]"';u.push(n),""!==s&&(e+=`\n${f+=s}`,i=`,\n${f}`);const r=Math.min(n.length,p);let o=0;for(;o<r-1;o++){const t=y(String(o),n[o],u,l,s,f);e+=void 0!==t?t:"null",e+=i}const a=y(String(o),n[o],u,l,s,f);return e+=void 0!==a?a:"null",n.length-1>p&&(e+=`${i}"... ${d(n.length-p-1)} not stringified"`),""!==s&&(e+=`\n${t}`),u.pop(),`[${e}]`}u.push(n);let a="";""!==s&&(i=`,\n${f+=s}`,a=" ");let c="";for(const t of l){const r=y(t,n[t],u,l,s,f);void 0!==r&&(e+=`${c}${o(t)}:${a}${r}`,c=i)}return""!==s&&c.length>1&&(e=`\n${f}${e}\n${t}`),u.pop(),`{${e}}`}case"number":return isFinite(n)?String(n):e?e(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return;case"bigint":if(i)return String(n);default:return e?e(n):void 0}}function $(t,n,a,c,h){switch(typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if("function"==typeof n.toJSON){if("object"!=typeof(n=n.toJSON(t)))return $(t,n,a,c,h);if(null===n)return"null"}if(-1!==a.indexOf(n))return r;const e=h;if(Array.isArray(n)){if(0===n.length)return"[]";if(g<a.length+1)return'"[Array]"';a.push(n);let t=`\n${h+=c}`;const r=`,\n${h}`,i=Math.min(n.length,p);let o=0;for(;o<i-1;o++){const e=$(String(o),n[o],a,c,h);t+=void 0!==e?e:"null",t+=r}const u=$(String(o),n[o],a,c,h);return t+=void 0!==u?u:"null",n.length-1>p&&(t+=`${r}"... ${d(n.length-p-1)} not stringified"`),t+=`\n${e}`,a.pop(),`[${t}]`}let i=Object.keys(n);const y=i.length;if(0===y)return"{}";if(g<a.length+1)return'"[Object]"';const b=`,\n${h+=c}`;let m="",v="",S=Math.min(y,p);s(n)&&(m+=f(n,b,p),i=i.slice(n.length),S-=n.length,v=b),l&&(i=u(i)),a.push(n);for(let t=0;t<S;t++){const e=i[t],r=$(e,n[e],a,c,h);void 0!==r&&(m+=`${v}${o(e)}: ${r}`,v=b)}return y>p&&(m+=`${v}"...": "${d(y-p)} not stringified"`,v=b),""!==v&&(m=`\n${h}${m}\n${e}`),a.pop(),`{${m}}`}case"number":return isFinite(n)?String(n):e?e(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return;case"bigint":if(i)return String(n);default:return e?e(n):void 0}}function b(t,n,a){switch(typeof n){case"string":return o(n);case"object":{if(null===n)return"null";if("function"==typeof n.toJSON){if("object"!=typeof(n=n.toJSON(t)))return b(t,n,a);if(null===n)return"null"}if(-1!==a.indexOf(n))return r;let e="";if(Array.isArray(n)){if(0===n.length)return"[]";if(g<a.length+1)return'"[Array]"';a.push(n);const t=Math.min(n.length,p);let r=0;for(;r<t-1;r++){const t=b(String(r),n[r],a);e+=void 0!==t?t:"null",e+=","}const i=b(String(r),n[r],a);return e+=void 0!==i?i:"null",n.length-1>p&&(e+=`,"... ${d(n.length-p-1)} not stringified"`),a.pop(),`[${e}]`}let i=Object.keys(n);const c=i.length;if(0===c)return"{}";if(g<a.length+1)return'"[Object]"';let h="",y=Math.min(c,p);s(n)&&(e+=f(n,",",p),i=i.slice(n.length),y-=n.length,h=","),l&&(i=u(i)),a.push(n);for(let t=0;t<y;t++){const r=i[t],u=b(r,n[r],a);void 0!==u&&(e+=`${h}${o(r)}:${u}`,h=",")}return c>p&&(e+=`${h}"...":"${d(c-p)} not stringified"`),a.pop(),`{${e}}`}case"number":return isFinite(n)?String(n):e?e(n):"null";case"boolean":return!0===n?"true":"false";case"undefined":return;case"bigint":if(i)return String(n);default:return e?e(n):void 0}}return function(t,e,n){if(arguments.length>1){let r="";if("number"==typeof n?r=" ".repeat(Math.min(n,10)):"string"==typeof n&&(r=n.slice(0,10)),null!=e){if("function"==typeof e)return h("",{"":t},[],e,r,"");if(Array.isArray(e))return y("",t,[],function(t){const e=new Set;for(const n of t)"string"!=typeof n&&"number"!=typeof n||e.add(String(n));return e}(e),r,"")}if(0!==r.length)return $("",t,[],r,"")}return b("",t,[])}}},504:function(t,e,n){var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.__test=e.createArduinoContext=void 0;const i=r(n(668)),o=r(n(496));e.createArduinoContext=function(t){let e=!1,n=!0;const r=()=>e=f("log"),s=()=>n=f("compareBeforeUpdate");let a;r(),s();let c=!1;const d=l.reduce(((t,e)=>(t[e]=new o.default.EventEmitter,t)),{}),g=function(t){return Object.entries(t).reduce(((t,[e,n])=>(t[e]=n.event,t)),{})}(d),p=[o.default.workspace.onDidChangeConfiguration((({affectsConfiguration:t})=>{t("arduinoAPI.log")?r():t("arduinoAPI.compareBeforeUpdate")&&s()})),new o.default.Disposable((()=>a?.dispose())),o.default.commands.registerCommand(u,(t=>{if("object"==typeof(e=t)&&void 0!==e.key&&"string"==typeof e.key&&l.includes(e.key)&&"value"in e){const{key:e,value:n}=t;return $(e,n)}var e;{let e=String(t);try{e=JSON.stringify(t)}catch{}throw new Error(`Invalid state update: ${e}`)}})),...Object.values(d)],h=()=>{if(c)throw new Error("Disposed")},y=e=>(h(),function(t,e){return t.get(e)}(t,e)),$=async(r,u)=>{if(h(),n){const t=y(r);if((0,i.default)(t)===(0,i.default)(u))return}var l;await async function(t,e,n){return t.update(e,n)}(t,r,u),l=`Updated '${r}': ${JSON.stringify(u)}`,e&&(a||(a=o.default.window.createOutputChannel("Arduino API")),a.appendLine(l)),d[r].fire(u)};return{onDidChange:t=>g[t],get sketchPath(){return y("sketchPath")},get compileSummary(){return y("compileSummary")},get fqbn(){return y("fqbn")},get boardDetails(){return y("boardDetails")},get port(){return y("port")},get userDirPath(){return y("userDirPath")},get dataDirPath(){return y("dataDirPath")},dispose(){c||(o.default.Disposable.from(...p).dispose(),c=!0)}}};const u="arduinoAPI.updateState",l=Object.keys({sketchPath:void 0,compileSummary:void 0,fqbn:void 0,boardDetails:void 0,port:void 0,userDirPath:void 0,dataDirPath:void 0}),s={log:!1,compareBeforeUpdate:!0};function f(t){const e=s[t];return o.default.workspace.getConfiguration("arduinoAPI").get(t,e)}e.__test={updateStateCommandId:u,defaultConfigValues:s,getWorkspaceConfig:f}},598:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InmemoryState=void 0,e.InmemoryState=class{constructor(){this.state={}}keys(){return Object.keys(this.state)}get(t,e){return this.state[t]??e}update(t,e){return void 0===e?delete this.state[t]:this.state[t]=e,Promise.resolve()}}},496:t=>{t.exports=require("vscode")}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}var r={};(()=>{var t=r;Object.defineProperty(t,"__esModule",{value:!0}),t.activate=void 0;const e=n(504),i=n(598);t.activate=function(t){const n=(0,e.createArduinoContext)(new i.InmemoryState);return t.subscriptions.push(n),n}})(),module.exports=r})();